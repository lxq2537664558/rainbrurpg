%META:TOPICINFO{author="ProjectContributor" date="1191140874" format="1.1" version="1"}%
%META:TOPICPARENT{name="Plugins"}%
---+!! RainbrurpgMetaserverPlugin

<!--
   * Set SHORTDESCRIPTION = The <nop>RainbruRPG meta-server
-->

%SHORTDESCRIPTION%
%TOC%

---++ Introduction

This plugin is used as a meta server (i.e. a list of currently online servers) 
for <nop>RainbruRPG, a MMORPG. For more information, please visit the
[[http://rainbrurpg.sourceforge.net][game website]].

---++ Internals

The plugin deals with an _XML_ file (=server_list.xml) located in the =pub/= 
directory of your _foswiki_ installation. If includes several datas used
to identify, contact and choose servers.

---+++ Name

The name of the server.

---+++ Clients

The number of clients actually connected to the server.

---+++ Ip/Port

How to contact the server.

---+++ Uptime

The uptime of the server from epoch.

---+++ Comment

A comment added by the server administrator.

---+++ Error

This is the _error status_ of the server. A server with _true_ value indicates
the =error bot= had some difficulties to contact this server. When in error 
status, we must set an XML attribute called _since_ filled with epoch time
we discover the server error.

---++ Download

You can get this plugin either as an archive or using SVN repository :

   * the last archive can be download here : http://sourceforge.net/projects/rainbrurpg/files/meta/.
   * to browse the dedicated sources online, follow http://rainbrurpg.svn.sourceforge.net/viewvc/rainbrurpg/trunk/meta/.
   * to _checkout_ the source use the following command : 
<verbatim>
svn co https://rainbrurpg.svn.sourceforge.net/svnroot/rainbrurpg/trunk/meta/ rainbrurpg-meta
</verbatim>

---++ Installation

The plugin contains three files. Install these in the given directory,
from te /foswiki/ installation's root.

| *File* | *Location* | *Comment* |
| <nop>RainbrurpgMetaserverPlugin.txt | =/data/System/= | the plugin's documentation. |
| <nop>RainbrurpgMetaserverPlugin.pm | =/lib/Foswiki/Plugins/= | The plugin code. |
| functions.pm | =/lib/Foswiki/Plugins/RainbrurpgMetaserverPlugin/= | The XML handling code. |
| server_list.xml | =/pub/= | Optional. !%RB_SERVER_LIST% will print an empty table if not found. |

You should need to create the =Plugins/RainbrurpgMetaserverPlugin= directory
the first time you install it.

Then, you need to enable it using the _foswiki_'s =configure= script, and use
the provided macros to use it.

---++ Provided macros

---+++ The !%RB_SERVER_LIST% macro 

This macro renders the currently online and usable servers in a nice 
foswiki table.

---+++ The !%RB_SERVER_ERROR% macro 

This macro prints a table containing servers in error status.

---++ The REST API

From the game point of view, server and client contact foswiki through a
[[http://en.wikipedia.org/wiki/Representational_State_Transfer][REST]] API.
Basically, this API deserve Yaml data and is used to modify server list.
It needs identification.

To test a function, you must use a URL like this 
=http://my.host/bin/rest/<subject>/<verb>= where <subject> is 
_RainbrurpgMetaserverPlugin_ and <verb> is the function to be called. For more
informations on the _foswiki_ REST feature, please see 
 http://foswiki.org/TWiki/CommandAndCGIScripts#A_61rest_61.

Here is a list of functions currently implemented :

---+++ server_list

Simply list all servers (even those in error status) in YAML format.



---++ Plugin Info

|  Copyright: | Copyright (C) 2011-2012 J&eacute;r&ocirc;me Pasquier, rainbru@free.fr |
|  License: | GPL ([[http://www.gnu.org/copyleft/gpl.html][GNU General Public License]]) |
|  Version: | 0.0.0 |
|  Release: | 3 |
|  <span class="foswikiNoBreak" >Change History:</span> | <!-- versions below in reverse order -->&nbsp; |
|  23 Feb 2012: | Added _Download_ and _Installation_ parts. |
|  25 Jul 2011: | Initial version |
|  Plugin Home: | http://rainbrurpg.sourceforge.net/wiki/bin/view/System/RainbrurpgMetaserverPlugin |
|  Support: | http://sourceforge.net/projects/rainbrurpg/support |


---
*Related Topics:* [[%SYSTEMWEB%.Plugins][Plugins]], %SYSTEMWEB%.DeveloperDocumentationCategory, %SYSTEMWEB%.AdminDocumentationCategory, %SYSTEMWEB%.DefaultPreferences, %USERSWEB%.SitePreferences, Foswiki:Extensions/TreePlugin
<!-- %JQREQUIRE{"chili"}% -->
