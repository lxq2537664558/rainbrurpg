<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>RainbruRPG: terminalapi/terminalapp.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="classes.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir_26d635e309b1d74b6edeb5f5cc9b9ff2.html">terminalapi</a></div>
<h1>terminalapp.cpp</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> *  Copyright 2006 Jerome PASQUIER</span>
<a name="l00003"></a>00003 <span class="comment"> * </span>
<a name="l00004"></a>00004 <span class="comment"> *  This file is part of RainbruRPG.</span>
<a name="l00005"></a>00005 <span class="comment"> *</span>
<a name="l00006"></a>00006 <span class="comment"> *  RainbruRPG is free software; you can redistribute it and/or modify</span>
<a name="l00007"></a>00007 <span class="comment"> *  it under the terms of the GNU General Public License as published by</span>
<a name="l00008"></a>00008 <span class="comment"> *  the Free Software Foundation; either version 2 of the License, or</span>
<a name="l00009"></a>00009 <span class="comment"> *  (at your option) any later version.</span>
<a name="l00010"></a>00010 <span class="comment"> *</span>
<a name="l00011"></a>00011 <span class="comment"> *  RainbruRPG is distributed in the hope that it will be useful,</span>
<a name="l00012"></a>00012 <span class="comment"> *  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00013"></a>00013 <span class="comment"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00014"></a>00014 <span class="comment"> *  GNU General Public License for more details.</span>
<a name="l00015"></a>00015 <span class="comment"> *</span>
<a name="l00016"></a>00016 <span class="comment"> *  You should have received a copy of the GNU General Public License</span>
<a name="l00017"></a>00017 <span class="comment"> *  along with Foobar; if not, write to the Free Software</span>
<a name="l00018"></a>00018 <span class="comment"> *  Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA</span>
<a name="l00019"></a>00019 <span class="comment"> *  02110-1301  USA</span>
<a name="l00020"></a>00020 <span class="comment"> *</span>
<a name="l00021"></a>00021 <span class="comment"> */</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include "terminalapp.h"</span>
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 <span class="preprocessor">#include "logger.h"</span>
<a name="l00025"></a>00025 
<a name="l00029"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#0dfb294a7400d6ea6c8d68e1649f6b75">00029</a> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#0dfb294a7400d6ea6c8d68e1649f6b75">RainbruRPG::Terminal::TerminalApp::TerminalApp</a>(){
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 }
<a name="l00032"></a>00032 
<a name="l00036"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#70e0c63ddb9af6b0b6651d48fd032d06">00036</a> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#70e0c63ddb9af6b0b6651d48fd032d06">RainbruRPG::Terminal::TerminalApp::~TerminalApp</a>(){
<a name="l00037"></a>00037 
<a name="l00038"></a>00038 }
<a name="l00039"></a>00039 
<a name="l00046"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#233bfecd1a82691c7bebafa6a277cb72">00046</a> <span class="keywordtype">void</span> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#233bfecd1a82691c7bebafa6a277cb72">RainbruRPG::Terminal::TerminalApp::init</a>(){
<a name="l00047"></a>00047   <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#cb41aadf771bc3285a318316b6b39882">timeout</a>=2;
<a name="l00048"></a>00048   <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#7207e77ab6e1af481d4fbe393edb0c5f">keycodeboxWidth</a>=6;
<a name="l00049"></a>00049   <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#afc1b53fcd7ee896d0c6d2b9022cb0bd">message</a>=<span class="stringliteral">"Hit F10 for menubar"</span>;
<a name="l00050"></a>00050   <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#15b49865fc516977eb15f2ab007b692b">lastKeycode</a>=-1;
<a name="l00051"></a>00051   <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#67d2bff3e3ce6a225e9e935527ef6a23">currentMenu</a>=0;
<a name="l00052"></a>00052   <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#c77234bd90dbeb530f150b02c026a6fc">currentSubMenu</a>=0;
<a name="l00053"></a>00053   <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#8228bb6ef8bb4a6ee15354c787671460">altKeycode</a>=<span class="keyword">false</span>;
<a name="l00054"></a>00054   <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#4f5d186ece65972b2a504ac4ce4640fa">inMenu</a>=<span class="keyword">false</span>;
<a name="l00055"></a>00055   <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#cbbf815755e2076627f38bbd1b8fec54">inSubMenu</a>=<span class="keyword">false</span>;
<a name="l00056"></a>00056   <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#a59f7faef2143ebeae919adb22d21b65">showingDialog</a>=<span class="keyword">false</span>;
<a name="l00057"></a>00057 
<a name="l00058"></a>00058   <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#409ea13c6db9b935a3d9af8d43eac2ee">initTerminal</a> (1, 1);
<a name="l00059"></a>00059   <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#fb14d17b4a94e7d55e0b850295f45463">initColors</a>();
<a name="l00060"></a>00060   <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#5a2138513eea8f43ecb1a192bf689f3c">draw</a>();
<a name="l00061"></a>00061 }
<a name="l00062"></a>00062 
<a name="l00066"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#eaff9413cee2cab15632689185610c3b">00066</a> <span class="keywordtype">void</span> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#eaff9413cee2cab15632689185610c3b">RainbruRPG::Terminal::TerminalApp::cleanup</a>(){
<a name="l00067"></a>00067 
<a name="l00068"></a>00068 }
<a name="l00069"></a>00069 
<a name="l00074"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#49413ceb95fb975b34473091a708c95c">00074</a> <span class="keywordtype">void</span> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#49413ceb95fb975b34473091a708c95c">RainbruRPG::Terminal::TerminalApp::initSignals</a> (<span class="keywordtype">void</span>){
<a name="l00075"></a>00075 <span class="preprocessor">#ifdef SIGTSTP</span>
<a name="l00076"></a>00076 <span class="preprocessor"></span>   SLsignal (SIGTSTP, sigtstp_handler);
<a name="l00077"></a>00077 <span class="preprocessor">#endif</span>
<a name="l00078"></a>00078 <span class="preprocessor"></span><span class="preprocessor">#ifdef SIGINT</span>
<a name="l00079"></a>00079 <span class="preprocessor"></span>   SLsignal (SIGINT, sigint_handler);
<a name="l00080"></a>00080 <span class="preprocessor">#endif</span>
<a name="l00081"></a>00081 <span class="preprocessor"></span><span class="preprocessor">#ifdef SIGWINCH</span>
<a name="l00082"></a>00082 <span class="preprocessor"></span>   SLsignal (SIGWINCH, sigwinch_handler);
<a name="l00083"></a>00083 <span class="preprocessor">#endif</span>
<a name="l00084"></a>00084 <span class="preprocessor"></span>}
<a name="l00085"></a>00085 
<a name="l00091"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#409ea13c6db9b935a3d9af8d43eac2ee">00091</a> <span class="keywordtype">int</span> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#409ea13c6db9b935a3d9af8d43eac2ee">RainbruRPG::Terminal::TerminalApp::initTerminal</a> (<span class="keywordtype">int</span> tty, <span class="keywordtype">int</span> smg){
<a name="l00092"></a>00092    <span class="comment">/* Initialize an error handlee in case of error</span>
<a name="l00093"></a>00093 <span class="comment">    */</span>
<a name="l00094"></a>00094    SLang_Exit_Error_Hook = exit_error_hook;
<a name="l00095"></a>00095 
<a name="l00096"></a>00096    <span class="comment">/* It is wise to block the occurance of display  related signals</span>
<a name="l00097"></a>00097 <span class="comment">    * while we are initializing. </span>
<a name="l00098"></a>00098 <span class="comment">    */</span>
<a name="l00099"></a>00099    SLsig_block_signals ();
<a name="l00100"></a>00100    SLtt_get_terminfo ();
<a name="l00101"></a>00101    
<a name="l00102"></a>00102    <span class="comment">/* SLkp_init assumes that SLtt_get_terminfo has been called. */</span>
<a name="l00103"></a>00103    <span class="keywordflow">if</span> (tty &amp;&amp; (-1 == SLkp_init ())){
<a name="l00104"></a>00104      SLsig_unblock_signals ();
<a name="l00105"></a>00105      <span class="keywordflow">return</span> -1;
<a name="l00106"></a>00106    }
<a name="l00107"></a>00107    
<a name="l00108"></a>00108    <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#49413ceb95fb975b34473091a708c95c">initSignals</a> ();
<a name="l00109"></a>00109    
<a name="l00110"></a>00110    <span class="keywordflow">if</span> (tty) SLang_init_tty (-1, 0, 1);
<a name="l00111"></a>00111 <span class="preprocessor">#ifdef REAL_UNIX_SYSTEM</span>
<a name="l00112"></a>00112 <span class="preprocessor"></span>   <span class="keywordflow">if</span> (tty) SLtty_set_suspend_state (1);
<a name="l00113"></a>00113 <span class="preprocessor">#endif</span>
<a name="l00114"></a>00114 <span class="preprocessor"></span>   <span class="keywordflow">if</span> (smg){
<a name="l00115"></a>00115      <span class="comment">//     (void) SLutf8_enable (-1);</span>
<a name="l00116"></a>00116      
<a name="l00117"></a>00117      <span class="keywordflow">if</span> (-1 == SLsmg_init_smg ()) {
<a name="l00118"></a>00118        SLsig_unblock_signals ();
<a name="l00119"></a>00119        <span class="keywordflow">return</span> -1;
<a name="l00120"></a>00120      }
<a name="l00121"></a>00121    }
<a name="l00122"></a>00122         
<a name="l00123"></a>00123    SLsig_unblock_signals ();
<a name="l00124"></a>00124 
<a name="l00125"></a>00125    <span class="keywordflow">return</span> 0;
<a name="l00126"></a>00126 }
<a name="l00127"></a>00127 
<a name="l00142"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#fb14d17b4a94e7d55e0b850295f45463">00142</a> <span class="keywordtype">void</span> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#fb14d17b4a94e7d55e0b850295f45463">RainbruRPG::Terminal::TerminalApp::initColors</a>(){
<a name="l00143"></a>00143   SLtt_set_color (0, NULL,  <span class="stringliteral">"white"</span>, <span class="stringliteral">"blue"</span> );
<a name="l00144"></a>00144   SLtt_set_color (1, NULL,  <span class="stringliteral">"blue"</span>,  <span class="stringliteral">"lightgray"</span> );
<a name="l00145"></a>00145   SLtt_set_color (2, NULL,  <span class="stringliteral">"black"</span>, <span class="stringliteral">"cyan"</span> );
<a name="l00146"></a>00146   SLtt_set_color (3, NULL,  <span class="stringliteral">"red"</span>,   <span class="stringliteral">"cyan"</span> );
<a name="l00147"></a>00147   SLtt_set_color (4, NULL,  <span class="stringliteral">"white"</span>, <span class="stringliteral">"black"</span> );
<a name="l00148"></a>00148   SLtt_set_color (5, NULL,  <span class="stringliteral">"cyan"</span>,  <span class="stringliteral">"black"</span> );
<a name="l00149"></a>00149   SLtt_set_color (6, NULL,  <span class="stringliteral">"green"</span>, <span class="stringliteral">"blue"</span> );
<a name="l00150"></a>00150   SLtt_set_color (7, NULL,  <span class="stringliteral">"blue"</span>,  <span class="stringliteral">"lightgray"</span> );
<a name="l00151"></a>00151   SLtt_set_color (8, NULL,  <span class="stringliteral">"white"</span>, <span class="stringliteral">"lightgray"</span> );
<a name="l00152"></a>00152   SLtt_set_color (9, NULL,  <span class="stringliteral">"black"</span>, <span class="stringliteral">"lightgray"</span> );
<a name="l00153"></a>00153   SLtt_set_color (10, NULL,  <span class="stringliteral">"white"</span>, <span class="stringliteral">"cyan"</span> );
<a name="l00154"></a>00154 }
<a name="l00155"></a>00155 
<a name="l00159"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#08beded2322b567ae7bb7559438afdf0">00159</a> <span class="keywordtype">void</span> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#08beded2322b567ae7bb7559438afdf0">RainbruRPG::Terminal::TerminalApp::drawMessageBox</a>(){
<a name="l00160"></a>00160   <span class="keywordtype">int</span> row = SLtt_Screen_Rows - 1;
<a name="l00161"></a>00161 
<a name="l00162"></a>00162   SLsmg_gotorc (row, 0);
<a name="l00163"></a>00163   SLsmg_set_color (1);
<a name="l00164"></a>00164   SLsmg_write_string ( this-&gt;message );
<a name="l00165"></a>00165   SLsmg_erase_eol ();
<a name="l00166"></a>00166   SLsmg_set_color (0);
<a name="l00167"></a>00167 
<a name="l00168"></a>00168   <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#e573eb00bf412616dc4f210134053020">drawKeycodeBox</a>();
<a name="l00169"></a>00169 }
<a name="l00170"></a>00170 
<a name="l00175"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#223cbe3a0ace6fa24bc0d2b2ad6b8cb3">00175</a> <span class="keywordtype">int</span> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#223cbe3a0ace6fa24bc0d2b2ad6b8cb3">RainbruRPG::Terminal::TerminalApp::getch</a>(){
<a name="l00176"></a>00176    <span class="keywordtype">int</span> ch;
<a name="l00177"></a>00177    
<a name="l00178"></a>00178    <span class="keywordflow">while</span> (0 == SLang_input_pending (1000))
<a name="l00179"></a>00179      <span class="keywordflow">continue</span>;
<a name="l00180"></a>00180    
<a name="l00181"></a>00181    <span class="comment">//   ch = SLang_getkey ();</span>
<a name="l00182"></a>00182    ch =  SLkp_getkey();
<a name="l00183"></a>00183    <span class="keywordflow">if</span> (ch == 033){                     <span class="comment">/* escape */</span>
<a name="l00184"></a>00184      <span class="keywordflow">if</span> (0 == SLang_input_pending (this-&gt;timeout))
<a name="l00185"></a>00185        <span class="keywordflow">return</span> 033;
<a name="l00186"></a>00186    }
<a name="l00187"></a>00187    SLang_ungetkey (ch);
<a name="l00188"></a>00188   
<a name="l00189"></a>00189    <span class="keywordflow">if</span> (ch==195){
<a name="l00190"></a>00190      <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#8228bb6ef8bb4a6ee15354c787671460">altKeycode</a>=<span class="keyword">true</span>;
<a name="l00191"></a>00191      <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#67d2bff3e3ce6a225e9e935527ef6a23">currentMenu</a>=0;
<a name="l00192"></a>00192      <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#afc1b53fcd7ee896d0c6d2b9022cb0bd">message</a>=<span class="stringliteral">"ALT key pressed"</span>;
<a name="l00193"></a>00193      <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#08beded2322b567ae7bb7559438afdf0">drawMessageBox</a>();
<a name="l00194"></a>00194    }
<a name="l00195"></a>00195 
<a name="l00196"></a>00196    <span class="keywordflow">return</span> SLkp_getkey();
<a name="l00197"></a>00197 }
<a name="l00198"></a>00198 
<a name="l00202"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#0398300d01c37125fc4b2707fa9a2edc">00202</a> <span class="keywordtype">void</span> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#0398300d01c37125fc4b2707fa9a2edc">RainbruRPG::Terminal::TerminalApp::run</a>(){
<a name="l00203"></a>00203   <a class="code" href="structRainbruRPG_1_1Terminal_1_1tShortCut.html">tShortCut</a>* menuSC;
<a name="l00204"></a>00204   <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#2d46a97e99ab18d1c8f4679f2c243a1e">createMenuBarShortcut</a>();
<a name="l00205"></a>00205   <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#026f0876a4b48a742c9e2456e273ac0d">keyHit</a>();
<a name="l00206"></a>00206 }
<a name="l00207"></a>00207 
<a name="l00212"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#7bc67edb6b04492ff834078b72a6e5ea">00212</a> <span class="keywordtype">void</span> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#7bc67edb6b04492ff834078b72a6e5ea">RainbruRPG::Terminal::TerminalApp::setMenubar</a>( 
<a name="l00213"></a>00213                 <a class="code" href="classRainbruRPG_1_1Terminal_1_1MenuBar.html">RainbruRPG::Terminal::MenuBar</a>* m ){
<a name="l00214"></a>00214   this-&gt;<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#bc9a7a57112902fdcf49a9f54b56b2f4">menubar</a>=m;
<a name="l00215"></a>00215 }
<a name="l00216"></a>00216 
<a name="l00221"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#8366fc3b2f2ae0e56d0c4a4f63ea0a49">00221</a> <a class="code" href="classRainbruRPG_1_1Terminal_1_1MenuBar.html">RainbruRPG::Terminal::MenuBar</a>* <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#8366fc3b2f2ae0e56d0c4a4f63ea0a49">RainbruRPG::Terminal::TerminalApp::getMenubar</a>(){
<a name="l00222"></a>00222   <span class="keywordflow">return</span> this-&gt;<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#bc9a7a57112902fdcf49a9f54b56b2f4">menubar</a>;
<a name="l00223"></a>00223 }
<a name="l00224"></a>00224 
<a name="l00230"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#e573eb00bf412616dc4f210134053020">00230</a> <span class="keywordtype">void</span> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#e573eb00bf412616dc4f210134053020">RainbruRPG::Terminal::TerminalApp::drawKeycodeBox</a>(){
<a name="l00231"></a>00231   <span class="keywordtype">int</span> row = SLtt_Screen_Rows - 1;
<a name="l00232"></a>00232   <span class="keywordtype">int</span> col=SLtt_Screen_Cols - <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#7207e77ab6e1af481d4fbe393edb0c5f">keycodeboxWidth</a>;
<a name="l00233"></a>00233 
<a name="l00234"></a>00234   SLsmg_gotorc (row, col-1);
<a name="l00235"></a>00235   SLsmg_set_color (1);
<a name="l00236"></a>00236   SLsmg_draw_vline (1);
<a name="l00237"></a>00237   SLsmg_gotorc (row, col);
<a name="l00238"></a>00238 
<a name="l00239"></a>00239   <span class="keywordflow">if</span> (<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#15b49865fc516977eb15f2ab007b692b">lastKeycode</a>!=-1 &amp;&amp; <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#15b49865fc516977eb15f2ab007b692b">lastKeycode</a>!=195){
<a name="l00240"></a>00240     <span class="keywordflow">if</span> (<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#8228bb6ef8bb4a6ee15354c787671460">altKeycode</a>){
<a name="l00241"></a>00241       SLsmg_printf( <span class="stringliteral">"A+%d"</span>, <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#15b49865fc516977eb15f2ab007b692b">lastKeycode</a> );
<a name="l00242"></a>00242       <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#8228bb6ef8bb4a6ee15354c787671460">altKeycode</a>=<span class="keyword">false</span>;
<a name="l00243"></a>00243     }
<a name="l00244"></a>00244     <span class="keywordflow">else</span>
<a name="l00245"></a>00245       SLsmg_printf( <span class="stringliteral">"  %d"</span>, <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#15b49865fc516977eb15f2ab007b692b">lastKeycode</a> );
<a name="l00246"></a>00246   }
<a name="l00247"></a>00247 
<a name="l00248"></a>00248   SLsmg_erase_eol();
<a name="l00249"></a>00249   SLsmg_set_color(0);
<a name="l00250"></a>00250 }
<a name="l00251"></a>00251 
<a name="l00252"></a>00252 
<a name="l00253"></a>00253 
<a name="l00262"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#a0fe2341db01430b4977d0d8f2d4a17b">00262</a> <span class="keywordtype">void</span> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#a0fe2341db01430b4977d0d8f2d4a17b">RainbruRPG::Terminal::TerminalApp::high</a>(<span class="keywordtype">bool</span> b){
<a name="l00263"></a>00263   <span class="keywordflow">if</span> (b)
<a name="l00264"></a>00264     SLsmg_set_color(3);
<a name="l00265"></a>00265   <span class="keywordflow">else</span>
<a name="l00266"></a>00266     SLsmg_set_color(2);
<a name="l00267"></a>00267 }
<a name="l00268"></a>00268 
<a name="l00276"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#5e130739149d8a2efa4308d36ca3514d">00276</a> <span class="keywordtype">void</span> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#5e130739149d8a2efa4308d36ca3514d">RainbruRPG::Terminal::TerminalApp::drawMenuCaption</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, 
<a name="l00277"></a>00277                                                         string c){
<a name="l00278"></a>00278   <span class="keywordtype">int</span> i;
<a name="l00279"></a>00279   <span class="keywordtype">bool</span> sc=<span class="keyword">false</span>; <span class="comment">//is the next char the shortcut</span>
<a name="l00280"></a>00280 
<a name="l00281"></a>00281   <span class="keywordflow">for</span> (i=0; i&lt;c.size(); i++){
<a name="l00282"></a>00282     <span class="keywordflow">if</span> (c[i]==<span class="charliteral">'&amp;'</span>){
<a name="l00283"></a>00283       sc=<span class="keyword">true</span>;
<a name="l00284"></a>00284     }
<a name="l00285"></a>00285     <span class="keywordflow">else</span>{
<a name="l00286"></a>00286       <span class="keywordflow">if</span> (sc){
<a name="l00287"></a>00287 
<a name="l00288"></a>00288         <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#a0fe2341db01430b4977d0d8f2d4a17b">high</a>( <span class="keyword">true</span> );
<a name="l00289"></a>00289 
<a name="l00290"></a>00290         SLsmg_gotorc (y,x);
<a name="l00291"></a>00291         SLsmg_printf( <span class="stringliteral">"%c"</span>, c[i] );
<a name="l00292"></a>00292        
<a name="l00293"></a>00293         x++;
<a name="l00294"></a>00294         <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#a0fe2341db01430b4977d0d8f2d4a17b">high</a>( <span class="keyword">false</span> );
<a name="l00295"></a>00295 
<a name="l00296"></a>00296         sc=<span class="keyword">false</span>;
<a name="l00297"></a>00297       }
<a name="l00298"></a>00298       <span class="keywordflow">else</span>{
<a name="l00299"></a>00299         SLsmg_set_color (2);
<a name="l00300"></a>00300         SLsmg_gotorc (y,x);
<a name="l00301"></a>00301         SLsmg_printf( <span class="stringliteral">"%c"</span>, c[i] );
<a name="l00302"></a>00302         
<a name="l00303"></a>00303         x++;
<a name="l00304"></a>00304         SLsmg_set_color (0);
<a name="l00305"></a>00305       }
<a name="l00306"></a>00306     }
<a name="l00307"></a>00307   }
<a name="l00308"></a>00308 }
<a name="l00309"></a>00309 
<a name="l00316"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#0c2f9f55949f775e07254c532ae322e9">00316</a> <span class="keywordtype">void</span> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#0c2f9f55949f775e07254c532ae322e9">RainbruRPG::Terminal::TerminalApp::drawEmptyMenuBar</a>(){
<a name="l00317"></a>00317   SLsmg_gotorc(0, 0);
<a name="l00318"></a>00318   SLsmg_set_color(2);
<a name="l00319"></a>00319   SLsmg_erase_eol();
<a name="l00320"></a>00320   SLsmg_set_color(0);
<a name="l00321"></a>00321 }
<a name="l00322"></a>00322 
<a name="l00330"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#d7a7e135c5345f35045500214b7e03bf">00330</a> <span class="keywordtype">void</span> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#d7a7e135c5345f35045500214b7e03bf">RainbruRPG::Terminal::TerminalApp::drawSelectedMenuCaption</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, 
<a name="l00331"></a>00331                                                                 string c){
<a name="l00332"></a>00332   <span class="keywordtype">int</span> i;
<a name="l00333"></a>00333   <span class="keywordtype">bool</span> sc=<span class="keyword">false</span>; <span class="comment">//is the next char the shortcut</span>
<a name="l00334"></a>00334 
<a name="l00335"></a>00335   <span class="keywordflow">for</span> (i=0; i&lt;c.size(); i++){
<a name="l00336"></a>00336     <span class="keywordflow">if</span> (c[i]==<span class="charliteral">'&amp;'</span>){
<a name="l00337"></a>00337       sc=<span class="keyword">true</span>;
<a name="l00338"></a>00338     }
<a name="l00339"></a>00339     <span class="keywordflow">else</span>{
<a name="l00340"></a>00340       <span class="keywordflow">if</span> (sc){
<a name="l00341"></a>00341 
<a name="l00342"></a>00342         SLsmg_set_color (5);
<a name="l00343"></a>00343 
<a name="l00344"></a>00344         SLsmg_gotorc (y,x);
<a name="l00345"></a>00345         SLsmg_printf( <span class="stringliteral">"%c"</span>, c[i] );
<a name="l00346"></a>00346        
<a name="l00347"></a>00347         x++;
<a name="l00348"></a>00348         SLsmg_set_color (4);
<a name="l00349"></a>00349 
<a name="l00350"></a>00350         sc=<span class="keyword">false</span>;
<a name="l00351"></a>00351       }
<a name="l00352"></a>00352       <span class="keywordflow">else</span>{
<a name="l00353"></a>00353         SLsmg_set_color (4);
<a name="l00354"></a>00354         SLsmg_gotorc (y,x);
<a name="l00355"></a>00355         SLsmg_printf( <span class="stringliteral">"%c"</span>, c[i] );
<a name="l00356"></a>00356         
<a name="l00357"></a>00357         x++;
<a name="l00358"></a>00358         SLsmg_set_color (0);
<a name="l00359"></a>00359       }
<a name="l00360"></a>00360     }
<a name="l00361"></a>00361   }
<a name="l00362"></a>00362 }
<a name="l00363"></a>00363 
<a name="l00364"></a>00364 
<a name="l00368"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#2d46a97e99ab18d1c8f4679f2c243a1e">00368</a> <span class="keywordtype">void</span> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#2d46a97e99ab18d1c8f4679f2c243a1e">RainbruRPG::Terminal::TerminalApp::createMenuBarShortcut</a>(){
<a name="l00369"></a>00369 
<a name="l00370"></a>00370   tMenuList::const_iterator iter;
<a name="l00371"></a>00371   string s, te;
<a name="l00372"></a>00372   <span class="keywordtype">int</span> i,y=5, w=12, xpos=0;
<a name="l00373"></a>00373   <span class="keywordtype">bool</span> sc=<span class="keyword">false</span>;
<a name="l00374"></a>00374 
<a name="l00375"></a>00375   <a class="code" href="namespaceRainbruRPG_1_1Terminal.html#c9aec3b26141a5119542e0495d5fa9df">tMenuList</a>* ml=this-&gt;<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#bc9a7a57112902fdcf49a9f54b56b2f4">menubar</a>-&gt;<a class="code" href="classRainbruRPG_1_1Terminal_1_1MenuBar.html#cdc69dccfc0796e56861ef0ef6655608">getMenuList</a>();
<a name="l00376"></a>00376 
<a name="l00377"></a>00377   <span class="comment">// Iterate through list</span>
<a name="l00378"></a>00378   <span class="keywordflow">for</span> (iter=ml-&gt;begin(); iter != ml-&gt;end(); iter++)  {
<a name="l00379"></a>00379     
<a name="l00380"></a>00380     s=(*iter)-&gt;getName();
<a name="l00381"></a>00381 
<a name="l00382"></a>00382     <span class="comment">// Get the '&amp;' char</span>
<a name="l00383"></a>00383     <span class="keywordflow">for</span> (i=0; i&lt;s.size(); i++){
<a name="l00384"></a>00384       <span class="keywordflow">if</span> (s[i]==<span class="charliteral">'&amp;'</span>){
<a name="l00385"></a>00385         sc=<span class="keyword">true</span>;
<a name="l00386"></a>00386       }
<a name="l00387"></a>00387       <span class="keywordflow">else</span>{
<a name="l00388"></a>00388         <span class="keywordflow">if</span> (sc){
<a name="l00389"></a>00389           <span class="comment">// Add the shortcut :</span>
<a name="l00390"></a>00390           <a class="code" href="structRainbruRPG_1_1Terminal_1_1tShortCut.html">tShortCut</a>* t;
<a name="l00391"></a>00391           t=<span class="keyword">new</span> <a class="code" href="structRainbruRPG_1_1Terminal_1_1tShortCut.html">tShortCut</a>;
<a name="l00392"></a>00392           <span class="comment">// Avoir la minuscule</span>
<a name="l00393"></a>00393           te=s;
<a name="l00394"></a>00394 
<a name="l00395"></a>00395           <span class="comment">// A boost algorithm</span>
<a name="l00396"></a>00396           to_lower(te);
<a name="l00397"></a>00397 
<a name="l00398"></a>00398           t-&gt;<a class="code" href="structRainbruRPG_1_1Terminal_1_1tShortCut.html#27806403e78735c6a7b1cca4fd9d249d">sc</a>=te[i];
<a name="l00399"></a>00399 
<a name="l00401"></a>00401           t-&gt;<a class="code" href="structRainbruRPG_1_1Terminal_1_1tShortCut.html#fc1cb3d45b1ab2489e5693ea7564299f">xPos</a>=xpos;
<a name="l00402"></a>00402           xpos+=te.size();
<a name="l00403"></a>00403           xpos++;
<a name="l00404"></a>00404         
<a name="l00405"></a>00405           t-&gt;<a class="code" href="structRainbruRPG_1_1Terminal_1_1tShortCut.html#4cfabfa79b65e6970107cef6f2dabf53">menu</a>=(*iter);
<a name="l00406"></a>00406 
<a name="l00407"></a>00407           <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#137d35e5431dce5f2b2dbb48b0f700f4">currentShortcut</a>.push_back(t);
<a name="l00408"></a>00408           sc=<span class="keyword">false</span>;
<a name="l00409"></a>00409         }
<a name="l00410"></a>00410       }
<a name="l00411"></a>00411     }
<a name="l00412"></a>00412   }
<a name="l00413"></a>00413 }
<a name="l00414"></a>00414 
<a name="l00418"></a>00418 <a class="code" href="structRainbruRPG_1_1Terminal_1_1tShortCut.html">RainbruRPG::Terminal::tShortCut</a>* 
<a name="l00419"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#37c61204a934e4c06e22536842052739">00419</a> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#37c61204a934e4c06e22536842052739">RainbruRPG::Terminal::TerminalApp::getShortcutFromIndex</a>(<span class="keywordtype">int</span> o){
<a name="l00420"></a>00420 
<a name="l00421"></a>00421   tShortcutList::const_iterator iter;
<a name="l00422"></a>00422   <a class="code" href="structRainbruRPG_1_1Terminal_1_1tShortCut.html">tShortCut</a>* ret=0;
<a name="l00423"></a>00423   <span class="keywordtype">int</span> i=0;
<a name="l00424"></a>00424 
<a name="l00425"></a>00425   <span class="keywordflow">for</span> (iter=<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#137d35e5431dce5f2b2dbb48b0f700f4">currentShortcut</a>.begin(); iter != <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#137d35e5431dce5f2b2dbb48b0f700f4">currentShortcut</a>.end(); iter++){
<a name="l00426"></a>00426     <span class="keywordflow">if</span> (i==o)
<a name="l00427"></a>00427       ret=(*iter);
<a name="l00428"></a>00428 
<a name="l00429"></a>00429     i++;
<a name="l00430"></a>00430   }
<a name="l00431"></a>00431   <span class="keywordflow">return</span> ret;
<a name="l00432"></a>00432 }
<a name="l00433"></a>00433 
<a name="l00437"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#32164e116fba74b0d5522bc0e7a3c4e6">00437</a> <span class="keywordtype">void</span> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#32164e116fba74b0d5522bc0e7a3c4e6">RainbruRPG::Terminal::TerminalApp::drawMenuBar</a>(){
<a name="l00438"></a>00438   tMenuList::const_iterator iter;
<a name="l00439"></a>00439   string s;
<a name="l00440"></a>00440   <span class="keywordtype">int</span> x=0;
<a name="l00441"></a>00441   <span class="comment">// If menu==currentMenu, menu is selected</span>
<a name="l00442"></a>00442   <span class="keywordtype">int</span> menu=0;
<a name="l00443"></a>00443   <span class="keywordtype">int</span> col=SLtt_Screen_Cols;
<a name="l00444"></a>00444 
<a name="l00445"></a>00445   SLsmg_set_color (2);
<a name="l00446"></a>00446   SLsmg_gotorc (x, col);
<a name="l00447"></a>00447 
<a name="l00448"></a>00448   <a class="code" href="namespaceRainbruRPG_1_1Terminal.html#c9aec3b26141a5119542e0495d5fa9df">tMenuList</a>* ml=this-&gt;<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#bc9a7a57112902fdcf49a9f54b56b2f4">menubar</a>-&gt;<a class="code" href="classRainbruRPG_1_1Terminal_1_1MenuBar.html#cdc69dccfc0796e56861ef0ef6655608">getMenuList</a>();
<a name="l00449"></a>00449 
<a name="l00450"></a>00450   <span class="comment">// Iterate through list and output each element.</span>
<a name="l00451"></a>00451   <span class="keywordflow">for</span> (iter=ml-&gt;begin(); iter != ml-&gt;end(); iter++)  {
<a name="l00452"></a>00452     
<a name="l00453"></a>00453     s=(*iter)-&gt;getName();
<a name="l00454"></a>00454 
<a name="l00455"></a>00455     <span class="keywordflow">if</span> (<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#4f5d186ece65972b2a504ac4ce4640fa">inMenu</a> &amp; menu==<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#67d2bff3e3ce6a225e9e935527ef6a23">currentMenu</a> &amp; !<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#cbbf815755e2076627f38bbd1b8fec54">inSubMenu</a>)
<a name="l00456"></a>00456       <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#d7a7e135c5345f35045500214b7e03bf">drawSelectedMenuCaption</a>(x, 0, s);
<a name="l00457"></a>00457     <span class="keywordflow">else</span>
<a name="l00458"></a>00458       <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#5e130739149d8a2efa4308d36ca3514d">drawMenuCaption</a>(x, 0, s);
<a name="l00459"></a>00459 
<a name="l00460"></a>00460     x+=s.size();
<a name="l00461"></a>00461     x++;
<a name="l00462"></a>00462     menu++;
<a name="l00463"></a>00463   }
<a name="l00464"></a>00464   SLsmg_refresh();
<a name="l00465"></a>00465  
<a name="l00466"></a>00466 }
<a name="l00467"></a>00467 
<a name="l00471"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#5a2138513eea8f43ecb1a192bf689f3c">00471</a> <span class="keywordtype">void</span> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#5a2138513eea8f43ecb1a192bf689f3c">RainbruRPG::Terminal::TerminalApp::draw</a>(){
<a name="l00472"></a>00472   <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#1014b88c1391d156c0341821c5f5deb5">eraseScreen</a>();
<a name="l00473"></a>00473   <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#08beded2322b567ae7bb7559438afdf0">drawMessageBox</a>();
<a name="l00474"></a>00474   <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#0c2f9f55949f775e07254c532ae322e9">drawEmptyMenuBar</a>();
<a name="l00475"></a>00475 
<a name="l00476"></a>00476   <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#87d01870846842c896ec28f74c61ba53">drawWindows</a>();
<a name="l00477"></a>00477 
<a name="l00478"></a>00478 
<a name="l00479"></a>00479   <span class="keywordflow">if</span> (<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#bc9a7a57112902fdcf49a9f54b56b2f4">menubar</a>) <span class="comment">// Segfault if not</span>
<a name="l00480"></a>00480     <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#32164e116fba74b0d5522bc0e7a3c4e6">drawMenuBar</a>();
<a name="l00481"></a>00481 
<a name="l00482"></a>00482 
<a name="l00483"></a>00483   <span class="keywordflow">if</span> (<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#cbbf815755e2076627f38bbd1b8fec54">inSubMenu</a>)
<a name="l00484"></a>00484     <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#37798da99a92b344cebffa95851aa247">drawMenu</a>(<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#37c61204a934e4c06e22536842052739">getShortcutFromIndex</a>(<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#67d2bff3e3ce6a225e9e935527ef6a23">currentMenu</a>));
<a name="l00485"></a>00485 
<a name="l00486"></a>00486 
<a name="l00487"></a>00487   <span class="keywordflow">if</span> (<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#a59f7faef2143ebeae919adb22d21b65">showingDialog</a>)
<a name="l00488"></a>00488     <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#73ab8b9515eebbfcef40be01233e59d4">dialog</a>-&gt;<a class="code" href="classRainbruRPG_1_1Terminal_1_1Dialog.html#7571da4ae1706174ab70001d4fe03f62">draw</a>();
<a name="l00489"></a>00489 }
<a name="l00490"></a>00490 
<a name="l00494"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#acd0e649b6e3d1c5d254ce0a2d465781">00494</a> <span class="keywordtype">void</span> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#acd0e649b6e3d1c5d254ce0a2d465781">RainbruRPG::Terminal::TerminalApp::showMessage</a>(<span class="keywordtype">char</span>* m){
<a name="l00495"></a>00495   <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#afc1b53fcd7ee896d0c6d2b9022cb0bd">message</a>=m;
<a name="l00496"></a>00496   <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#5a2138513eea8f43ecb1a192bf689f3c">draw</a>();
<a name="l00497"></a>00497 }
<a name="l00498"></a>00498  
<a name="l00502"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#1014b88c1391d156c0341821c5f5deb5">00502</a> <span class="keywordtype">void</span> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#1014b88c1391d156c0341821c5f5deb5">RainbruRPG::Terminal::TerminalApp::eraseScreen</a>(){
<a name="l00503"></a>00503   SLsmg_set_color(0);
<a name="l00504"></a>00504   SLsmg_gotorc (1,0);
<a name="l00505"></a>00505   SLsmg_erase_eos();
<a name="l00506"></a>00506 }
<a name="l00507"></a>00507 
<a name="l00518"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#ec950fda928b28c37e1d51a5cc29bde9">00518</a> <span class="keywordtype">void</span> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#ec950fda928b28c37e1d51a5cc29bde9">RainbruRPG::Terminal::TerminalApp::drawItemCaption</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, 
<a name="l00519"></a>00519                                                         string c ,
<a name="l00520"></a>00520                                                         <span class="keywordtype">bool</span> hl){
<a name="l00521"></a>00521 
<a name="l00522"></a>00522   <span class="keywordtype">int</span> i, co, co2;
<a name="l00523"></a>00523   <span class="keywordtype">bool</span> sc=<span class="keyword">false</span>; <span class="comment">//is the next char the shortcut</span>
<a name="l00524"></a>00524 
<a name="l00525"></a>00525   <span class="comment">// Set the drawing color</span>
<a name="l00526"></a>00526   <span class="keywordflow">if</span> (hl){
<a name="l00527"></a>00527     co=4;
<a name="l00528"></a>00528     co2=5;
<a name="l00529"></a>00529 
<a name="l00530"></a>00530     <span class="comment">// Draw the black bar</span>
<a name="l00531"></a>00531     <a class="code" href="structRainbruRPG_1_1Terminal_1_1tShortCut.html">tShortCut</a>* menuSC;
<a name="l00532"></a>00532     menuSC= <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#37c61204a934e4c06e22536842052739">getShortcutFromIndex</a>(<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#67d2bff3e3ce6a225e9e935527ef6a23">currentMenu</a>);
<a name="l00533"></a>00533 
<a name="l00534"></a>00534     SLsmg_set_color_in_region (5, y, x, 1, menuSC-&gt;<a class="code" href="structRainbruRPG_1_1Terminal_1_1tShortCut.html#4cfabfa79b65e6970107cef6f2dabf53">menu</a>-&gt;<a class="code" href="classRainbruRPG_1_1Terminal_1_1Menu.html#3313c951f865d2dd0d1ff7d8d6e49f0d">getWidth</a>());
<a name="l00535"></a>00535   }
<a name="l00536"></a>00536   <span class="keywordflow">else</span>{
<a name="l00537"></a>00537     co=2;
<a name="l00538"></a>00538     co2=3;
<a name="l00539"></a>00539   }
<a name="l00540"></a>00540 
<a name="l00541"></a>00541   <span class="keywordflow">for</span> (i=0; i&lt;c.size(); i++){
<a name="l00542"></a>00542     <span class="keywordflow">if</span> (c[i]==<span class="charliteral">'&amp;'</span>){
<a name="l00543"></a>00543       sc=<span class="keyword">true</span>;
<a name="l00544"></a>00544     }
<a name="l00545"></a>00545     <span class="keywordflow">else</span>{
<a name="l00546"></a>00546       <span class="keywordflow">if</span> (sc){
<a name="l00547"></a>00547         SLsmg_set_color(co2);
<a name="l00548"></a>00548         SLsmg_gotorc (y,x);
<a name="l00549"></a>00549         SLsmg_printf( <span class="stringliteral">"%c"</span>, c[i] );
<a name="l00550"></a>00550         SLsmg_set_color(0);
<a name="l00551"></a>00551         x++;
<a name="l00552"></a>00552         <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#a0fe2341db01430b4977d0d8f2d4a17b">high</a>( <span class="keyword">false</span> );
<a name="l00553"></a>00553 
<a name="l00554"></a>00554         sc=<span class="keyword">false</span>;
<a name="l00555"></a>00555       }
<a name="l00556"></a>00556       <span class="keywordflow">else</span>{
<a name="l00557"></a>00557 
<a name="l00558"></a>00558         SLsmg_set_color (co);
<a name="l00559"></a>00559 
<a name="l00560"></a>00560         SLsmg_gotorc (y,x);
<a name="l00561"></a>00561         SLsmg_printf( <span class="stringliteral">"%c"</span>, c[i] );
<a name="l00562"></a>00562 
<a name="l00563"></a>00563         x++;
<a name="l00564"></a>00564         SLsmg_set_color (0);
<a name="l00565"></a>00565       }
<a name="l00566"></a>00566     }
<a name="l00567"></a>00567   }
<a name="l00568"></a>00568 }
<a name="l00569"></a>00569 
<a name="l00576"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#37798da99a92b344cebffa95851aa247">00576</a> <span class="keywordtype">void</span> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#37798da99a92b344cebffa95851aa247">RainbruRPG::Terminal::TerminalApp::drawMenu</a>( <a class="code" href="structRainbruRPG_1_1Terminal_1_1tShortCut.html">tShortCut</a>* s ){
<a name="l00577"></a>00577   tMenuItemList::const_iterator iter;
<a name="l00578"></a>00578   string s2;
<a name="l00579"></a>00579   <span class="keywordtype">int</span> x=2, y=2;
<a name="l00580"></a>00580   <span class="comment">// Set to true if the the next item has to de highlighted</span>
<a name="l00581"></a>00581   <span class="comment">// Then passed to drawItemCaption</span>
<a name="l00582"></a>00582   <span class="keywordtype">bool</span> hl=<span class="keyword">false</span>; 
<a name="l00583"></a>00583 
<a name="l00584"></a>00584   <span class="comment">// Is the menu is bigger than the screen</span>
<a name="l00585"></a>00585   <span class="keywordtype">bool</span> bigOne=<span class="keyword">false</span>;
<a name="l00586"></a>00586 
<a name="l00587"></a>00587   <span class="comment">// If the menu is taller</span>
<a name="l00588"></a>00588   <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structRainbruRPG_1_1Terminal_1_1tShortCut.html#4cfabfa79b65e6970107cef6f2dabf53">menu</a>-&gt;<a class="code" href="classRainbruRPG_1_1Terminal_1_1Menu.html#c35c6bf4977977e34c80e44de10f84d6">getHeight</a>()+3&gt;SLtt_Screen_Rows)
<a name="l00589"></a>00589     bigOne=<span class="keyword">true</span>;
<a name="l00590"></a>00590   
<a name="l00591"></a>00591 
<a name="l00592"></a>00592   <span class="comment">// Draws the background of the menu</span>
<a name="l00593"></a>00593   SLsmg_set_color_in_region (2, 1, s-&gt;<a class="code" href="structRainbruRPG_1_1Terminal_1_1tShortCut.html#fc1cb3d45b1ab2489e5693ea7564299f">xPos</a>, s-&gt;<a class="code" href="structRainbruRPG_1_1Terminal_1_1tShortCut.html#4cfabfa79b65e6970107cef6f2dabf53">menu</a>-&gt;<a class="code" href="classRainbruRPG_1_1Terminal_1_1Menu.html#c35c6bf4977977e34c80e44de10f84d6">getHeight</a>()+2,  
<a name="l00594"></a>00594                    s-&gt;<a class="code" href="structRainbruRPG_1_1Terminal_1_1tShortCut.html#4cfabfa79b65e6970107cef6f2dabf53">menu</a>-&gt;<a class="code" href="classRainbruRPG_1_1Terminal_1_1Menu.html#3313c951f865d2dd0d1ff7d8d6e49f0d">getWidth</a>()+4);
<a name="l00595"></a>00595 
<a name="l00596"></a>00596   SLsmg_set_color (2);
<a name="l00597"></a>00597 
<a name="l00598"></a>00598   <span class="comment">// Draw the box</span>
<a name="l00599"></a>00599   SLsmg_draw_box ( 1, s-&gt;<a class="code" href="structRainbruRPG_1_1Terminal_1_1tShortCut.html#fc1cb3d45b1ab2489e5693ea7564299f">xPos</a>, s-&gt;<a class="code" href="structRainbruRPG_1_1Terminal_1_1tShortCut.html#4cfabfa79b65e6970107cef6f2dabf53">menu</a>-&gt;<a class="code" href="classRainbruRPG_1_1Terminal_1_1Menu.html#c35c6bf4977977e34c80e44de10f84d6">getHeight</a>()+2,  
<a name="l00600"></a>00600                    s-&gt;<a class="code" href="structRainbruRPG_1_1Terminal_1_1tShortCut.html#4cfabfa79b65e6970107cef6f2dabf53">menu</a>-&gt;<a class="code" href="classRainbruRPG_1_1Terminal_1_1Menu.html#3313c951f865d2dd0d1ff7d8d6e49f0d">getWidth</a>()+4);
<a name="l00601"></a>00601   SLsmg_refresh ();
<a name="l00602"></a>00602   
<a name="l00603"></a>00603   <span class="comment">// SLsmg_gotorc (x, col);</span>
<a name="l00604"></a>00604 
<a name="l00605"></a>00605   <span class="comment">// Draw menu items</span>
<a name="l00606"></a>00606   <a class="code" href="namespaceRainbruRPG_1_1Terminal.html#19c36d6cc4cb5f88b5e8dab970e8d996">tMenuItemList</a>* ml=s-&gt;<a class="code" href="structRainbruRPG_1_1Terminal_1_1tShortCut.html#4cfabfa79b65e6970107cef6f2dabf53">menu</a>-&gt;<a class="code" href="classRainbruRPG_1_1Terminal_1_1Menu.html#be8460e6e0bdcf4d60d7e15882ac6a6b">getItemList</a>();
<a name="l00607"></a>00607 
<a name="l00608"></a>00608   <span class="comment">// Iterate through list and output each element.</span>
<a name="l00609"></a>00609   <span class="keywordflow">for</span> (iter=ml-&gt;begin(); iter != ml-&gt;end(); iter++)  {
<a name="l00610"></a>00610     
<a name="l00611"></a>00611     s2=(*iter)-&gt;getName();
<a name="l00612"></a>00612 
<a name="l00613"></a>00613     <span class="keywordflow">if</span> (<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#c77234bd90dbeb530f150b02c026a6fc">currentSubMenu</a>==y-2)
<a name="l00614"></a>00614       hl=<span class="keyword">true</span>;
<a name="l00615"></a>00615     <span class="keywordflow">else</span>
<a name="l00616"></a>00616       hl=<span class="keyword">false</span>;
<a name="l00617"></a>00617     <span class="keywordflow">if</span> (bigOne &amp; (y&gt;SLtt_Screen_Rows-1)){
<a name="l00618"></a>00618       <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#a9f148899c70a55e678f840fe844e34b">drawBiggerMenuIndicatorBotton</a>( s-&gt;<a class="code" href="structRainbruRPG_1_1Terminal_1_1tShortCut.html#fc1cb3d45b1ab2489e5693ea7564299f">xPos</a>+1 );
<a name="l00619"></a>00619     }
<a name="l00620"></a>00620     <span class="keywordflow">else</span>{
<a name="l00621"></a>00621       <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#ec950fda928b28c37e1d51a5cc29bde9">drawItemCaption</a>( s-&gt;<a class="code" href="structRainbruRPG_1_1Terminal_1_1tShortCut.html#fc1cb3d45b1ab2489e5693ea7564299f">xPos</a>+2, y, s2, hl );
<a name="l00622"></a>00622       y++;
<a name="l00623"></a>00623     }
<a name="l00624"></a>00624   }
<a name="l00625"></a>00625 }
<a name="l00626"></a>00626 
<a name="l00630"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#a9f148899c70a55e678f840fe844e34b">00630</a> <span class="keywordtype">void</span> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#a9f148899c70a55e678f840fe844e34b">RainbruRPG::Terminal::TerminalApp::drawBiggerMenuIndicatorBotton</a>(<span class="keywordtype">int</span> x){
<a name="l00631"></a>00631   <span class="keywordtype">int</span> y=SLtt_Screen_Rows-1;
<a name="l00632"></a>00632 
<a name="l00633"></a>00633   SLsmg_gotorc (y,x);
<a name="l00634"></a>00634   SLsmg_write_char( SLSMG_DARROW_CHAR );
<a name="l00635"></a>00635 }
<a name="l00636"></a>00636 
<a name="l00640"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#4bf42c49a9674f70c29e1e2b55651ec0">00640</a> <span class="keywordtype">void</span> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#4bf42c49a9674f70c29e1e2b55651ec0">RainbruRPG::Terminal::TerminalApp::actionMenu</a>(){
<a name="l00641"></a>00641   <a class="code" href="structRainbruRPG_1_1Terminal_1_1tShortCut.html">tShortCut</a>* s=<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#37c61204a934e4c06e22536842052739">getShortcutFromIndex</a>( <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#67d2bff3e3ce6a225e9e935527ef6a23">currentMenu</a> );
<a name="l00642"></a>00642 
<a name="l00643"></a>00643   <span class="comment">// Get the right menuItem instance</span>
<a name="l00644"></a>00644   tMenuItemList::const_iterator iter;
<a name="l00645"></a>00645 
<a name="l00646"></a>00646   <span class="keywordtype">int</span> y=0, ret=0;
<a name="l00647"></a>00647 
<a name="l00648"></a>00648   <span class="comment">// Set to true if the the next item has to de highlighted</span>
<a name="l00649"></a>00649   <span class="comment">// Then passed to drawItemCaption</span>
<a name="l00650"></a>00650   <span class="keywordtype">bool</span> hl=<span class="keyword">false</span>; 
<a name="l00651"></a>00651 
<a name="l00652"></a>00652   <span class="comment">// Is the menu is bigger than the screen</span>
<a name="l00653"></a>00653   <span class="keywordtype">bool</span> bigOne=<span class="keyword">false</span>;
<a name="l00654"></a>00654 
<a name="l00655"></a>00655   <span class="comment">// If the menu is taller</span>
<a name="l00656"></a>00656   <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structRainbruRPG_1_1Terminal_1_1tShortCut.html#4cfabfa79b65e6970107cef6f2dabf53">menu</a>-&gt;<a class="code" href="classRainbruRPG_1_1Terminal_1_1Menu.html#c35c6bf4977977e34c80e44de10f84d6">getHeight</a>()+3&gt;SLtt_Screen_Rows){
<a name="l00657"></a>00657     bigOne=<span class="keyword">true</span>;
<a name="l00658"></a>00658   }
<a name="l00659"></a>00659 
<a name="l00660"></a>00660   <span class="comment">// Draws the background of the menu</span>
<a name="l00661"></a>00661   SLsmg_set_color_in_region (2, 1, s-&gt;<a class="code" href="structRainbruRPG_1_1Terminal_1_1tShortCut.html#fc1cb3d45b1ab2489e5693ea7564299f">xPos</a>, s-&gt;<a class="code" href="structRainbruRPG_1_1Terminal_1_1tShortCut.html#4cfabfa79b65e6970107cef6f2dabf53">menu</a>-&gt;<a class="code" href="classRainbruRPG_1_1Terminal_1_1Menu.html#c35c6bf4977977e34c80e44de10f84d6">getHeight</a>()+2,  
<a name="l00662"></a>00662                    s-&gt;<a class="code" href="structRainbruRPG_1_1Terminal_1_1tShortCut.html#4cfabfa79b65e6970107cef6f2dabf53">menu</a>-&gt;<a class="code" href="classRainbruRPG_1_1Terminal_1_1Menu.html#3313c951f865d2dd0d1ff7d8d6e49f0d">getWidth</a>()+4);
<a name="l00663"></a>00663 
<a name="l00664"></a>00664   SLsmg_set_color (2);
<a name="l00665"></a>00665 
<a name="l00666"></a>00666   <span class="comment">// Draw the box</span>
<a name="l00667"></a>00667   SLsmg_draw_box ( 1, s-&gt;<a class="code" href="structRainbruRPG_1_1Terminal_1_1tShortCut.html#fc1cb3d45b1ab2489e5693ea7564299f">xPos</a>, s-&gt;<a class="code" href="structRainbruRPG_1_1Terminal_1_1tShortCut.html#4cfabfa79b65e6970107cef6f2dabf53">menu</a>-&gt;<a class="code" href="classRainbruRPG_1_1Terminal_1_1Menu.html#c35c6bf4977977e34c80e44de10f84d6">getHeight</a>()+2,  
<a name="l00668"></a>00668                    s-&gt;<a class="code" href="structRainbruRPG_1_1Terminal_1_1tShortCut.html#4cfabfa79b65e6970107cef6f2dabf53">menu</a>-&gt;<a class="code" href="classRainbruRPG_1_1Terminal_1_1Menu.html#3313c951f865d2dd0d1ff7d8d6e49f0d">getWidth</a>()+4);
<a name="l00669"></a>00669   SLsmg_refresh ();
<a name="l00670"></a>00670   
<a name="l00671"></a>00671   <span class="comment">// SLsmg_gotorc (x, col);</span>
<a name="l00672"></a>00672 
<a name="l00673"></a>00673   <span class="comment">// Draw menu items</span>
<a name="l00674"></a>00674   <a class="code" href="namespaceRainbruRPG_1_1Terminal.html#19c36d6cc4cb5f88b5e8dab970e8d996">tMenuItemList</a>* ml=s-&gt;<a class="code" href="structRainbruRPG_1_1Terminal_1_1tShortCut.html#4cfabfa79b65e6970107cef6f2dabf53">menu</a>-&gt;<a class="code" href="classRainbruRPG_1_1Terminal_1_1Menu.html#be8460e6e0bdcf4d60d7e15882ac6a6b">getItemList</a>();
<a name="l00675"></a>00675 
<a name="l00676"></a>00676   <span class="comment">// Iterate through list and fire the action</span>
<a name="l00677"></a>00677   <span class="keywordflow">for</span> (iter=ml-&gt;begin(); iter != ml-&gt;end(); iter++)  {
<a name="l00678"></a>00678     
<a name="l00679"></a>00679     <span class="keywordflow">if</span> (y==<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#c77234bd90dbeb530f150b02c026a6fc">currentSubMenu</a>){
<a name="l00680"></a>00680       ret=(*iter)-&gt;fireAction();
<a name="l00681"></a>00681       <span class="keywordflow">if</span> (ret==-1)
<a name="l00682"></a>00682         <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#acd0e649b6e3d1c5d254ce0a2d465781">showMessage</a>(<span class="stringliteral">"No action has been set to this menu item!!!"</span>);
<a name="l00683"></a>00683     }
<a name="l00684"></a>00684     y++;
<a name="l00685"></a>00685   }
<a name="l00686"></a>00686 }
<a name="l00687"></a>00687 
<a name="l00691"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#6d194a922178f08570980f966cdcec42">00691</a> <span class="keywordtype">void</span> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#6d194a922178f08570980f966cdcec42">RainbruRPG::Terminal::TerminalApp::addWindow</a>(<a class="code" href="classRainbruRPG_1_1Terminal_1_1Window.html">Window</a>* w){
<a name="l00692"></a>00692   <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#e01b3152ec3e04427b0ba95cafb05bc4">windowList</a>.push_back( w );
<a name="l00693"></a>00693   w-&gt;<a class="code" href="classRainbruRPG_1_1Terminal_1_1Window.html#b347b60fabb7c4d539bca4f6ebdf0642">setSelected</a>( <span class="keyword">true</span> );
<a name="l00694"></a>00694 }
<a name="l00695"></a>00695 
<a name="l00699"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#87d01870846842c896ec28f74c61ba53">00699</a> <span class="keywordtype">void</span> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#87d01870846842c896ec28f74c61ba53">RainbruRPG::Terminal::TerminalApp::drawWindows</a>(){
<a name="l00700"></a>00700   tWindowList::const_iterator iter;
<a name="l00701"></a>00701 
<a name="l00702"></a>00702   <span class="comment">// Iterate through list and fire the action</span>
<a name="l00703"></a>00703   <span class="keywordflow">for</span> (iter=<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#e01b3152ec3e04427b0ba95cafb05bc4">windowList</a>.begin(); iter != <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#e01b3152ec3e04427b0ba95cafb05bc4">windowList</a>.end(); iter++)  {
<a name="l00704"></a>00704     (*iter)-&gt;draw();
<a name="l00705"></a>00705   }
<a name="l00706"></a>00706 }
<a name="l00707"></a>00707 
<a name="l00712"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#4ab64bb5e4aa158f8dea452352455235">00712</a> <span class="keywordtype">void</span> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#6d194a922178f08570980f966cdcec42">RainbruRPG::Terminal::TerminalApp::addWindow</a>(<a class="code" href="classRainbruRPG_1_1Terminal_1_1Window.html">Window</a>* w, <span class="keywordtype">bool</span> b){
<a name="l00713"></a>00713   this-&gt;<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#6d194a922178f08570980f966cdcec42">addWindow</a>( w );
<a name="l00714"></a>00714   <span class="keywordflow">if</span> (b)
<a name="l00715"></a>00715     w-&gt;<a class="code" href="classRainbruRPG_1_1Terminal_1_1Window.html#84380871df882e97fd46e25d979f80fa">setState</a>( <a class="code" href="namespaceRainbruRPG_1_1Terminal.html#fd141a923bf26b03853540d4d54879ce41205b20e5353d43510393ab2ad6244b">MAXIMIZED</a> );
<a name="l00716"></a>00716 }
<a name="l00717"></a>00717 
<a name="l00723"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#026f0876a4b48a742c9e2456e273ac0d">00723</a> <span class="keywordtype">void</span> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#026f0876a4b48a742c9e2456e273ac0d">RainbruRPG::Terminal::TerminalApp::keyHit</a>(){
<a name="l00724"></a>00724   <span class="keywordtype">int</span> ch;
<a name="l00725"></a>00725 
<a name="l00726"></a>00726   <span class="keywordflow">while</span> (<span class="charliteral">'q'</span> != (ch = <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#223cbe3a0ace6fa24bc0d2b2ad6b8cb3">getch</a> ()))     {
<a name="l00727"></a>00727     <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#15b49865fc516977eb15f2ab007b692b">lastKeycode</a>=ch;
<a name="l00728"></a>00728     <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#e573eb00bf412616dc4f210134053020">drawKeycodeBox</a>();
<a name="l00729"></a>00729 
<a name="l00730"></a>00730     <span class="keywordflow">if</span> (<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#a59f7faef2143ebeae919adb22d21b65">showingDialog</a>){
<a name="l00731"></a>00731       <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#73ab8b9515eebbfcef40be01233e59d4">dialog</a>-&gt;<a class="code" href="classRainbruRPG_1_1Terminal_1_1Dialog.html#ac4fa05fee53c7493902d321b7e751ef">receiveKeyEvent</a>( ch );
<a name="l00732"></a>00732     }
<a name="l00733"></a>00733     <span class="keywordflow">else</span>{
<a name="l00734"></a>00734       <span class="keywordflow">if</span> (ch==9) <span class="comment">//TAB</span>
<a name="l00735"></a>00735         <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#3824dbdca778bcf7dfce235ac9d07070">keyTabHit</a>();
<a name="l00736"></a>00736       
<a name="l00737"></a>00737       
<a name="l00738"></a>00738       <span class="keywordflow">if</span> (ch==10){ <span class="comment">//F10</span>
<a name="l00739"></a>00739         <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#4f5d186ece65972b2a504ac4ce4640fa">inMenu</a>=!<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#4f5d186ece65972b2a504ac4ce4640fa">inMenu</a>;
<a name="l00740"></a>00740         <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#32164e116fba74b0d5522bc0e7a3c4e6">drawMenuBar</a>();
<a name="l00741"></a>00741       }
<a name="l00742"></a>00742       
<a name="l00743"></a>00743       <span class="keywordflow">if</span> (<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#4f5d186ece65972b2a504ac4ce4640fa">inMenu</a>)
<a name="l00744"></a>00744         <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#8cb65a8dd4d52779a0c36aeb1d972137">keyArrowInMenu</a>(ch);
<a name="l00745"></a>00745       <span class="keywordflow">else</span>
<a name="l00746"></a>00746         <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#b12a80bcf8a3b6e641f1f0fe6858a238">sendKeyToCurrentWindow</a>(ch);
<a name="l00747"></a>00747 
<a name="l00748"></a>00748     }
<a name="l00749"></a>00749     <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#5a2138513eea8f43ecb1a192bf689f3c">draw</a>();
<a name="l00750"></a>00750     SLsmg_refresh();
<a name="l00751"></a>00751   }
<a name="l00752"></a>00752 }
<a name="l00753"></a>00753 
<a name="l00757"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#8cb65a8dd4d52779a0c36aeb1d972137">00757</a> <span class="keywordtype">void</span> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#8cb65a8dd4d52779a0c36aeb1d972137">RainbruRPG::Terminal::TerminalApp::keyArrowInMenu</a>(<span class="keywordtype">int</span> ch){
<a name="l00758"></a>00758   <a class="code" href="structRainbruRPG_1_1Terminal_1_1tShortCut.html">tShortCut</a>* menuSC;
<a name="l00759"></a>00759 
<a name="l00760"></a>00760   <span class="keywordflow">if</span> (ch==4){ <span class="comment">// droite</span>
<a name="l00761"></a>00761     <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#67d2bff3e3ce6a225e9e935527ef6a23">currentMenu</a>++;
<a name="l00762"></a>00762     <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#c77234bd90dbeb530f150b02c026a6fc">currentSubMenu</a>=0;
<a name="l00763"></a>00763 
<a name="l00764"></a>00764     <span class="keywordflow">if</span> ( <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#67d2bff3e3ce6a225e9e935527ef6a23">currentMenu</a>&gt;<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#bc9a7a57112902fdcf49a9f54b56b2f4">menubar</a>-&gt;<a class="code" href="classRainbruRPG_1_1Terminal_1_1MenuBar.html#0760ba84e56ca612b2b08175b061c399">getSize</a>()-1)
<a name="l00765"></a>00765       <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#67d2bff3e3ce6a225e9e935527ef6a23">currentMenu</a>=0;
<a name="l00766"></a>00766   }
<a name="l00767"></a>00767   <span class="keywordflow">if</span> (ch==3){ <span class="comment">// gauche</span>
<a name="l00768"></a>00768     <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#67d2bff3e3ce6a225e9e935527ef6a23">currentMenu</a>--;
<a name="l00769"></a>00769     <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#c77234bd90dbeb530f150b02c026a6fc">currentSubMenu</a>=0;
<a name="l00770"></a>00770     <span class="keywordflow">if</span> (<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#67d2bff3e3ce6a225e9e935527ef6a23">currentMenu</a>&lt;0)
<a name="l00771"></a>00771       <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#67d2bff3e3ce6a225e9e935527ef6a23">currentMenu</a>=<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#bc9a7a57112902fdcf49a9f54b56b2f4">menubar</a>-&gt;<a class="code" href="classRainbruRPG_1_1Terminal_1_1MenuBar.html#0760ba84e56ca612b2b08175b061c399">getSize</a>()-1;
<a name="l00772"></a>00772   }
<a name="l00773"></a>00773   <span class="keywordflow">if</span> (ch==2){ <span class="comment">// bas</span>
<a name="l00774"></a>00774     menuSC= <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#37c61204a934e4c06e22536842052739">getShortcutFromIndex</a>(<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#67d2bff3e3ce6a225e9e935527ef6a23">currentMenu</a>);
<a name="l00775"></a>00775     <span class="comment">// If we are not in the menu...</span>
<a name="l00776"></a>00776     <span class="keywordflow">if</span> (!<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#cbbf815755e2076627f38bbd1b8fec54">inSubMenu</a>){
<a name="l00777"></a>00777       <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#cbbf815755e2076627f38bbd1b8fec54">inSubMenu</a>=<span class="keyword">true</span>;
<a name="l00778"></a>00778       <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#c77234bd90dbeb530f150b02c026a6fc">currentSubMenu</a>=0;
<a name="l00779"></a>00779     }
<a name="l00780"></a>00780     <span class="comment">// We are in the menu...</span>
<a name="l00781"></a>00781     <span class="keywordflow">else</span>{
<a name="l00782"></a>00782       <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#c77234bd90dbeb530f150b02c026a6fc">currentSubMenu</a>++;
<a name="l00783"></a>00783       <span class="keywordflow">if</span> (<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#c77234bd90dbeb530f150b02c026a6fc">currentSubMenu</a> &gt; menuSC-&gt;<a class="code" href="structRainbruRPG_1_1Terminal_1_1tShortCut.html#4cfabfa79b65e6970107cef6f2dabf53">menu</a>-&gt;<a class="code" href="classRainbruRPG_1_1Terminal_1_1Menu.html#c35c6bf4977977e34c80e44de10f84d6">getHeight</a>()-1)
<a name="l00784"></a>00784         <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#c77234bd90dbeb530f150b02c026a6fc">currentSubMenu</a>=0;
<a name="l00785"></a>00785     }
<a name="l00786"></a>00786   }
<a name="l00787"></a>00787   
<a name="l00788"></a>00788   <span class="keywordflow">if</span> (ch==1){ <span class="comment">// haut</span>
<a name="l00789"></a>00789     menuSC= <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#37c61204a934e4c06e22536842052739">getShortcutFromIndex</a>(<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#67d2bff3e3ce6a225e9e935527ef6a23">currentMenu</a>);
<a name="l00790"></a>00790     <span class="comment">// If we are not in the menu...</span>
<a name="l00791"></a>00791     <span class="keywordflow">if</span> (!<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#cbbf815755e2076627f38bbd1b8fec54">inSubMenu</a>){
<a name="l00792"></a>00792       <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#cbbf815755e2076627f38bbd1b8fec54">inSubMenu</a>=<span class="keyword">true</span>;
<a name="l00793"></a>00793       <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#c77234bd90dbeb530f150b02c026a6fc">currentSubMenu</a>=menuSC-&gt;<a class="code" href="structRainbruRPG_1_1Terminal_1_1tShortCut.html#4cfabfa79b65e6970107cef6f2dabf53">menu</a>-&gt;<a class="code" href="classRainbruRPG_1_1Terminal_1_1Menu.html#c35c6bf4977977e34c80e44de10f84d6">getHeight</a>()-1;
<a name="l00794"></a>00794     }
<a name="l00795"></a>00795     <span class="comment">// We are in the menu...</span>
<a name="l00796"></a>00796     <span class="keywordflow">else</span>{
<a name="l00797"></a>00797       <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#c77234bd90dbeb530f150b02c026a6fc">currentSubMenu</a>--;
<a name="l00798"></a>00798       <span class="keywordflow">if</span> (<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#c77234bd90dbeb530f150b02c026a6fc">currentSubMenu</a> &lt; 0)
<a name="l00799"></a>00799         <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#c77234bd90dbeb530f150b02c026a6fc">currentSubMenu</a>= menuSC-&gt;<a class="code" href="structRainbruRPG_1_1Terminal_1_1tShortCut.html#4cfabfa79b65e6970107cef6f2dabf53">menu</a>-&gt;<a class="code" href="classRainbruRPG_1_1Terminal_1_1Menu.html#c35c6bf4977977e34c80e44de10f84d6">getHeight</a>()-1;
<a name="l00800"></a>00800     }
<a name="l00801"></a>00801   }
<a name="l00802"></a>00802   <span class="keywordflow">if</span> (ch==13){ <span class="comment">// enter</span>
<a name="l00803"></a>00803     <span class="keywordflow">if</span> (<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#cbbf815755e2076627f38bbd1b8fec54">inSubMenu</a>){
<a name="l00804"></a>00804       <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#4f5d186ece65972b2a504ac4ce4640fa">inMenu</a>=<span class="keyword">false</span>;
<a name="l00805"></a>00805       <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#cbbf815755e2076627f38bbd1b8fec54">inSubMenu</a>=<span class="keyword">false</span>;
<a name="l00806"></a>00806       <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#4bf42c49a9674f70c29e1e2b55651ec0">actionMenu</a>();
<a name="l00807"></a>00807     }
<a name="l00808"></a>00808   }
<a name="l00809"></a>00809   <span class="comment">//  draw();</span>
<a name="l00810"></a>00810 }
<a name="l00811"></a>00811 
<a name="l00819"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#b12a80bcf8a3b6e641f1f0fe6858a238">00819</a> <span class="keywordtype">void</span> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#b12a80bcf8a3b6e641f1f0fe6858a238">RainbruRPG::Terminal::TerminalApp::sendKeyToCurrentWindow</a>( <span class="keywordtype">int</span> ch ){
<a name="l00820"></a>00820 
<a name="l00821"></a>00821   tWindowList::const_iterator iter;
<a name="l00822"></a>00822 
<a name="l00823"></a>00823   <span class="keywordflow">if</span> (!<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#4f5d186ece65972b2a504ac4ce4640fa">inMenu</a> &amp;&amp; !<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#cbbf815755e2076627f38bbd1b8fec54">inSubMenu</a>){
<a name="l00824"></a>00824     <span class="comment">// Iterate through list and if it is selected, call the </span>
<a name="l00825"></a>00825     <span class="keywordflow">for</span> (iter=<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#e01b3152ec3e04427b0ba95cafb05bc4">windowList</a>.begin(); iter != <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#e01b3152ec3e04427b0ba95cafb05bc4">windowList</a>.end(); iter++)  {
<a name="l00826"></a>00826       <span class="keywordflow">if</span>( (*iter)-&gt;isSelected() ){
<a name="l00827"></a>00827         (*iter)-&gt;getLayout()-&gt;getFocusedWidget()-&gt;receiveKeyEvent(ch);
<a name="l00828"></a>00828       }
<a name="l00829"></a>00829     }
<a name="l00830"></a>00830   }
<a name="l00831"></a>00831 }
<a name="l00832"></a>00832 
<a name="l00837"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#3824dbdca778bcf7dfce235ac9d07070">00837</a> <span class="keywordtype">void</span> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#3824dbdca778bcf7dfce235ac9d07070">RainbruRPG::Terminal::TerminalApp::keyTabHit</a>(){
<a name="l00838"></a>00838   tWindowList::const_iterator iter;
<a name="l00839"></a>00839 
<a name="l00840"></a>00840   <span class="keywordflow">if</span> (!<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#4f5d186ece65972b2a504ac4ce4640fa">inMenu</a> &amp;&amp; !<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#cbbf815755e2076627f38bbd1b8fec54">inSubMenu</a>){
<a name="l00841"></a>00841 
<a name="l00842"></a>00842     <span class="comment">// Iterate through list and if it is selected, call the </span>
<a name="l00843"></a>00843     <span class="comment">//  Layout::getNextFocus() method.</span>
<a name="l00844"></a>00844     <span class="keywordflow">for</span> (iter=<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#e01b3152ec3e04427b0ba95cafb05bc4">windowList</a>.begin(); iter != <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#e01b3152ec3e04427b0ba95cafb05bc4">windowList</a>.end(); iter++)  {
<a name="l00845"></a>00845       <span class="keywordflow">if</span>( (*iter)-&gt;isSelected() ){
<a name="l00846"></a>00846         (*iter)-&gt;getLayout()-&gt;getNextFocus();
<a name="l00847"></a>00847       }
<a name="l00848"></a>00848     }
<a name="l00849"></a>00849   }
<a name="l00850"></a>00850 }
<a name="l00851"></a>00851 
<a name="l00856"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#8e9267fb4f032d1440574dc525823a77">00856</a> <span class="keywordtype">void</span> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#8e9267fb4f032d1440574dc525823a77">RainbruRPG::Terminal::TerminalApp::showDialog</a>(<a class="code" href="classRainbruRPG_1_1Terminal_1_1Dialog.html">Dialog</a>* d){
<a name="l00857"></a>00857   this-&gt;<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#73ab8b9515eebbfcef40be01233e59d4">dialog</a>=d;
<a name="l00858"></a>00858   <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#a59f7faef2143ebeae919adb22d21b65">showingDialog</a>=<span class="keyword">true</span>;
<a name="l00859"></a>00859 }
<a name="l00860"></a>00860 
<a name="l00867"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#e4265f7553608b93940410009de2f236">00867</a> <span class="keywordtype">void</span> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#e4265f7553608b93940410009de2f236">RainbruRPG::Terminal::TerminalApp::closeDialog</a>(){
<a name="l00868"></a>00868   <span class="keyword">delete</span> this-&gt;<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#73ab8b9515eebbfcef40be01233e59d4">dialog</a>;
<a name="l00869"></a>00869   this-&gt;<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#73ab8b9515eebbfcef40be01233e59d4">dialog</a>=NULL;
<a name="l00870"></a>00870 
<a name="l00871"></a>00871   <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#a59f7faef2143ebeae919adb22d21b65">showingDialog</a>=<span class="keyword">false</span>;
<a name="l00872"></a>00872 }
<a name="l00873"></a>00873 
<a name="l00881"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#8bd702f881c4ee92a516bb1357ba3c78">00881</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#8bd702f881c4ee92a516bb1357ba3c78">RainbruRPG::Terminal::TerminalApp::windowCount</a>(){
<a name="l00882"></a>00882   <span class="keywordflow">return</span> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#e01b3152ec3e04427b0ba95cafb05bc4">windowList</a>.size();
<a name="l00883"></a>00883 }
<a name="l00884"></a>00884 
<a name="l00890"></a>00890 <a class="code" href="classRainbruRPG_1_1Terminal_1_1Dialog.html">RainbruRPG::Terminal::Dialog</a>* 
<a name="l00891"></a><a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#3d3a041f2db8b4b32e21857a63ba2104">00891</a> <a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#3d3a041f2db8b4b32e21857a63ba2104">RainbruRPG::Terminal::TerminalApp::getCurrentDialog</a>(){
<a name="l00892"></a>00892 
<a name="l00893"></a>00893   <span class="keywordflow">return</span> this-&gt;<a class="code" href="classRainbruRPG_1_1Terminal_1_1TerminalApp.html#73ab8b9515eebbfcef40be01233e59d4">dialog</a>;
<a name="l00894"></a>00894 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Mon Apr 9 15:53:52 2007 for RainbruRPG by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
