<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>RainbruRPG: PagingLandScape2/OgrePagingLandScapeOctreeSceneManager.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="classes.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir_fba383e209534410b4d5d8b3ffa4d995.html">PagingLandScape2</a></div>
<h1>OgrePagingLandScapeOctreeSceneManager.cpp</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment">-----------------------------------------------------------------------------</span>
<a name="l00003"></a>00003 <span class="comment">This source file is part of OGRE</span>
<a name="l00004"></a>00004 <span class="comment">(Object-oriented Graphics Rendering Engine)</span>
<a name="l00005"></a>00005 <span class="comment">For the latest info, see http://www.ogre3d.org/</span>
<a name="l00006"></a>00006 <span class="comment"></span>
<a name="l00007"></a>00007 <span class="comment">Copyright (c) 2000-2006 The OGRE Team</span>
<a name="l00008"></a>00008 <span class="comment">Also see acknowledgements in Readme.html</span>
<a name="l00009"></a>00009 <span class="comment"></span>
<a name="l00010"></a>00010 <span class="comment">This program is free software; you can redistribute it and/or modify it under</span>
<a name="l00011"></a>00011 <span class="comment">the terms of the GNU Lesser General Public License as published by the Free Software</span>
<a name="l00012"></a>00012 <span class="comment">Foundation; either version 2 of the License, or (at your option) any later</span>
<a name="l00013"></a>00013 <span class="comment">version.</span>
<a name="l00014"></a>00014 <span class="comment"></span>
<a name="l00015"></a>00015 <span class="comment">This program is distributed in the hope that it will be useful, but WITHOUT</span>
<a name="l00016"></a>00016 <span class="comment">ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</span>
<a name="l00017"></a>00017 <span class="comment">FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more details.</span>
<a name="l00018"></a>00018 <span class="comment"></span>
<a name="l00019"></a>00019 <span class="comment">You should have received a copy of the GNU Lesser General Public License along with</span>
<a name="l00020"></a>00020 <span class="comment">this program; if not, write to the Free Software Foundation, Inc., 59 Temple</span>
<a name="l00021"></a>00021 <span class="comment">Place - Suite 330, Boston, MA 02111-1307, USA, or go to</span>
<a name="l00022"></a>00022 <span class="comment">http://www.gnu.org/copyleft/lesser.txt.</span>
<a name="l00023"></a>00023 <span class="comment">-----------------------------------------------------------------------------</span>
<a name="l00024"></a>00024 <span class="comment">*/</span>
<a name="l00025"></a>00025 <span class="comment">/***************************************************************************</span>
<a name="l00026"></a>00026 <span class="comment">PagingLandScapeOctreescenemanager.cpp  -  description</span>
<a name="l00027"></a>00027 <span class="comment">-------------------</span>
<a name="l00028"></a>00028 <span class="comment">begin                : Fri Sep 27 2002</span>
<a name="l00029"></a>00029 <span class="comment">copyright            : (C) 2002 by Jon Anderson</span>
<a name="l00030"></a>00030 <span class="comment">email                : janders@users.sf.net</span>
<a name="l00031"></a>00031 <span class="comment"> </span>
<a name="l00032"></a>00032 <span class="comment">Enhancements 2003 - 2004 (C) The OGRE Team</span>
<a name="l00033"></a>00033 <span class="comment"> </span>
<a name="l00034"></a>00034 <span class="comment">***************************************************************************/</span>
<a name="l00035"></a>00035 
<a name="l00036"></a>00036 <span class="preprocessor">#include "OgrePagingLandScapePrecompiledHeaders.h"</span>
<a name="l00037"></a>00037 
<a name="l00038"></a>00038 <span class="preprocessor">#include "OgrePagingLandScapeOctreeSceneManager.h"</span>
<a name="l00039"></a>00039 
<a name="l00040"></a>00040 <span class="preprocessor">#include "OgrePagingLandScapeOctreeAxisAlignedBoxSceneQuery.h"</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include "OgrePagingLandScapeOctreeIntersectionSceneQuery.h"</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include "OgrePagingLandScapeOctreePlaneBoundedVolumeListSceneQuery.h"</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include "OgrePagingLandScapeOctreeRaySceneQuery.h"</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include "OgrePagingLandScapeOctreeSphereSceneQuery.h"</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include "OgreRenderSystem.h"</span>
<a name="l00046"></a>00046 <span class="preprocessor">#include "OgreWireBoundingBox.h"</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include "OgreRenderOperation.h"</span>
<a name="l00048"></a>00048 <span class="preprocessor">#include "OgreStringConverter.h"</span>
<a name="l00049"></a>00049 
<a name="l00050"></a>00050 <span class="preprocessor">#include "OgreOverlayManager.h"</span>
<a name="l00051"></a>00051 <span class="preprocessor">#include "OgreOverlayElement.h"</span>
<a name="l00052"></a>00052 
<a name="l00053"></a>00053 <span class="preprocessor">#include "OgrePagingLandScapeOctreeCamera.h"</span>
<a name="l00054"></a>00054 <span class="preprocessor">#include "OgrePagingLandScapeOctree.h"</span>
<a name="l00055"></a>00055 <span class="preprocessor">#include "OgrePagingLandScapeOctreeNode.h"</span>
<a name="l00056"></a>00056 
<a name="l00057"></a>00057 <span class="preprocessor">#include "OgreOcclusionBoundingBox.h"</span>
<a name="l00058"></a>00058 <span class="preprocessor">#include "OgrePagingLandScapeOcclusionSorter.h"</span>
<a name="l00059"></a>00059 <span class="preprocessor">#include "OgrePagingLandScapeOcclusionVisibilityData.h"</span>
<a name="l00060"></a>00060 <span class="preprocessor">#include "OgrePagingLandScapeOcclusionTraversal.h"</span>
<a name="l00061"></a>00061 <span class="preprocessor">#include "OgrePagingLandScapeOcclusionCameraTraversal.h"</span>
<a name="l00062"></a>00062 <span class="preprocessor">#include "OgrePagingLandScapeOcclusionVFTraversal.h"</span>
<a name="l00063"></a>00063 <span class="preprocessor">#include "OgrePagingLandScapeOcclusionSWTraversal.h"</span>
<a name="l00064"></a>00064 <span class="preprocessor">#include "OgrePagingLandScapeOcclusionDebugTraversal.h"</span>
<a name="l00065"></a>00065 
<a name="l00066"></a>00066 
<a name="l00067"></a>00067 
<a name="l00068"></a>00068 <span class="keyword">extern</span> <span class="stringliteral">"C"</span>
<a name="l00069"></a>00069 {
<a name="l00070"></a>00070     <span class="keywordtype">void</span> findNodesInBox(Ogre::SceneManager *sm,
<a name="l00071"></a>00071                          <span class="keyword">const</span> Ogre::AxisAlignedBox &amp;box,
<a name="l00072"></a>00072                          std::list &lt; Ogre::SceneNode * &gt; &amp;list,
<a name="l00073"></a>00073                          <span class="keyword">const</span> Ogre::SceneNode * <span class="keyword">const</span> exclude)
<a name="l00074"></a>00074     {
<a name="l00075"></a>00075         static_cast&lt;Ogre::PagingLandScapeOctreeSceneManager*&gt;(sm)-&gt;findNodesIn(box, list, exclude);
<a name="l00076"></a>00076     }
<a name="l00077"></a>00077     <span class="keywordtype">void</span> findNodesInSphere(Ogre::SceneManager *sm,
<a name="l00078"></a>00078                             <span class="keyword">const</span> Ogre::Sphere &amp;sphere,
<a name="l00079"></a>00079                             std::list &lt; Ogre::SceneNode * &gt; &amp;list,
<a name="l00080"></a>00080                             <span class="keyword">const</span> Ogre::SceneNode * <span class="keyword">const</span> exclude)
<a name="l00081"></a>00081     {
<a name="l00082"></a>00082         static_cast&lt;Ogre::PagingLandScapeOctreeSceneManager*&gt;(sm)-&gt;findNodesIn(sphere, list, exclude);
<a name="l00083"></a>00083     }
<a name="l00084"></a>00084 }
<a name="l00085"></a>00085 
<a name="l00086"></a>00086 <span class="keyword">namespace </span>Ogre
<a name="l00087"></a>00087 {
<a name="l00088"></a>00088     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l00089"></a><a class="code" href="namespaceOgre.html#6985251dbcceecc0d6637cca5bbbc797">00089</a>     <span class="keyword">enum</span> <a class="code" href="namespaceOgre.html#6985251dbcceecc0d6637cca5bbbc797">Intersection</a>
<a name="l00090"></a>00090     {
<a name="l00091"></a>00091         OUTSIDE=0,
<a name="l00092"></a>00092         INSIDE=1,
<a name="l00093"></a>00093         INTERSECT=2
<a name="l00094"></a>00094     };
<a name="l00095"></a>00095     <span class="keywordtype">int</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#72dcbac8ccdfa3a3759b0c62c7a410ba">PagingLandScapeOctreeSceneManager::intersect_call</a> = 0;
<a name="l00096"></a>00096     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l00097"></a><a class="code" href="namespaceOgre.html#5c1056b6b60ce5548dcd68ae6dcc265a">00097</a>     <a class="code" href="namespaceOgre.html#6985251dbcceecc0d6637cca5bbbc797">Intersection</a> <a class="code" href="namespaceOgre.html#5c1056b6b60ce5548dcd68ae6dcc265a">intersect</a>(<span class="keyword">const</span> Ray &amp;ray, <span class="keyword">const</span> AxisAlignedBox &amp;box)
<a name="l00098"></a>00098         {
<a name="l00099"></a>00099                 <span class="keywordflow">if</span> (box.isNull()) 
<a name="l00100"></a>00100                         <span class="keywordflow">return</span> OUTSIDE;
<a name="l00101"></a>00101 
<a name="l00102"></a>00102                 <span class="keyword">const</span> Vector3&amp; min = box.getMinimum();
<a name="l00103"></a>00103                 <span class="keyword">const</span> Vector3&amp; max = box.getMaximum();
<a name="l00104"></a>00104                 <span class="keyword">const</span> Vector3&amp; rayorig = ray.getOrigin();
<a name="l00105"></a>00105 
<a name="l00106"></a>00106                 <span class="comment">// Check origin inside first</span>
<a name="l00107"></a>00107                 <span class="keywordflow">if</span> ( rayorig &gt; min &amp;&amp; rayorig &lt; max )
<a name="l00108"></a>00108                         <span class="keywordflow">return</span> INSIDE;
<a name="l00109"></a>00109 
<a name="l00110"></a>00110                 <span class="keyword">const</span> Vector3&amp; raydir = ray.getDirection();
<a name="l00111"></a>00111 
<a name="l00112"></a>00112                 Real lowt = 0.0f;
<a name="l00113"></a>00113                 Real t;
<a name="l00114"></a>00114                 <span class="keywordtype">bool</span> hit = <span class="keyword">false</span>;
<a name="l00115"></a>00115                 Vector3 hitpoint;
<a name="l00116"></a>00116 
<a name="l00117"></a>00117                 <span class="comment">// Check each face in turn, only check closest 3</span>
<a name="l00118"></a>00118                 <span class="comment">// Min x</span>
<a name="l00119"></a>00119                 <span class="keywordflow">if</span> (rayorig.x &lt; min.x &amp;&amp; raydir.x &gt; 0)
<a name="l00120"></a>00120                 {
<a name="l00121"></a>00121                         t = (min.x - rayorig.x) / raydir.x;
<a name="l00122"></a>00122                         if (t &gt; 0)
<a name="l00123"></a>00123                         {
<a name="l00124"></a>00124                                 <span class="comment">// Substitute t back into ray and check bounds and dist</span>
<a name="l00125"></a>00125                                 hitpoint = rayorig + raydir * t;
<a name="l00126"></a>00126                                 <span class="keywordflow">if</span> (hitpoint.y &gt;= min.y &amp;&amp; hitpoint.y &lt;= max.y &amp;&amp;
<a name="l00127"></a>00127                                         hitpoint.z &gt;= min.z &amp;&amp; hitpoint.z &lt;= max.z &amp;&amp;
<a name="l00128"></a>00128                                         (!hit || t &lt; lowt))
<a name="l00129"></a>00129                                 {
<a name="l00130"></a>00130                                         <span class="keywordflow">return</span> INTERSECT;
<a name="l00131"></a>00131                                 }
<a name="l00132"></a>00132                         }
<a name="l00133"></a>00133                 }
<a name="l00134"></a>00134                 <span class="comment">// Max x</span>
<a name="l00135"></a>00135                 <span class="keywordflow">if</span> (rayorig.x &gt; max.x &amp;&amp; raydir.x &lt; 0)
<a name="l00136"></a>00136                 {
<a name="l00137"></a>00137                         t = (max.x - rayorig.x) / raydir.x;
<a name="l00138"></a>00138                         if (t &gt; 0)
<a name="l00139"></a>00139                         {
<a name="l00140"></a>00140                                 <span class="comment">// Substitute t back into ray and check bounds and dist</span>
<a name="l00141"></a>00141                                 hitpoint = rayorig + raydir * t;
<a name="l00142"></a>00142                                 <span class="keywordflow">if</span> (hitpoint.y &gt;= min.y &amp;&amp; hitpoint.y &lt;= max.y &amp;&amp;
<a name="l00143"></a>00143                                         hitpoint.z &gt;= min.z &amp;&amp; hitpoint.z &lt;= max.z &amp;&amp;
<a name="l00144"></a>00144                                         (!hit || t &lt; lowt))
<a name="l00145"></a>00145                                 {
<a name="l00146"></a>00146                                         <span class="keywordflow">return</span> INTERSECT;
<a name="l00147"></a>00147                                 }
<a name="l00148"></a>00148                         }
<a name="l00149"></a>00149                 }
<a name="l00150"></a>00150                 <span class="comment">// Min y</span>
<a name="l00151"></a>00151                 <span class="keywordflow">if</span> (rayorig.y &lt; min.y &amp;&amp; raydir.y &gt; 0)
<a name="l00152"></a>00152                 {
<a name="l00153"></a>00153                         t = (min.y - rayorig.y) / raydir.y;
<a name="l00154"></a>00154                         if (t &gt; 0)
<a name="l00155"></a>00155                         {
<a name="l00156"></a>00156                                 <span class="comment">// Substitute t back into ray and check bounds and dist</span>
<a name="l00157"></a>00157                                 hitpoint = rayorig + raydir * t;
<a name="l00158"></a>00158                                 <span class="keywordflow">if</span> (hitpoint.x &gt;= min.x &amp;&amp; hitpoint.x &lt;= max.x &amp;&amp;
<a name="l00159"></a>00159                                         hitpoint.z &gt;= min.z &amp;&amp; hitpoint.z &lt;= max.z &amp;&amp;
<a name="l00160"></a>00160                                         (!hit || t &lt; lowt))
<a name="l00161"></a>00161                                 {
<a name="l00162"></a>00162                                         <span class="keywordflow">return</span> INTERSECT;
<a name="l00163"></a>00163                                 }
<a name="l00164"></a>00164                         }
<a name="l00165"></a>00165                 }
<a name="l00166"></a>00166                 <span class="comment">// Max y</span>
<a name="l00167"></a>00167                 <span class="keywordflow">if</span> (rayorig.y &gt; max.y &amp;&amp; raydir.y &lt; 0)
<a name="l00168"></a>00168                 {
<a name="l00169"></a>00169                         t = (max.y - rayorig.y) / raydir.y;
<a name="l00170"></a>00170                         if (t &gt; 0)
<a name="l00171"></a>00171                         {
<a name="l00172"></a>00172                                 <span class="comment">// Substitute t back into ray and check bounds and dist</span>
<a name="l00173"></a>00173                                 hitpoint = rayorig + raydir * t;
<a name="l00174"></a>00174                                 <span class="keywordflow">if</span> (hitpoint.x &gt;= min.x &amp;&amp; hitpoint.x &lt;= max.x &amp;&amp;
<a name="l00175"></a>00175                                         hitpoint.z &gt;= min.z &amp;&amp; hitpoint.z &lt;= max.z &amp;&amp;
<a name="l00176"></a>00176                                         (!hit || t &lt; lowt))
<a name="l00177"></a>00177                                 {
<a name="l00178"></a>00178                                         <span class="keywordflow">return</span> INTERSECT;
<a name="l00179"></a>00179                                 }
<a name="l00180"></a>00180                         }
<a name="l00181"></a>00181                 }
<a name="l00182"></a>00182                 <span class="comment">// Min z</span>
<a name="l00183"></a>00183                 <span class="keywordflow">if</span> (rayorig.z &lt; min.z &amp;&amp; raydir.z &gt; 0)
<a name="l00184"></a>00184                 {
<a name="l00185"></a>00185                         t = (min.z - rayorig.z) / raydir.z;
<a name="l00186"></a>00186                         if (t &gt; 0)
<a name="l00187"></a>00187                         {
<a name="l00188"></a>00188                                 <span class="comment">// Substitute t back into ray and check bounds and dist</span>
<a name="l00189"></a>00189                                 hitpoint = rayorig + raydir * t;
<a name="l00190"></a>00190                                 <span class="keywordflow">if</span> (hitpoint.x &gt;= min.x &amp;&amp; hitpoint.x &lt;= max.x &amp;&amp;
<a name="l00191"></a>00191                                         hitpoint.y &gt;= min.y &amp;&amp; hitpoint.y &lt;= max.y &amp;&amp;
<a name="l00192"></a>00192                                         (!hit || t &lt; lowt))
<a name="l00193"></a>00193                                 {
<a name="l00194"></a>00194                                         <span class="keywordflow">return</span> INTERSECT;
<a name="l00195"></a>00195                                 }
<a name="l00196"></a>00196                         }
<a name="l00197"></a>00197                 }
<a name="l00198"></a>00198                 <span class="comment">// Max z</span>
<a name="l00199"></a>00199                 <span class="keywordflow">if</span> (rayorig.z &gt; max.z &amp;&amp; raydir.z &lt; 0)
<a name="l00200"></a>00200                 {
<a name="l00201"></a>00201                         t = (max.z - rayorig.z) / raydir.z;
<a name="l00202"></a>00202                         if (t &gt; 0)
<a name="l00203"></a>00203                         {
<a name="l00204"></a>00204                                 <span class="comment">// Substitute t back into ray and check bounds and dist</span>
<a name="l00205"></a>00205                                 hitpoint = rayorig + raydir * t;
<a name="l00206"></a>00206                                 <span class="keywordflow">if</span> (hitpoint.x &gt;= min.x &amp;&amp; hitpoint.x &lt;= max.x &amp;&amp;
<a name="l00207"></a>00207                                         hitpoint.y &gt;= min.y &amp;&amp; hitpoint.y &lt;= max.y &amp;&amp;
<a name="l00208"></a>00208                                         (!hit || t &lt; lowt))
<a name="l00209"></a>00209                                 {
<a name="l00210"></a>00210                                         <span class="keywordflow">return</span> INTERSECT;
<a name="l00211"></a>00211                                 }
<a name="l00212"></a>00212                         }
<a name="l00213"></a>00213                 }
<a name="l00214"></a>00214                 <span class="keywordflow">return</span> OUTSIDE;
<a name="l00215"></a>00215         }
<a name="l00216"></a>00216 
<a name="l00217"></a>00217         <span class="comment">//---------------------------------------------------------------------</span>
<a name="l00218"></a><a class="code" href="namespaceOgre.html#51a7428d26778ee4ad4f8674f7f4dd85">00218</a>         <a class="code" href="namespaceOgre.html#6985251dbcceecc0d6637cca5bbbc797">Intersection</a> <a class="code" href="namespaceOgre.html#51a7428d26778ee4ad4f8674f7f4dd85">intersect2</a>(<span class="keyword">const</span> Ray &amp;one, <span class="keyword">const</span> AxisAlignedBox &amp;two)
<a name="l00219"></a>00219     {
<a name="l00220"></a>00220         <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#72dcbac8ccdfa3a3759b0c62c7a410ba">PagingLandScapeOctreeSceneManager::intersect_call</a>++;
<a name="l00221"></a>00221 
<a name="l00222"></a>00222         <span class="comment">// Null box?</span>
<a name="l00223"></a>00223         <span class="keywordflow">if</span> (two.isNull()) 
<a name="l00224"></a>00224             <span class="keywordflow">return</span> OUTSIDE;
<a name="l00225"></a>00225 
<a name="l00226"></a>00226         <span class="keyword">const</span> Vector3* <span class="keyword">const</span> pCorners = two.getAllCorners();
<a name="l00227"></a>00227         <span class="keyword">const</span> Vector3 origin = one.getOrigin();
<a name="l00228"></a>00228         <span class="keyword">const</span> Vector3 dir = one.getDirection();
<a name="l00229"></a>00229 
<a name="l00230"></a>00230         Vector3 maxT (-1.0f, -1.0f, -1.0f);
<a name="l00231"></a>00231 
<a name="l00232"></a>00232         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0;
<a name="l00233"></a>00233         <span class="keywordtype">bool</span> inside = <span class="keyword">true</span>;
<a name="l00234"></a>00234         <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)
<a name="l00235"></a>00235         {
<a name="l00236"></a>00236             <span class="keywordflow">if</span> (origin[i] &lt; pCorners[0][i])
<a name="l00237"></a>00237             {
<a name="l00238"></a>00238                 inside = <span class="keyword">false</span>;
<a name="l00239"></a>00239                 <span class="keywordflow">if</span>(dir[i] &gt; 0)
<a name="l00240"></a>00240                     maxT[i] = (pCorners[0][i] - origin[i]) / dir[i];
<a name="l00241"></a>00241             }
<a name="l00242"></a>00242             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (origin[i] &gt; pCorners[4][i])
<a name="l00243"></a>00243             {
<a name="l00244"></a>00244                 inside = <span class="keyword">false</span>;
<a name="l00245"></a>00245                 <span class="keywordflow">if</span>(dir[i] &lt; 0)
<a name="l00246"></a>00246                     maxT[i] = (pCorners[4][i] - origin[i]) / dir[i];
<a name="l00247"></a>00247             }
<a name="l00248"></a>00248         }
<a name="l00249"></a>00249 
<a name="l00250"></a>00250         <span class="keywordflow">if</span>(inside)
<a name="l00251"></a>00251         {
<a name="l00252"></a>00252             <span class="keywordflow">return</span> INTERSECT;
<a name="l00253"></a>00253         }
<a name="l00254"></a>00254         <span class="keywordtype">int</span> whichPlane = 0;
<a name="l00255"></a>00255         <span class="keywordflow">if</span>(maxT[1] &gt; maxT[whichPlane])
<a name="l00256"></a>00256             whichPlane = 1;
<a name="l00257"></a>00257         <span class="keywordflow">if</span>(maxT[2] &gt; maxT[whichPlane])
<a name="l00258"></a>00258             whichPlane = 2;
<a name="l00259"></a>00259 
<a name="l00260"></a>00260         <span class="keywordflow">if</span>(((<span class="keywordtype">int</span>)maxT[whichPlane]) &amp; 0x80000000)
<a name="l00261"></a>00261         {
<a name="l00262"></a>00262             <span class="keywordflow">return</span> OUTSIDE;
<a name="l00263"></a>00263         }
<a name="l00264"></a>00264         <span class="keyword">const</span> Real maxTThisPlane = maxT[whichPlane];
<a name="l00265"></a>00265         <span class="keywordflow">for</span>(i = 0; i &lt; 3; i++)
<a name="l00266"></a>00266         {
<a name="l00267"></a>00267             <span class="keywordflow">if</span>(i != whichPlane)
<a name="l00268"></a>00268             {
<a name="l00269"></a>00269                 <span class="keyword">const</span> Real f = origin[i] + maxTThisPlane * dir[i];
<a name="l00270"></a>00270                 <span class="keywordflow">if</span> (f &lt; (pCorners[0][i] - 0.00001f) ||
<a name="l00271"></a>00271                         f &gt; (pCorners[4][i] + 0.00001f))
<a name="l00272"></a>00272                 {
<a name="l00273"></a>00273                     <span class="keywordflow">return</span> OUTSIDE;
<a name="l00274"></a>00274                 }
<a name="l00275"></a>00275             }
<a name="l00276"></a>00276         }
<a name="l00277"></a>00277 
<a name="l00278"></a>00278         <span class="keywordflow">return</span> INTERSECT;
<a name="l00279"></a>00279 
<a name="l00280"></a>00280     }
<a name="l00281"></a>00281     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l00284"></a><a class="code" href="namespaceOgre.html#f3a9ef8c2d062328144a9be02faf4c88">00284</a> <span class="comment"></span>    <a class="code" href="namespaceOgre.html#6985251dbcceecc0d6637cca5bbbc797">Intersection</a> <a class="code" href="namespaceOgre.html#5c1056b6b60ce5548dcd68ae6dcc265a">intersect</a>(<span class="keyword">const</span> PlaneBoundedVolume &amp;one, <span class="keyword">const</span> AxisAlignedBox &amp;two)
<a name="l00285"></a>00285     {
<a name="l00286"></a>00286         <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#72dcbac8ccdfa3a3759b0c62c7a410ba">PagingLandScapeOctreeSceneManager::intersect_call</a>++;
<a name="l00287"></a>00287         <span class="comment">// Null box?</span>
<a name="l00288"></a>00288         <span class="keywordflow">if</span> (two.isNull()) 
<a name="l00289"></a>00289             <span class="keywordflow">return</span> OUTSIDE;
<a name="l00290"></a>00290 
<a name="l00291"></a>00291         <span class="comment">// Get corners of the box</span>
<a name="l00292"></a>00292         <span class="keyword">const</span> Vector3 * <span class="keyword">const</span> pCorners = two.getAllCorners();
<a name="l00293"></a>00293 
<a name="l00294"></a>00294         <span class="comment">// For each plane, see if all points are on the negative side</span>
<a name="l00295"></a>00295         <span class="comment">// If so, object is not visible.</span>
<a name="l00296"></a>00296         <span class="comment">// If one or more are, it's partial.</span>
<a name="l00297"></a>00297         <span class="comment">// If all aren't, full</span>
<a name="l00298"></a>00298         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> corners[ 8 ] = {0, 4, 3, 5, 2, 6, 1, 7};
<a name="l00299"></a>00299 
<a name="l00300"></a>00300         <span class="keywordtype">bool</span> all_inside = <span class="keyword">true</span>;
<a name="l00301"></a>00301         PlaneList::const_iterator i, iend = one.planes.end();
<a name="l00302"></a>00302         <span class="keywordflow">for</span> (i = one.planes.begin(); i != iend; ++i)
<a name="l00303"></a>00303         {
<a name="l00304"></a>00304             <span class="keyword">const</span> Plane&amp; plane = *i;
<a name="l00305"></a>00305             <span class="keywordtype">bool</span> all_outside = <span class="keyword">true</span>;
<a name="l00306"></a>00306             <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> corner = 0; corner &lt; 8; ++corner)
<a name="l00307"></a>00307             {
<a name="l00308"></a>00308                 <span class="keyword">const</span> Real distance = plane.getDistance(pCorners[ corners[ corner ] ]);
<a name="l00309"></a>00309                 all_outside = all_outside &amp;&amp; (distance &lt; 0);
<a name="l00310"></a>00310                 all_inside = all_inside &amp;&amp; (distance &gt;= 0);
<a name="l00311"></a>00311 
<a name="l00312"></a>00312                 <span class="keywordflow">if</span> (!all_outside &amp;&amp; !all_inside)
<a name="l00313"></a>00313                     <span class="keywordflow">break</span>;
<a name="l00314"></a>00314             }
<a name="l00315"></a>00315 
<a name="l00316"></a>00316             <span class="keywordflow">if</span> (all_outside)
<a name="l00317"></a>00317                 <span class="keywordflow">return</span> OUTSIDE;
<a name="l00318"></a>00318         }
<a name="l00319"></a>00319 
<a name="l00320"></a>00320         <span class="keywordflow">if</span> (all_inside)
<a name="l00321"></a>00321             <span class="keywordflow">return</span> INSIDE;
<a name="l00322"></a>00322         <span class="keywordflow">else</span>
<a name="l00323"></a>00323             <span class="keywordflow">return</span> INTERSECT;
<a name="l00324"></a>00324 
<a name="l00325"></a>00325     }
<a name="l00326"></a>00326     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l00329"></a><a class="code" href="namespaceOgre.html#13a65e68defd54096ae956ddfda97e58">00329</a> <span class="comment"></span>    <a class="code" href="namespaceOgre.html#6985251dbcceecc0d6637cca5bbbc797">Intersection</a> <a class="code" href="namespaceOgre.html#5c1056b6b60ce5548dcd68ae6dcc265a">intersect</a>(<span class="keyword">const</span> AxisAlignedBox &amp;one, <span class="keyword">const</span> AxisAlignedBox &amp;two)
<a name="l00330"></a>00330     {
<a name="l00331"></a>00331         <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#72dcbac8ccdfa3a3759b0c62c7a410ba">PagingLandScapeOctreeSceneManager::intersect_call</a>++;
<a name="l00332"></a>00332 
<a name="l00333"></a>00333         <span class="comment">// Null box?</span>
<a name="l00334"></a>00334         <span class="keywordflow">if</span> (one.isNull() || two.isNull()) 
<a name="l00335"></a>00335             <span class="keywordflow">return</span> OUTSIDE;
<a name="l00336"></a>00336 
<a name="l00337"></a>00337         <span class="keyword">const</span> Vector3 * outside = one.getAllCorners();
<a name="l00338"></a>00338         <span class="keyword">const</span> Vector3 *inside = two.getAllCorners();
<a name="l00339"></a>00339 
<a name="l00340"></a>00340         <span class="keywordflow">if</span> (inside[ 4 ].x &lt; outside[ 0 ].x ||
<a name="l00341"></a>00341                 inside[ 4 ].y &lt; outside[ 0 ].y ||
<a name="l00342"></a>00342                 inside[ 4 ].z &lt; outside[ 0 ].z ||
<a name="l00343"></a>00343                 inside[ 0 ].x &gt; outside[ 4 ].x ||
<a name="l00344"></a>00344                 inside[ 0 ].y &gt; outside[ 4 ].y ||
<a name="l00345"></a>00345                 inside[ 0 ].z &gt; outside[ 4 ].z)
<a name="l00346"></a>00346         {
<a name="l00347"></a>00347             <span class="keywordflow">return</span> OUTSIDE;
<a name="l00348"></a>00348         }
<a name="l00349"></a>00349 
<a name="l00350"></a>00350         <span class="keyword">const</span> <span class="keywordtype">bool</span> full = (inside[ 0 ].x &gt; outside[ 0 ].x &amp;&amp;
<a name="l00351"></a>00351                     inside[ 0 ].y &gt; outside[ 0 ].y &amp;&amp;
<a name="l00352"></a>00352                     inside[ 0 ].z &gt; outside[ 0 ].z &amp;&amp;
<a name="l00353"></a>00353                     inside[ 4 ].x &lt; outside[ 4 ].x &amp;&amp;
<a name="l00354"></a>00354                     inside[ 4 ].y &lt; outside[ 4 ].y &amp;&amp;
<a name="l00355"></a>00355                     inside[ 4 ].z &lt; outside[ 4 ].z);
<a name="l00356"></a>00356 
<a name="l00357"></a>00357         <span class="keywordflow">if</span> (full)
<a name="l00358"></a>00358             <span class="keywordflow">return</span> INSIDE;
<a name="l00359"></a>00359         <span class="keywordflow">else</span>
<a name="l00360"></a>00360             <span class="keywordflow">return</span> INTERSECT;
<a name="l00361"></a>00361 
<a name="l00362"></a>00362     }
<a name="l00363"></a>00363     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l00366"></a><a class="code" href="namespaceOgre.html#43758933de0ba0f0fdb1102230ac0405">00366</a> <span class="comment"></span>    <a class="code" href="namespaceOgre.html#6985251dbcceecc0d6637cca5bbbc797">Intersection</a> <a class="code" href="namespaceOgre.html#5c1056b6b60ce5548dcd68ae6dcc265a">intersect</a>(<span class="keyword">const</span> Sphere &amp;one, <span class="keyword">const</span> AxisAlignedBox &amp;two)
<a name="l00367"></a>00367     {
<a name="l00368"></a>00368         <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#72dcbac8ccdfa3a3759b0c62c7a410ba">PagingLandScapeOctreeSceneManager::intersect_call</a>++;
<a name="l00369"></a>00369 
<a name="l00370"></a>00370         <span class="comment">// Null box?</span>
<a name="l00371"></a>00371         <span class="keywordflow">if</span> (two.isNull()) 
<a name="l00372"></a>00372             <span class="keywordflow">return</span> OUTSIDE;
<a name="l00373"></a>00373 
<a name="l00374"></a>00374 
<a name="l00375"></a>00375         <span class="keyword">const</span> Real sradius = Math::Sqr (one.getRadius());
<a name="l00376"></a>00376         <span class="keyword">const</span> Vector3 scenter = one.getCenter();
<a name="l00377"></a>00377         <span class="keyword">const</span> Vector3 * <span class="keyword">const</span> corners = two.getAllCorners();
<a name="l00378"></a>00378 
<a name="l00379"></a>00379         <span class="keyword">const</span> Vector3 mndistance = (corners[ 0 ] - scenter);
<a name="l00380"></a>00380         <span class="keyword">const</span> Vector3 mxdistance = (corners[ 4 ] - scenter);
<a name="l00381"></a>00381 
<a name="l00382"></a>00382 
<a name="l00383"></a>00383         <span class="keywordflow">if</span> (mndistance.squaredLength() &lt; sradius &amp;&amp;
<a name="l00384"></a>00384                 mxdistance.squaredLength() &lt; sradius)
<a name="l00385"></a>00385         {
<a name="l00386"></a>00386             <span class="keywordflow">return</span> INSIDE;
<a name="l00387"></a>00387         }
<a name="l00388"></a>00388 
<a name="l00389"></a>00389         <span class="comment">//find the square of the distance</span>
<a name="l00390"></a>00390         <span class="comment">//from the sphere to the box</span>
<a name="l00391"></a>00391         Real d = 0;
<a name="l00392"></a>00392         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0 ; i &lt; 3 ; i++)
<a name="l00393"></a>00393         {
<a name="l00394"></a>00394             <span class="keyword">const</span> Real sCenteri = scenter[ i ];
<a name="l00395"></a>00395             <span class="keywordflow">if</span> (sCenteri &lt; corners[ 0 ][ i ])
<a name="l00396"></a>00396             {
<a name="l00397"></a>00397                 <span class="keyword">const</span> Real s = sCenteri - corners[ 0 ][ i ];
<a name="l00398"></a>00398                 d += s * s;
<a name="l00399"></a>00399             }
<a name="l00400"></a>00400             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sCenteri &gt; corners[ 4 ][ i ])
<a name="l00401"></a>00401             {
<a name="l00402"></a>00402                 <span class="keyword">const</span> Real s = sCenteri - corners[ 4 ][ i ];
<a name="l00403"></a>00403                 d += s * s;
<a name="l00404"></a>00404             }
<a name="l00405"></a>00405 
<a name="l00406"></a>00406         }
<a name="l00407"></a>00407 
<a name="l00408"></a>00408         <span class="keyword">const</span> <span class="keywordtype">bool</span> partial = (d &lt;= sradius);
<a name="l00409"></a>00409 
<a name="l00410"></a>00410         <span class="keywordflow">if</span> (!partial)
<a name="l00411"></a>00411         {
<a name="l00412"></a>00412             <span class="keywordflow">return</span> OUTSIDE;
<a name="l00413"></a>00413         }
<a name="l00414"></a>00414 
<a name="l00415"></a>00415         <span class="keywordflow">else</span>
<a name="l00416"></a>00416         {
<a name="l00417"></a>00417             <span class="keywordflow">return</span> INTERSECT;
<a name="l00418"></a>00418         }
<a name="l00419"></a>00419 
<a name="l00420"></a>00420 
<a name="l00421"></a>00421     }
<a name="l00422"></a>00422     <span class="comment">//-----------------------------------------------------------------------</span>
<a name="l00423"></a>00423     <span class="comment">//-----------------------------------------------------------------------</span>
<a name="l00424"></a>00424     <span class="comment">//-----------------------------------------------------------------------</span>
<a name="l00425"></a>00425     <span class="keyword">const</span> String <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManagerFactory.html#74a0863939cdf5d7b24acf3072270886">PagingLandScapeOctreeSceneManagerFactory::FACTORY_TYPE_NAME</a> = <span class="stringliteral">"PagingLandScapeOctreeSceneManager"</span>;
<a name="l00426"></a>00426     <span class="comment">//-----------------------------------------------------------------------</span>
<a name="l00427"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManagerFactory.html#ccdfc4a1327d6df1618b3ea8b2e6b4d6">00427</a>     <span class="keywordtype">void</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManagerFactory.html#ccdfc4a1327d6df1618b3ea8b2e6b4d6">PagingLandScapeOctreeSceneManagerFactory::initMetaData</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span>
<a name="l00428"></a>00428 <span class="keyword">    </span>{
<a name="l00429"></a>00429        mMetaData.typeName = <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManagerFactory.html#74a0863939cdf5d7b24acf3072270886">FACTORY_TYPE_NAME</a>;
<a name="l00430"></a>00430        mMetaData.description = <span class="stringliteral">"Scene manager organising the scene on the basis of an octree, possibly using occlusion culling."</span>;
<a name="l00431"></a>00431        mMetaData.sceneTypeMask = ST_EXTERIOR_REAL_FAR; <span class="comment">// support all types</span>
<a name="l00432"></a>00432        mMetaData.worldGeometrySupported = <span class="keyword">false</span>;
<a name="l00433"></a>00433     }
<a name="l00434"></a>00434     <span class="comment">//-----------------------------------------------------------------------</span>
<a name="l00435"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManagerFactory.html#92acbd32bb10c14040fda07ffc199bfa">00435</a>     SceneManager* <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManagerFactory.html#92acbd32bb10c14040fda07ffc199bfa">PagingLandScapeOctreeSceneManagerFactory::createInstance</a>(
<a name="l00436"></a>00436         <span class="keyword">const</span> String&amp; instanceName)
<a name="l00437"></a>00437     {
<a name="l00438"></a>00438         <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html">PagingLandScapeOctreeSceneManager</a>(instanceName);
<a name="l00439"></a>00439     }
<a name="l00440"></a>00440     <span class="comment">//-----------------------------------------------------------------------</span>
<a name="l00441"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManagerFactory.html#cac24a932a89190d4402aef92356723a">00441</a>     <span class="keywordtype">void</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManagerFactory.html#cac24a932a89190d4402aef92356723a">PagingLandScapeOctreeSceneManagerFactory::destroyInstance</a>(SceneManager* instance)
<a name="l00442"></a>00442     {
<a name="l00443"></a>00443         <span class="keyword">delete</span> instance;
<a name="l00444"></a>00444     }
<a name="l00445"></a>00445     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l00446"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#a254090bdd2824738e50bdce9e766bac">00446</a>     <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#a254090bdd2824738e50bdce9e766bac">PagingLandScapeOctreeSceneManager::PagingLandScapeOctreeSceneManager</a>(<span class="keyword">const</span> String&amp; name): 
<a name="l00447"></a>00447         SceneManager(name),
<a name="l00448"></a>00448                 mPagingLandScapeOctree(0),
<a name="l00449"></a>00449                 mCurrentOptionCamera(0)
<a name="l00450"></a>00450     {
<a name="l00451"></a>00451         <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#404bc2c38ae1db0ad7c2ad080311ebca">mOctreeSet</a>.<a class="code" href="classOgre_1_1PoolSet.html#372cd201af3cc28550de0d0a2749d4b4">setPoolSize</a> (64);
<a name="l00452"></a>00452         AxisAlignedBox b(-10000, -10000, -10000, 10000, 10000, 10000);
<a name="l00453"></a>00453         <span class="keywordtype">int</span> depth = 8; 
<a name="l00454"></a>00454         <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#eafc6509522118d8879627d4e7da6d03">init</a>(b, depth);
<a name="l00455"></a>00455     }
<a name="l00456"></a>00456     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l00457"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#90a0f6d0180a8b6342c3de990b0b7a43">00457</a>     <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#a254090bdd2824738e50bdce9e766bac">PagingLandScapeOctreeSceneManager::PagingLandScapeOctreeSceneManager</a>(<span class="keyword">const</span> String&amp; name, AxisAlignedBox &amp;box, <span class="keywordtype">int</span> max_depth) : 
<a name="l00458"></a>00458         SceneManager(name),
<a name="l00459"></a>00459         mPagingLandScapeOctree(0)
<a name="l00460"></a>00460     {
<a name="l00461"></a>00461         <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#eafc6509522118d8879627d4e7da6d03">init</a>(box, max_depth);
<a name="l00462"></a>00462     }
<a name="l00463"></a>00463     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l00464"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#b5a9d03320d8a1f75a471eff02748f4f">00464</a>     <span class="keyword">const</span> String&amp; <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#b5a9d03320d8a1f75a471eff02748f4f">PagingLandScapeOctreeSceneManager::getTypeName</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span>
<a name="l00465"></a>00465 <span class="keyword">    </span>{
<a name="l00466"></a>00466         <span class="keywordflow">return</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManagerFactory.html#74a0863939cdf5d7b24acf3072270886">PagingLandScapeOctreeSceneManagerFactory::FACTORY_TYPE_NAME</a>;
<a name="l00467"></a>00467     }
<a name="l00468"></a>00468     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l00469"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#eafc6509522118d8879627d4e7da6d03">00469</a>     <span class="keywordtype">void</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#eafc6509522118d8879627d4e7da6d03">PagingLandScapeOctreeSceneManager::init</a>(<span class="keyword">const</span> AxisAlignedBox &amp;box, <span class="keywordtype">int</span> depth)
<a name="l00470"></a>00470     {
<a name="l00471"></a>00471         <span class="keyword">delete</span> mSceneRoot; <span class="comment">//get rid of old root.</span>
<a name="l00472"></a>00472 
<a name="l00473"></a>00473         <span class="comment">// -- Changes by Steve</span>
<a name="l00474"></a>00474         <span class="comment">// Don't do it this way, it will add it to the mSceneNodes which we don't want</span>
<a name="l00475"></a>00475         <span class="comment">//mSceneRoot = createSceneNode("SceneRoot");</span>
<a name="l00476"></a>00476         mSceneRoot = <span class="keyword">new</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeNode.html">PagingLandScapeOctreeNode</a>(<span class="keyword">this</span>, <span class="stringliteral">"SceneRoot"</span>);
<a name="l00477"></a>00477             mSceneRoot-&gt;_notifyRootNode();
<a name="l00478"></a>00478         <span class="comment">// -- End changes by Steve</span>
<a name="l00479"></a>00479 
<a name="l00480"></a>00480 
<a name="l00481"></a>00481         <span class="keywordflow">if</span> (<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#025e48e12cf27df7365ad7431379757c">mPagingLandScapeOctree</a>)
<a name="l00482"></a>00482                 <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#b2d89ef38b595e4680f27928d02617ca">deleteOctree</a> (<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#025e48e12cf27df7365ad7431379757c">mPagingLandScapeOctree</a>);
<a name="l00483"></a>00483         mPagingLandScapeOctree = <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#404bc2c38ae1db0ad7c2ad080311ebca">mOctreeSet</a>.<a class="code" href="classOgre_1_1PoolSet.html#f9412cc206f4c5f0f28700c78f3135af">getPoolable</a>();
<a name="l00484"></a>00484         assert (mPagingLandScapeOctree);
<a name="l00485"></a>00485         mPagingLandScapeOctree-&gt;setSceneManager (<span class="keyword">this</span>);
<a name="l00486"></a>00486 
<a name="l00487"></a>00487         <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#46e93eae9353f96100f4f2bf25873466">mMaxDepth</a> = depth;
<a name="l00488"></a>00488         <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#ba46e20a1ef11f8019dacae428811bb8">mBox</a> = box;
<a name="l00489"></a>00489 
<a name="l00490"></a>00490         <span class="comment">//mSceneRoot isn't put into the PagingLandScapeOctree since it has no volume.   </span>
<a name="l00491"></a>00491         mPagingLandScapeOctree-&gt;setBoundingBox (box.getMinimum(), box.getMaximum());
<a name="l00492"></a>00492 
<a name="l00493"></a>00493 <span class="preprocessor">        #ifdef _VISIBILITYDEBUG</span>
<a name="l00494"></a>00494 <span class="preprocessor"></span>            mShowBoxes = <span class="keyword">false</span>;
<a name="l00495"></a>00495             mCullCamera = <span class="keyword">false</span>;
<a name="l00496"></a>00496             <span class="comment">//     setDisplaySceneNodes(true);</span>
<a name="l00497"></a>00497 <span class="preprocessor">        #endif //_VISIBILITYDEBUG</span>
<a name="l00498"></a>00498 <span class="preprocessor"></span>        
<a name="l00499"></a>00499      
<a name="l00500"></a>00500         <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#ef68602265631ce6e77bae3c13c70dd7">mOcclusion</a>.<a class="code" href="classOgre_1_1Occlusion.html#ef64502f0462fa20f4ef01ae3e1c09e5">init</a> (<span class="keyword">this</span>);
<a name="l00501"></a>00501         <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#10047da971b94ff3d29aecd66fb375b1">mOcclusionDepth</a> = 0;
<a name="l00502"></a>00502 
<a name="l00503"></a>00503     }
<a name="l00504"></a>00504     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l00505"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#094f4f370c27c0fa0ed1e50a2352429f">00505</a>     <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#094f4f370c27c0fa0ed1e50a2352429f">PagingLandScapeOctreeSceneManager::~PagingLandScapeOctreeSceneManager</a>()
<a name="l00506"></a>00506     {
<a name="l00507"></a>00507         <span class="comment">// -- Changed by Steve</span>
<a name="l00508"></a>00508         <span class="comment">// Don't do this here, SceneManager will do it</span>
<a name="l00509"></a>00509         <span class="comment">/*</span>
<a name="l00510"></a>00510 <span class="comment">        if(mSceneRoot)</span>
<a name="l00511"></a>00511 <span class="comment">        delete mSceneRoot;</span>
<a name="l00512"></a>00512 <span class="comment">        */</span> 
<a name="l00513"></a>00513         <span class="comment">// --End Changes by Steve</span>
<a name="l00514"></a>00514 
<a name="l00515"></a>00515         <span class="keywordflow">if</span> (<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#025e48e12cf27df7365ad7431379757c">mPagingLandScapeOctree</a>)
<a name="l00516"></a>00516             <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#b2d89ef38b595e4680f27928d02617ca">deleteOctree</a> (<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#025e48e12cf27df7365ad7431379757c">mPagingLandScapeOctree</a>);
<a name="l00517"></a>00517 
<a name="l00518"></a>00518         VisiblesPerCam::iterator i = <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#5ec477d8c963263486101003d09f3c4f">mVisibles</a>.begin ();
<a name="l00519"></a>00519         <span class="keywordflow">while</span> (i != <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#5ec477d8c963263486101003d09f3c4f">mVisibles</a>.end())
<a name="l00520"></a>00520         {            
<a name="l00521"></a>00521            <span class="keyword">delete</span> (i-&gt;second);
<a name="l00522"></a>00522            ++i;
<a name="l00523"></a>00523         }
<a name="l00524"></a>00524         <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#5ec477d8c963263486101003d09f3c4f">mVisibles</a>.clear();
<a name="l00525"></a>00525         <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#404bc2c38ae1db0ad7c2ad080311ebca">mOctreeSet</a>.<a class="code" href="classOgre_1_1PoolSet.html#a521f42ff3f64086cb558914cc51a355">deletePool</a> ();
<a name="l00526"></a>00526     }
<a name="l00527"></a>00527     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l00528"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#e5fff22ed8681900a28c26d6613368e0">00528</a>     Camera * <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#e5fff22ed8681900a28c26d6613368e0">PagingLandScapeOctreeSceneManager::createCamera</a>(<span class="keyword">const</span> String &amp;name)
<a name="l00529"></a>00529     {
<a name="l00530"></a>00530         <span class="keywordflow">if</span> (mCameras.find(name) != mCameras.end())
<a name="l00531"></a>00531         {
<a name="l00532"></a>00532             OGRE_EXCEPT(
<a name="l00533"></a>00533                 Exception::ERR_DUPLICATE_ITEM,
<a name="l00534"></a>00534                 <span class="stringliteral">"A camera with the name "</span> + name + <span class="stringliteral">" already exists"</span>,
<a name="l00535"></a>00535                 <span class="stringliteral">"PagingLandScapeSceneManager::createCamera"</span>);
<a name="l00536"></a>00536         }
<a name="l00537"></a>00537         Camera * c = <span class="keyword">new</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeCamera.html">PagingLandScapeOctreeCamera</a>(name, <span class="keyword">this</span>);
<a name="l00538"></a>00538         mCameras.insert(CameraList::value_type(name, c));
<a name="l00539"></a>00539                 <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#063633e978bc29163a10a1cce94438ff">addCamera</a> (c);
<a name="l00540"></a>00540         <span class="keywordflow">return</span> c;
<a name="l00541"></a>00541     }
<a name="l00542"></a>00542     <span class="comment">//-----------------------------------------------------------------------</span>
<a name="l00543"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#063633e978bc29163a10a1cce94438ff">00543</a>     <span class="keywordtype">void</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#063633e978bc29163a10a1cce94438ff">PagingLandScapeOctreeSceneManager::addCamera</a>(Camera *cam)
<a name="l00544"></a>00544         {
<a name="l00545"></a>00545                 <a class="code" href="classOgre_1_1PagingLandScapeOctreeCamera.html">PagingLandScapeOctreeCamera</a> *c = static_cast &lt;PagingLandScapeOctreeCamera *&gt; (cam);
<a name="l00546"></a>00546                 <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#5ec477d8c963263486101003d09f3c4f">mVisibles</a>[c-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctreeCamera.html#0cdcf057d0b10724f12f654ec4e455eb">getId</a> ()] = <span class="keyword">new</span> <a class="code" href="namespaceOgre.html#e2dc1db4efdff1cd40f8f049d6a6e5ff">MovableObjectList</a>();
<a name="l00547"></a>00547         <span class="keywordflow">if</span> (!c-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctreeCamera.html#ca133e52cb2b0349c494948a176451d1">isRegisteredInOcclusionSystem</a>()
<a name="l00548"></a>00548                         &amp;&amp; c-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctreeCamera.html#2c135c2a76a14d27c9cddef559fe8474">needRegistrationInOcclusionSystem</a>())
<a name="l00549"></a>00549         {
<a name="l00550"></a>00550             <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#025e48e12cf27df7365ad7431379757c">mPagingLandScapeOctree</a>-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#7d586e9c5fd49176391575816e230f29">traversal</a>(<a class="code" href="classOgre_1_1RegisterCameraTraversal.html">RegisterCameraTraversal</a>(c));
<a name="l00551"></a>00551             c-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctreeCamera.html#29d8ffc297f2d0d8933f7c4e171f5d52">setRegisteredInOcclusionSystem</a>(<span class="keyword">true</span>);
<a name="l00552"></a>00552         }
<a name="l00553"></a>00553                 <span class="keywordflow">if</span> (!<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#ae4e0a77199645ce85c99dff9098962f">mCurrentOptionCamera</a>)
<a name="l00554"></a>00554                         <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#ae4e0a77199645ce85c99dff9098962f">mCurrentOptionCamera</a> = c;
<a name="l00555"></a>00555         }
<a name="l00556"></a>00556         <span class="comment">//-----------------------------------------------------------------------</span>
<a name="l00557"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#a9c78e22e14e66cbcc4da9981e402068">00557</a>         <span class="keywordtype">void</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#a9c78e22e14e66cbcc4da9981e402068">PagingLandScapeOctreeSceneManager::unregisterCamera</a>(<a class="code" href="classOgre_1_1PagingLandScapeOctreeCamera.html">PagingLandScapeOctreeCamera</a> *c)
<a name="l00558"></a>00558         {
<a name="l00559"></a>00559                 VisiblesPerCam::iterator i = <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#5ec477d8c963263486101003d09f3c4f">mVisibles</a>.find (c-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctreeCamera.html#0cdcf057d0b10724f12f654ec4e455eb">getId</a> ());
<a name="l00560"></a>00560                 <span class="keywordflow">if</span> (i != <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#5ec477d8c963263486101003d09f3c4f">mVisibles</a>.end())
<a name="l00561"></a>00561                 {            
<a name="l00562"></a>00562                         <span class="keyword">delete</span> (i-&gt;second);
<a name="l00563"></a>00563                         <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#5ec477d8c963263486101003d09f3c4f">mVisibles</a>.erase(i);
<a name="l00564"></a>00564                 }
<a name="l00565"></a>00565                 <span class="keywordflow">if</span> (c-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctreeCamera.html#ca133e52cb2b0349c494948a176451d1">isRegisteredInOcclusionSystem</a> ())
<a name="l00566"></a>00566                 {
<a name="l00567"></a>00567                         <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#025e48e12cf27df7365ad7431379757c">mPagingLandScapeOctree</a>-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#7d586e9c5fd49176391575816e230f29">traversal</a> (<a class="code" href="classOgre_1_1UnregisterCameraTraversal.html">UnregisterCameraTraversal</a>(c));
<a name="l00568"></a>00568                         c-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctreeCamera.html#29d8ffc297f2d0d8933f7c4e171f5d52">setRegisteredInOcclusionSystem</a> (<span class="keyword">false</span>);                   
<a name="l00569"></a>00569                 } 
<a name="l00570"></a>00570                 <span class="keywordflow">if</span> (<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#ae4e0a77199645ce85c99dff9098962f">mCurrentOptionCamera</a> == c)
<a name="l00571"></a>00571                         c = 0;
<a name="l00572"></a>00572         }
<a name="l00573"></a>00573     <span class="comment">//-----------------------------------------------------------------------</span>
<a name="l00574"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#35725d65c09795f685fe3df8c72fd2ea">00574</a>     <span class="keywordtype">void</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#35725d65c09795f685fe3df8c72fd2ea">PagingLandScapeOctreeSceneManager::destroyCamera</a>(Camera *cam)
<a name="l00575"></a>00575     {
<a name="l00576"></a>00576         <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#a9c78e22e14e66cbcc4da9981e402068">unregisterCamera</a> (static_cast &lt;PagingLandScapeOctreeCamera *&gt; (cam));
<a name="l00577"></a>00577         SceneManager::destroyCamera(cam);
<a name="l00578"></a>00578     }
<a name="l00579"></a>00579     <span class="comment">//-----------------------------------------------------------------------</span>
<a name="l00580"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#81fa7009a351135b74f89c16d401feac">00580</a>     <span class="keywordtype">void</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#35725d65c09795f685fe3df8c72fd2ea">PagingLandScapeOctreeSceneManager::destroyCamera</a>(<span class="keyword">const</span> String&amp; name)
<a name="l00581"></a>00581     {
<a name="l00582"></a>00582                 <span class="comment">// Find in list</span>
<a name="l00583"></a>00583        CameraList::iterator i = mCameras.find(name);
<a name="l00584"></a>00584        <span class="keywordflow">if</span> (i != mCameras.end())
<a name="l00585"></a>00585            {
<a name="l00586"></a>00586           <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#35725d65c09795f685fe3df8c72fd2ea">destroyCamera</a> (i-&gt;second);
<a name="l00587"></a>00587        }                  
<a name="l00588"></a>00588     }
<a name="l00589"></a>00589     <span class="comment">//-----------------------------------------------------------------------</span>
<a name="l00590"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#f7e72885e20ad3967a3827f05f9c1d6c">00590</a>     <span class="keywordtype">void</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#f7e72885e20ad3967a3827f05f9c1d6c">PagingLandScapeOctreeSceneManager::destroyAllCameras</a>(<span class="keywordtype">void</span>)
<a name="l00591"></a>00591     {
<a name="l00592"></a>00592                 CameraList::iterator i = mCameras.begin();
<a name="l00593"></a>00593                 <span class="keywordflow">for</span> (; i != mCameras.end(); ++i)
<a name="l00594"></a>00594                 {
<a name="l00595"></a>00595                         <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#a9c78e22e14e66cbcc4da9981e402068">unregisterCamera</a> (static_cast &lt;PagingLandScapeOctreeCamera *&gt; (i-&gt;second));
<a name="l00596"></a>00596                         <span class="comment">// Notify render system</span>
<a name="l00597"></a>00597                         mDestRenderSystem-&gt;_notifyCameraRemoved(i-&gt;second);
<a name="l00598"></a>00598                         <span class="keyword">delete</span> i-&gt;second;
<a name="l00599"></a>00599                 }
<a name="l00600"></a>00600         mCameras.clear ();
<a name="l00601"></a>00601     } 
<a name="l00602"></a>00602     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l00603"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#a23cc98c2cd8806337946fa2aadc3401">00603</a>     <span class="keywordtype">void</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#a23cc98c2cd8806337946fa2aadc3401">PagingLandScapeOctreeSceneManager::destroySceneNode</a>(<span class="keyword">const</span> String &amp;name)
<a name="l00604"></a>00604     {
<a name="l00605"></a>00605         <a class="code" href="classOgre_1_1PagingLandScapeOctreeNode.html">PagingLandScapeOctreeNode</a> * on = static_cast &lt; PagingLandScapeOctreeNode* &gt; (SceneManager::getSceneNode(name));
<a name="l00606"></a>00606 
<a name="l00607"></a>00607         <span class="keywordflow">if</span> (on != 0)
<a name="l00608"></a>00608             <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#24942637e90d570213bf1edcffdb6974">_removePagingLandScapeOctreeNode</a>(on);
<a name="l00609"></a>00609 
<a name="l00610"></a>00610         SceneManager::destroySceneNode(name);
<a name="l00611"></a>00611     }
<a name="l00612"></a>00612     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l00613"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#47cd127fabf0a3a4826a28b3c4f4b903">00613</a>     <span class="keywordtype">bool</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#47cd127fabf0a3a4826a28b3c4f4b903">PagingLandScapeOctreeSceneManager::getOptionValues</a>(<span class="keyword">const</span> String &amp; key, StringVector  &amp;refValueList)
<a name="l00614"></a>00614     {
<a name="l00615"></a>00615         <span class="keywordflow">return</span> SceneManager::getOptionValues(key, refValueList);
<a name="l00616"></a>00616     }
<a name="l00617"></a>00617     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l00618"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#816cb2addd8114c2089f7159fbc05166">00618</a>     <span class="keywordtype">bool</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#816cb2addd8114c2089f7159fbc05166">PagingLandScapeOctreeSceneManager::getOptionKeys</a>(StringVector &amp; refKeys)
<a name="l00619"></a>00619     {
<a name="l00620"></a>00620         SceneManager::getOptionKeys(refKeys);
<a name="l00621"></a>00621 
<a name="l00622"></a>00622         refKeys.push_back(<span class="stringliteral">"CullCamera"</span>);
<a name="l00623"></a>00623         refKeys.push_back(<span class="stringliteral">"Size"</span>);
<a name="l00624"></a>00624         refKeys.push_back(<span class="stringliteral">"ShowPagingLandScapeOctree"</span>);
<a name="l00625"></a>00625         refKeys.push_back(<span class="stringliteral">"Depth"</span>);
<a name="l00626"></a>00626 
<a name="l00627"></a>00627         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00628"></a>00628     }
<a name="l00629"></a>00629     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l00630"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#294d2958ea117811065f709ffb3a0f1d">00630</a>     <span class="keywordtype">void</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#294d2958ea117811065f709ffb3a0f1d">PagingLandScapeOctreeSceneManager::_updatePagingLandScapeOctreeNode</a>(<a class="code" href="classOgre_1_1PagingLandScapeOctreeNode.html">PagingLandScapeOctreeNode</a> * onode)
<a name="l00631"></a>00631     {
<a name="l00632"></a>00632         <span class="keyword">const</span> AxisAlignedBox box = onode-&gt;_getWorldAABB();
<a name="l00633"></a>00633 
<a name="l00634"></a>00634         <span class="keywordflow">if</span> (box.isNull())
<a name="l00635"></a>00635             <span class="keywordflow">return</span> ;
<a name="l00636"></a>00636 
<a name="l00637"></a>00637         assert (onode &amp;&amp; <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#025e48e12cf27df7365ad7431379757c">mPagingLandScapeOctree</a>);
<a name="l00638"></a>00638 
<a name="l00639"></a>00639         <span class="keywordflow">if</span> (onode-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctreeNode.html#b0f8e7f83ebecd16cfb7d9438f556a05">getOctant</a>() == 0)
<a name="l00640"></a>00640         {
<a name="l00641"></a>00641             <span class="comment">//if outside the PagingLandScapeOctree, force into the root node.</span>
<a name="l00642"></a>00642             <span class="keywordflow">if</span> (! onode-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctreeNode.html#24c9582ae8da676ff7da798aaa30fd3e">_isIn</a>(<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#025e48e12cf27df7365ad7431379757c">mPagingLandScapeOctree</a>-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#f501e0e599cea5c94b612dd6231c16f7">getBoundingBox</a>()))
<a name="l00643"></a>00643                 <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#025e48e12cf27df7365ad7431379757c">mPagingLandScapeOctree</a>-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#d86de9758c8bab0650694896c2017ddd">_addNode</a>(onode);
<a name="l00644"></a>00644             <span class="keywordflow">else</span>
<a name="l00645"></a>00645                 <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#bf6e4d60830d2d7812b1f5fcca777d2e">_addPagingLandScapeOctreeNode</a>(onode, <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#025e48e12cf27df7365ad7431379757c">mPagingLandScapeOctree</a>);
<a name="l00646"></a>00646             return ;
<a name="l00647"></a>00647         }
<a name="l00648"></a>00648 
<a name="l00649"></a>00649         <span class="keywordflow">if</span> (! onode-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctreeNode.html#24c9582ae8da676ff7da798aaa30fd3e">_isIn</a>(onode-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctreeNode.html#b0f8e7f83ebecd16cfb7d9438f556a05">getOctant</a>()-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#f501e0e599cea5c94b612dd6231c16f7">getBoundingBox</a>()))
<a name="l00650"></a>00650         {
<a name="l00651"></a>00651             <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#24942637e90d570213bf1edcffdb6974">_removePagingLandScapeOctreeNode</a>(onode);
<a name="l00652"></a>00652 
<a name="l00653"></a>00653             <span class="comment">//if outside the PagingLandScapeOctree, force into the root node.</span>
<a name="l00654"></a>00654             <span class="keywordflow">if</span> (! onode-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctreeNode.html#24c9582ae8da676ff7da798aaa30fd3e">_isIn</a>(<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#025e48e12cf27df7365ad7431379757c">mPagingLandScapeOctree</a>-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#f501e0e599cea5c94b612dd6231c16f7">getBoundingBox</a>()))
<a name="l00655"></a>00655                 <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#025e48e12cf27df7365ad7431379757c">mPagingLandScapeOctree</a>-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#d86de9758c8bab0650694896c2017ddd">_addNode</a>(onode);
<a name="l00656"></a>00656             <span class="keywordflow">else</span>
<a name="l00657"></a>00657                 <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#bf6e4d60830d2d7812b1f5fcca777d2e">_addPagingLandScapeOctreeNode</a>(onode, <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#025e48e12cf27df7365ad7431379757c">mPagingLandScapeOctree</a>);
<a name="l00658"></a>00658         }
<a name="l00659"></a>00659     }
<a name="l00660"></a>00660     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l00663"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#24942637e90d570213bf1edcffdb6974">00663</a> <span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#24942637e90d570213bf1edcffdb6974">PagingLandScapeOctreeSceneManager::_removePagingLandScapeOctreeNode</a>(<a class="code" href="classOgre_1_1PagingLandScapeOctreeNode.html">PagingLandScapeOctreeNode</a> * n)
<a name="l00664"></a>00664     {
<a name="l00665"></a>00665                 assert (n);
<a name="l00666"></a>00666                 <a class="code" href="classOgre_1_1PagingLandScapeOctree.html">PagingLandScapeOctree</a> * oct = n-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctreeNode.html#b0f8e7f83ebecd16cfb7d9438f556a05">getOctant</a>();
<a name="l00667"></a>00667                 <span class="keywordflow">if</span> (oct)
<a name="l00668"></a>00668                         oct-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#3412272f6ccfbc4b0ce9cd7c3c337e5b">_removeNode</a> (n);
<a name="l00669"></a>00669                 n-&gt;setOctant (0);
<a name="l00670"></a>00670                 <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#025afbbd082d42b1ed28903c663b0f47">unregisteredNodeInCamera</a> (n);
<a name="l00671"></a>00671     }
<a name="l00672"></a>00672     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l00673"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#0d79d4000dedb7ffa714d738d3261736">00673</a>     <span class="keywordtype">void</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#0d79d4000dedb7ffa714d738d3261736">PagingLandScapeOctreeSceneManager::_addPagingLandScapeOctreeMovableNode</a>(<a class="code" href="classOgre_1_1PagingLandScapeOctreeNode.html">PagingLandScapeOctreeNode</a> * n, 
<a name="l00674"></a>00674                                                                                  <a class="code" href="classOgre_1_1PagingLandScapeOctree.html">PagingLandScapeOctree</a> *octant, 
<a name="l00675"></a>00675                                                                                  <span class="keywordtype">int</span> depth)
<a name="l00676"></a>00676     {
<a name="l00677"></a>00677         <span class="keyword">const</span> AxisAlignedBox bx = n-&gt;_getWorldAABB();
<a name="l00678"></a>00678 
<a name="l00679"></a>00679         <span class="comment">//if the PagingLandScapeOctree is twice as big as the scene node,</span>
<a name="l00680"></a>00680         <span class="comment">//we will add it to a child.</span>
<a name="l00681"></a>00681         <span class="keywordflow">if</span> ((depth &lt; <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#46e93eae9353f96100f4f2bf25873466">mMaxDepth</a>) &amp;&amp; octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#61f66908e938673109a6b4953d81de8a">_isTwiceSize</a> (bx))
<a name="l00682"></a>00682         {
<a name="l00683"></a>00683             <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#0d79d4000dedb7ffa714d738d3261736">_addPagingLandScapeOctreeMovableNode</a>(n, 
<a name="l00684"></a>00684                                           octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#6dead4ed318123bd436c7696fed79fec">_getChildWhereBoxFits</a>(bx, <span class="keyword">this</span>), 
<a name="l00685"></a>00685                                           ++depth);
<a name="l00686"></a>00686         }
<a name="l00687"></a>00687         <span class="keywordflow">else</span>
<a name="l00688"></a>00688         {  
<a name="l00689"></a>00689 <span class="preprocessor">                #ifdef _VISIBILITYDEBUG   </span>
<a name="l00690"></a>00690 <span class="preprocessor"></span>                    n -&gt;setDebugCorners(<span class="keyword">this</span>);
<a name="l00691"></a>00691 <span class="preprocessor">                #endif //_VISIBILITYDEBUG    </span>
<a name="l00692"></a>00692 <span class="preprocessor"></span>
<a name="l00693"></a>00693 <span class="preprocessor">                #ifdef _DEBUG</span>
<a name="l00694"></a>00694 <span class="preprocessor"></span>                    std::cout &lt;&lt; <span class="stringliteral">"Depth Placement "</span> 
<a name="l00695"></a>00695                         &lt;&lt; StringConverter::toString (depth) 
<a name="l00696"></a>00696                         &lt;&lt; <span class="stringliteral">" \n"</span>;
<a name="l00697"></a>00697 <span class="preprocessor">                #endif _DEBUG</span>
<a name="l00698"></a>00698 <span class="preprocessor"></span>
<a name="l00699"></a>00699             octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#d86de9758c8bab0650694896c2017ddd">_addNode</a>(n);
<a name="l00700"></a>00700         }
<a name="l00701"></a>00701     }
<a name="l00702"></a>00702     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l00703"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#38ea9dfc55c11e3d81e27b6dfbd01256">00703</a>     <span class="keywordtype">void</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#38ea9dfc55c11e3d81e27b6dfbd01256">PagingLandScapeOctreeSceneManager::_addPagingLandScapeOctreeStaticNode</a>(<a class="code" href="classOgre_1_1PagingLandScapeOctreeNode.html">PagingLandScapeOctreeNode</a> * n, 
<a name="l00704"></a>00704                                                                                 <a class="code" href="classOgre_1_1PagingLandScapeOctree.html">PagingLandScapeOctree</a> *octant, 
<a name="l00705"></a>00705                                                                                 <span class="keywordtype">int</span> depth)
<a name="l00706"></a>00706     {
<a name="l00707"></a>00707         <span class="keyword">const</span> AxisAlignedBox bx = n-&gt;_getWorldAABB();
<a name="l00708"></a>00708 
<a name="l00709"></a>00709         <span class="comment">//if the PagingLandScapeOctree is twice as big as the scene node,</span>
<a name="l00710"></a>00710         <span class="comment">//we will add it to a child.</span>
<a name="l00711"></a>00711         <span class="keywordflow">if</span> ((depth &lt; <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#46e93eae9353f96100f4f2bf25873466">mMaxDepth</a>) &amp;&amp; octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#19f1de4cd26f1bf0447836d2c75160b7">_isTwiceCullSize</a> (bx))
<a name="l00712"></a>00712         {
<a name="l00713"></a>00713             <span class="keywordflow">if</span> (octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#e0e4aabdac15d1921ee2aa2cb20ef0da">_isNotCrossingAxes</a>(bx))
<a name="l00714"></a>00714                         {
<a name="l00715"></a>00715                 <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#38ea9dfc55c11e3d81e27b6dfbd01256">_addPagingLandScapeOctreeStaticNode</a>(n, 
<a name="l00716"></a>00716                                                     octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#a04deca8fd8a129c24f3d0e4cc941868">_getCullChildWhereBoxFits</a>(bx, <span class="keyword">this</span>), 
<a name="l00717"></a>00717                                                     ++depth);
<a name="l00718"></a>00718                         }
<a name="l00719"></a>00719             <span class="keywordflow">else</span>
<a name="l00720"></a>00720             {
<a name="l00721"></a>00721                 <span class="comment">// re-insert it as a moving node, therefore avoiding crossing problem.</span>
<a name="l00722"></a>00722                 n-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctreeNode.html#cd7b495ac682dd7026c6817c837f1a33">setStaticCulling</a> (<span class="keyword">false</span>);
<a name="l00723"></a>00723                 <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#0d79d4000dedb7ffa714d738d3261736">_addPagingLandScapeOctreeMovableNode</a>(n, 
<a name="l00724"></a>00724                                                     <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#025e48e12cf27df7365ad7431379757c">mPagingLandScapeOctree</a>, 
<a name="l00725"></a>00725                                                     0);
<a name="l00726"></a>00726             }
<a name="l00727"></a>00727         }
<a name="l00728"></a>00728         <span class="keywordflow">else</span>
<a name="l00729"></a>00729         {  
<a name="l00730"></a>00730 <span class="preprocessor">            #ifdef _VISIBILITYDEBUG   </span>
<a name="l00731"></a>00731 <span class="preprocessor"></span>                n -&gt;setDebugCorners(<span class="keyword">this</span>);
<a name="l00732"></a>00732 <span class="preprocessor">            #endif //_VISIBILITYDEBUG    </span>
<a name="l00733"></a>00733 <span class="preprocessor"></span>            octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#d86de9758c8bab0650694896c2017ddd">_addNode</a>(n);
<a name="l00734"></a>00734         }
<a name="l00735"></a>00735     }
<a name="l00736"></a>00736     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l00737"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#bf6e4d60830d2d7812b1f5fcca777d2e">00737</a>     <span class="keywordtype">void</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#bf6e4d60830d2d7812b1f5fcca777d2e">PagingLandScapeOctreeSceneManager::_addPagingLandScapeOctreeNode</a>(<a class="code" href="classOgre_1_1PagingLandScapeOctreeNode.html">PagingLandScapeOctreeNode</a> * n, <a class="code" href="classOgre_1_1PagingLandScapeOctree.html">PagingLandScapeOctree</a> *octant, <span class="keywordtype">int</span> depth)
<a name="l00738"></a>00738     {
<a name="l00739"></a>00739         assert (n &amp;&amp; octant);
<a name="l00740"></a>00740         <span class="keywordflow">if</span> (n-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctreeNode.html#29c6504ef3f70668043440c1db681d1a">isStaticNode</a> ())
<a name="l00741"></a>00741             <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#38ea9dfc55c11e3d81e27b6dfbd01256">_addPagingLandScapeOctreeStaticNode</a>(n, octant, depth);
<a name="l00742"></a>00742         <span class="keywordflow">else</span>
<a name="l00743"></a>00743                         <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#0d79d4000dedb7ffa714d738d3261736">_addPagingLandScapeOctreeMovableNode</a>(n, octant, depth);
<a name="l00744"></a>00744                 <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#b6b5a836923646741821edc65373e221">registeredNodeInCamera</a> (n);
<a name="l00745"></a>00745     }
<a name="l00746"></a>00746     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l00747"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#5c10df19315e2496d5b276d31ca2cc0a">00747</a>     SceneNode * <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#5c10df19315e2496d5b276d31ca2cc0a">PagingLandScapeOctreeSceneManager::createSceneNode</a>(<span class="keywordtype">void</span>)
<a name="l00748"></a>00748         {
<a name="l00749"></a>00749         <a class="code" href="classOgre_1_1PagingLandScapeOctreeNode.html">PagingLandScapeOctreeNode</a> * on = <span class="keyword">new</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeNode.html">PagingLandScapeOctreeNode</a>(<span class="keyword">this</span>);
<a name="l00750"></a>00750                 mSceneNodes[ on-&gt;getName() ] = on; 
<a name="l00751"></a>00751         <span class="keywordflow">return</span> on;
<a name="l00752"></a>00752     }
<a name="l00753"></a>00753     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l00754"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#fe1ceef9d9265c7a28d409d79b2cea06">00754</a>     SceneNode * <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#5c10df19315e2496d5b276d31ca2cc0a">PagingLandScapeOctreeSceneManager::createSceneNode</a>(<span class="keyword">const</span> String &amp;name)
<a name="l00755"></a>00755     {
<a name="l00756"></a>00756                 <span class="comment">// Check name not used</span>
<a name="l00757"></a>00757             <span class="keywordflow">if</span> (mSceneNodes.find(name) != mSceneNodes.end())
<a name="l00758"></a>00758             {
<a name="l00759"></a>00759                     OGRE_EXCEPT(
<a name="l00760"></a>00760                                 Exception::ERR_DUPLICATE_ITEM,
<a name="l00761"></a>00761                                 <span class="stringliteral">"A scene node with the name "</span> + name + <span class="stringliteral">" already exists"</span>,
<a name="l00762"></a>00762                                 <span class="stringliteral">"PagingLandScapeOctreeSceneManager::createSceneNode"</span> );
<a name="l00763"></a>00763                 }
<a name="l00764"></a>00764         <a class="code" href="classOgre_1_1PagingLandScapeOctreeNode.html">PagingLandScapeOctreeNode</a> * on = <span class="keyword">new</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeNode.html">PagingLandScapeOctreeNode</a>(<span class="keyword">this</span>, name);
<a name="l00765"></a>00765                 mSceneNodes[ on-&gt;getName() ] = on; 
<a name="l00766"></a>00766         <span class="keywordflow">return</span> on;
<a name="l00767"></a>00767     }
<a name="l00768"></a>00768     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l00769"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#b6b5a836923646741821edc65373e221">00769</a>     <span class="keywordtype">void</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#b6b5a836923646741821edc65373e221">PagingLandScapeOctreeSceneManager::registeredNodeInCamera</a>(<a class="code" href="classOgre_1_1OcclusionElement.html">OcclusionElement</a> *on)
<a name="l00770"></a>00770     {
<a name="l00771"></a>00771          <span class="comment">// register existing camera in nodes</span>
<a name="l00772"></a>00772         <span class="keywordtype">bool</span> isRegistered = <span class="keyword">false</span>;
<a name="l00773"></a>00773         <span class="keywordflow">for</span> (CameraList::iterator it = mCameras.begin(); it != mCameras.end(); ++it)
<a name="l00774"></a>00774         {
<a name="l00775"></a>00775             <span class="comment">// Notify occlusion system</span>
<a name="l00776"></a>00776             <a class="code" href="classOgre_1_1PagingLandScapeOctreeCamera.html">PagingLandScapeOctreeCamera</a> *c = static_cast &lt;PagingLandScapeOctreeCamera *&gt; (it-&gt;second);
<a name="l00777"></a>00777             assert (c);
<a name="l00778"></a>00778             <span class="keywordflow">if</span> (c-&gt;isRegisteredInOcclusionSystem ())
<a name="l00779"></a>00779             {
<a name="l00780"></a>00780                 on-&gt;<a class="code" href="classOgre_1_1OcclusionElement.html#e4f76b140e5e148c371d33835fdfee8a">traversal</a> (<a class="code" href="classOgre_1_1RegisterCameraTraversal.html">RegisterCameraTraversal</a>(c));
<a name="l00781"></a>00781                 isRegistered = <span class="keyword">true</span>;
<a name="l00782"></a>00782             }
<a name="l00783"></a>00783         }
<a name="l00784"></a>00784         on-&gt;<a class="code" href="classOgre_1_1OcclusionElement.html#3d23d67f424bca93bdf5effde48fd98c">setRegisteredtoCam</a> (isRegistered);      
<a name="l00785"></a>00785         }
<a name="l00786"></a>00786     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l00787"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#025afbbd082d42b1ed28903c663b0f47">00787</a>     <span class="keywordtype">void</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#025afbbd082d42b1ed28903c663b0f47">PagingLandScapeOctreeSceneManager::unregisteredNodeInCamera</a>(<a class="code" href="classOgre_1_1OcclusionElement.html">OcclusionElement</a> *on)
<a name="l00788"></a>00788     {
<a name="l00789"></a>00789          <span class="comment">// register existing camera in nodes</span>
<a name="l00790"></a>00790         <span class="keywordflow">for</span> (CameraList::iterator it = mCameras.begin();it != mCameras.end(); ++it)
<a name="l00791"></a>00791         {
<a name="l00792"></a>00792             <span class="comment">// Notify occlusion system</span>
<a name="l00793"></a>00793             <a class="code" href="classOgre_1_1PagingLandScapeOctreeCamera.html">PagingLandScapeOctreeCamera</a> *c = static_cast &lt;PagingLandScapeOctreeCamera *&gt; (it-&gt;second);
<a name="l00794"></a>00794             assert (c);
<a name="l00795"></a>00795             <span class="keywordflow">if</span> (c-&gt;isRegisteredInOcclusionSystem ())
<a name="l00796"></a>00796                 on-&gt;<a class="code" href="classOgre_1_1OcclusionElement.html#e4f76b140e5e148c371d33835fdfee8a">traversal</a> (<a class="code" href="classOgre_1_1UnregisterCameraTraversal.html">UnregisterCameraTraversal</a>(c));
<a name="l00797"></a>00797         }   
<a name="l00798"></a>00798         on-&gt;<a class="code" href="classOgre_1_1OcclusionElement.html#3d23d67f424bca93bdf5effde48fd98c">setRegisteredtoCam</a> (<span class="keyword">false</span>);               
<a name="l00799"></a>00799         }
<a name="l00800"></a>00800     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l00801"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#2c492a0152d785e88e85165c8fa95025">00801</a>     <span class="keywordtype">void</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#2c492a0152d785e88e85165c8fa95025">PagingLandScapeOctreeSceneManager::_updateSceneGraph</a>(Camera * cam)
<a name="l00802"></a>00802     {
<a name="l00803"></a>00803         SceneManager::_updateSceneGraph(cam);
<a name="l00804"></a>00804     }
<a name="l00805"></a>00805     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l00806"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#27414bba5a110064cc52f6c9ffb590ba">00806</a>     <span class="keywordtype">void</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#27414bba5a110064cc52f6c9ffb590ba">PagingLandScapeOctreeSceneManager::enableHardwareOcclusionTests</a>()
<a name="l00807"></a>00807     { 
<a name="l00808"></a>00808         Camera * <span class="keyword">const</span> c_cam = mCameraInProgress;
<a name="l00809"></a>00809 
<a name="l00810"></a>00810         <span class="comment">// make sure we always occlude in SOLID MODE</span>
<a name="l00811"></a>00811                 <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#eb6f0556f6196e7a9482e31bb6d96d2b">mCamDetail</a> =  c_cam-&gt;getPolygonMode ();
<a name="l00812"></a>00812                 <span class="keywordflow">if</span> (<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#eb6f0556f6196e7a9482e31bb6d96d2b">mCamDetail</a> != PM_SOLID)
<a name="l00813"></a>00813                 {                       
<a name="l00814"></a>00814                         <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#ef68602265631ce6e77bae3c13c70dd7">mOcclusion</a>.<a class="code" href="classOgre_1_1Occlusion.html#b0b79d9b65c9220b92aa046734d88224">setIfNotSolidScene</a>   (<span class="keyword">true</span>);
<a name="l00815"></a>00815                         c_cam-&gt;setPolygonMode (PM_SOLID);
<a name="l00816"></a>00816                 }
<a name="l00817"></a>00817                 <span class="keywordflow">else</span> 
<a name="l00818"></a>00818                 {
<a name="l00819"></a>00819                         <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#ef68602265631ce6e77bae3c13c70dd7">mOcclusion</a>.<a class="code" href="classOgre_1_1Occlusion.html#b0b79d9b65c9220b92aa046734d88224">setIfNotSolidScene</a>   (<span class="keyword">false</span>);
<a name="l00820"></a>00820                 }
<a name="l00821"></a>00821 
<a name="l00822"></a>00822         <span class="comment">//#define HWOCCLUSIONRTT</span>
<a name="l00823"></a>00823 <span class="preprocessor">        #ifdef HWOCCLUSIONRTT</span>
<a name="l00824"></a>00824 <span class="preprocessor"></span>
<a name="l00825"></a>00825                         <span class="keyword">const</span> Viewport * <span class="keyword">const</span> c_camViewPort = c_cam-&gt;getViewport();
<a name="l00826"></a>00826                         assert (c_camViewPort);
<a name="l00827"></a>00827             <span class="keywordflow">if</span> (<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#10047da971b94ff3d29aecd66fb375b1">mOcclusionDepth</a> == 0)
<a name="l00828"></a>00828             {
<a name="l00829"></a>00829                 <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#10047da971b94ff3d29aecd66fb375b1">mOcclusionDepth</a> = mDestRenderSystem-&gt;
<a name="l00830"></a>00830                     createRenderTexture(
<a name="l00831"></a>00831                     <span class="stringliteral">"OcclusionDepthTexture"</span>, 
<a name="l00832"></a>00832                     c_camViewPort-&gt;getActualWidth() / 8, 
<a name="l00833"></a>00833                     c_camViewPort-&gt;getActualHeight() / 8, 
<a name="l00834"></a>00834                     TEX_TYPE_2D, 
<a name="l00835"></a>00835                     PF_DEPTH);
<a name="l00836"></a>00836 
<a name="l00837"></a>00837 
<a name="l00838"></a>00838                 <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#10047da971b94ff3d29aecd66fb375b1">mOcclusionDepth</a>-&gt;setAutoUpdated (<span class="keyword">false</span>);
<a name="l00839"></a>00839                 <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#10047da971b94ff3d29aecd66fb375b1">mOcclusionDepth</a>-&gt;setActive (<span class="keyword">false</span>);
<a name="l00840"></a>00840 
<a name="l00841"></a>00841                 <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#71db5732f9b7bc7700f6570e18edc86b">mOcclusionCamera</a> = <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#e5fff22ed8681900a28c26d6613368e0">createCamera</a> (<span class="stringliteral">"OcclusionDepthTextureCamera"</span>);
<a name="l00842"></a>00842                 Viewport * <span class="keyword">const</span> v = <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#10047da971b94ff3d29aecd66fb375b1">mOcclusionDepth</a>-&gt;addViewport(<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#71db5732f9b7bc7700f6570e18edc86b">mOcclusionCamera</a>);
<a name="l00843"></a>00843                                 assert (v);
<a name="l00844"></a>00844                 v-&gt;setOverlaysEnabled (<span class="keyword">false</span>);
<a name="l00845"></a>00845                 v-&gt;setClearEveryFrame(<span class="keyword">false</span>);
<a name="l00846"></a>00846                 v-&gt;setBackgroundColour(ColourValue::Black);
<a name="l00847"></a>00847 
<a name="l00848"></a>00848 <span class="preprocessor">#define RENDERCOLOR</span>
<a name="l00849"></a>00849 <span class="preprocessor"></span><span class="preprocessor">#ifdef RENDERCOLOR</span>
<a name="l00850"></a>00850 <span class="preprocessor"></span>                    MaterialPtr mat = MaterialManager::getSingleton().create (
<a name="l00851"></a>00851                                         <span class="stringliteral">"OcclusionDepthTextureMat"</span>,
<a name="l00852"></a>00852                                         ResourceGroupManager::DEFAULT_RESOURCE_GROUP_NAME);
<a name="l00853"></a>00853                     mat-&gt;getTechnique(0)-&gt;getPass(0)-&gt;createTextureUnitState(<span class="stringliteral">"OcclusionDepthTexture"</span>);
<a name="l00854"></a>00854 
<a name="l00855"></a>00855                     Overlay *OcclusionDepthOverlay = OverlayManager::getSingleton ().create(<span class="stringliteral">"OcclusionDepthOverlay"</span>); 
<a name="l00856"></a>00856                     OverlayElement *OcclusionDepthPanel = 
<a name="l00857"></a>00857                     OverlayManager::getSingleton ().createOverlayElement (<span class="stringliteral">"Panel"</span>, 
<a name="l00858"></a>00858                                                                             <span class="stringliteral">"OcclusionDepthPanel"</span>, 
<a name="l00859"></a>00859                                                                             <span class="keyword">false</span>); 
<a name="l00860"></a>00860                     OcclusionDepthPanel-&gt;setMaterialName (<span class="stringliteral">"OcclusionDepthTextureMat"</span>); 
<a name="l00861"></a>00861                     OcclusionDepthOverlay-&gt;add2D ((OverlayContainer *)OcclusionDepthPanel); 
<a name="l00862"></a>00862                     OcclusionDepthOverlay-&gt;show ();
<a name="l00863"></a>00863 
<a name="l00864"></a>00864                     <span class="comment">//OcclusionDepthOverlay-&gt;setScale (0.5f, 0.5f);</span>
<a name="l00865"></a>00865                     OcclusionDepthPanel-&gt;setPosition (0.8, 0.8);
<a name="l00866"></a>00866 <span class="preprocessor">#endif //RENDERCOLOR</span>
<a name="l00867"></a>00867 <span class="preprocessor"></span>
<a name="l00868"></a>00868                 <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#71db5732f9b7bc7700f6570e18edc86b">mOcclusionCamera</a>-&gt;setNearClipDistance(c_cam-&gt;getNearClipDistance());
<a name="l00869"></a>00869                 <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#71db5732f9b7bc7700f6570e18edc86b">mOcclusionCamera</a>-&gt;setFarClipDistance(c_cam-&gt;getFarClipDistance());
<a name="l00870"></a>00870                 <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#71db5732f9b7bc7700f6570e18edc86b">mOcclusionCamera</a>-&gt;setAspectRatio(
<a name="l00871"></a>00871                     (Real)c_camViewPort-&gt;getActualWidth() /  c_camViewPort-&gt;getActualHeight());
<a name="l00872"></a>00872             }
<a name="l00873"></a>00873 
<a name="l00874"></a>00874             <span class="comment">// copy camera characteristics to occlusion camera.</span>
<a name="l00875"></a>00875             <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#71db5732f9b7bc7700f6570e18edc86b">mOcclusionCamera</a>-&gt;setPosition (c_cam-&gt;getWorldPosition ());
<a name="l00876"></a>00876             <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#71db5732f9b7bc7700f6570e18edc86b">mOcclusionCamera</a>-&gt;setOrientation (c_cam-&gt;getWorldOrientation ());
<a name="l00877"></a>00877             <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#71db5732f9b7bc7700f6570e18edc86b">mOcclusionCamera</a>-&gt;setNearClipDistance(c_cam-&gt;getNearClipDistance());
<a name="l00878"></a>00878             <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#71db5732f9b7bc7700f6570e18edc86b">mOcclusionCamera</a>-&gt;setFarClipDistance(c_cam-&gt;getFarClipDistance());  
<a name="l00879"></a>00879 
<a name="l00880"></a>00880 
<a name="l00881"></a>00881             mDestRenderSystem-&gt;_setViewport(<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#71db5732f9b7bc7700f6570e18edc86b">mOcclusionCamera</a>-&gt;getViewport ());
<a name="l00882"></a>00882             mDestRenderSystem-&gt;_setWorldMatrix(Matrix4::IDENTITY);
<a name="l00883"></a>00883             mDestRenderSystem-&gt;_setViewMatrix(c_cam-&gt;getViewMatrix());
<a name="l00884"></a>00884             mDestRenderSystem-&gt;_setProjectionMatrix(c_cam-&gt;getProjectionMatrix());
<a name="l00885"></a>00885 
<a name="l00886"></a>00886             mDestRenderSystem-&gt;_beginFrame();
<a name="l00887"></a>00887 
<a name="l00888"></a>00888             mDestRenderSystem-&gt;clearFrameBuffer (FBT_DEPTH | FBT_COLOUR, 
<a name="l00889"></a>00889             <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#71db5732f9b7bc7700f6570e18edc86b">mOcclusionCamera</a>-&gt;getViewport ()-&gt;getBackgroundColour ());
<a name="l00890"></a>00890 
<a name="l00891"></a>00891 <span class="preprocessor">        #else //HWOCCLUSIONRTT</span>
<a name="l00892"></a>00892 <span class="preprocessor"></span>
<a name="l00893"></a>00893                         assert (c_cam-&gt;getViewport());
<a name="l00894"></a>00894             mDestRenderSystem-&gt;_setViewport(c_cam-&gt;getViewport());
<a name="l00895"></a>00895             mDestRenderSystem-&gt;clearFrameBuffer (FBT_DEPTH | FBT_COLOUR, 
<a name="l00896"></a>00896                                                 c_cam-&gt;getViewport ()-&gt;getBackgroundColour (),<span class="comment">//color</span>
<a name="l00897"></a>00897                                                 1.0f,<span class="comment">//depth</span>
<a name="l00898"></a>00898                                                 0);<span class="comment">//stencil</span>
<a name="l00899"></a>00899             mDestRenderSystem-&gt;_beginFrame();
<a name="l00900"></a>00900             assert (c_cam-&gt;getViewport()-&gt;getClearEveryFrame () == <span class="keyword">false</span>);
<a name="l00901"></a>00901 <span class="preprocessor">        #endif //HWOCCLUSIONRTT</span>
<a name="l00902"></a>00902 <span class="preprocessor"></span>
<a name="l00903"></a>00903                 mDestRenderSystem-&gt;_beginGeometryCount();
<a name="l00904"></a>00904 
<a name="l00905"></a>00905     }
<a name="l00906"></a>00906     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l00907"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#b5ef19eb07e55047fe7bd51712d93c77">00907</a>     <span class="keywordtype">void</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#b5ef19eb07e55047fe7bd51712d93c77">PagingLandScapeOctreeSceneManager::disableHardwareOcclusionTests</a>()
<a name="l00908"></a>00908     {
<a name="l00909"></a>00909         <a class="code" href="classOgre_1_1PagingLandScapeOctreeCamera.html">PagingLandScapeOctreeCamera</a> * <span class="keyword">const</span> octreeCam = static_cast &lt;PagingLandScapeOctreeCamera *&gt; (mCameraInProgress);
<a name="l00910"></a>00910         
<a name="l00911"></a>00911                 assert (octreeCam-&gt;getViewport ());
<a name="l00912"></a>00912 <span class="preprocessor">        #ifdef HWOCCLUSIONRTT</span>
<a name="l00913"></a>00913 <span class="preprocessor"></span>
<a name="l00914"></a>00914                 mDestRenderSystem-&gt;_endFrame();
<a name="l00915"></a>00915                 mDestRenderSystem-&gt;_setViewport(octreeCam-&gt;getViewport ());
<a name="l00916"></a>00916 
<a name="l00917"></a>00917 <span class="preprocessor">        #else //HWOCCLUSIONRTT</span>
<a name="l00918"></a>00918 <span class="preprocessor"></span>                mDestRenderSystem-&gt;_endFrame();
<a name="l00919"></a>00919 <span class="preprocessor">                #endif //HWOCCLUSIONRTT</span>
<a name="l00920"></a>00920 <span class="preprocessor"></span>
<a name="l00921"></a>00921                 <span class="keywordflow">if</span> (<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#eb6f0556f6196e7a9482e31bb6d96d2b">mCamDetail</a> != PM_SOLID)
<a name="l00922"></a>00922                 {
<a name="l00923"></a>00923                         mDestRenderSystem-&gt;clearFrameBuffer (FBT_DEPTH | FBT_COLOUR, 
<a name="l00924"></a>00924                                                                                                 octreeCam-&gt;getViewport ()-&gt;getBackgroundColour (),<span class="comment">//color</span>
<a name="l00925"></a>00925                                                                                                 1.0f,<span class="comment">//depth</span>
<a name="l00926"></a>00926                                                                                                 0);<span class="comment">//stencil</span>
<a name="l00927"></a>00927                 }       
<a name="l00928"></a>00928         
<a name="l00929"></a>00929         <span class="comment">// make sure we restore previous detail level.</span>
<a name="l00930"></a>00930         octreeCam-&gt;setPolygonMode (<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#eb6f0556f6196e7a9482e31bb6d96d2b">mCamDetail</a>);
<a name="l00931"></a>00931 
<a name="l00932"></a>00932                 <span class="comment">// Notify camera or vis faces</span>
<a name="l00933"></a>00933                 octreeCam-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctreeCamera.html#8f8a2864df53ecb3738ab531f7d289b8">_addCHCRenderedFaces</a>(mDestRenderSystem-&gt;_getFaceCount());
<a name="l00934"></a>00934         }
<a name="l00935"></a>00935     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l00936"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#e3cb89f745058014011346e3e94bb4c1">00936</a>     <span class="keywordtype">void</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#e3cb89f745058014011346e3e94bb4c1">PagingLandScapeOctreeSceneManager::_findVisibleObjects</a>(Camera * cam, <span class="keywordtype">bool</span> onlyShadowCasters)
<a name="l00937"></a>00937     {
<a name="l00938"></a>00938         RenderQueue *q = SceneManager::getRenderQueue();
<a name="l00939"></a>00939        
<a name="l00940"></a>00940 
<a name="l00941"></a>00941                 <a class="code" href="classOgre_1_1PagingLandScapeOctreeCamera.html">PagingLandScapeOctreeCamera</a> * <span class="keyword">const</span> octreeCam = static_cast &lt;PagingLandScapeOctreeCamera *&gt; (cam);
<a name="l00942"></a>00942                 
<a name="l00943"></a>00943         assert (<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#5ec477d8c963263486101003d09f3c4f">mVisibles</a>.find(octreeCam-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctreeCamera.html#0cdcf057d0b10724f12f654ec4e455eb">getId</a>()) != <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#5ec477d8c963263486101003d09f3c4f">mVisibles</a>.end());
<a name="l00944"></a>00944         <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#8842d1618d29e24186054ef258225a5d">mCamInProgressVisibles</a> = <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#5ec477d8c963263486101003d09f3c4f">mVisibles</a>[octreeCam-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctreeCamera.html#0cdcf057d0b10724f12f654ec4e455eb">getId</a>()];
<a name="l00945"></a>00945         assert (mCamInProgressVisibles);
<a name="l00946"></a>00946 
<a name="l00947"></a>00947 <span class="preprocessor">        #ifdef _VISIBILITYDEBUG</span>
<a name="l00948"></a>00948 <span class="preprocessor"></span>            <span class="comment">/*</span>
<a name="l00949"></a>00949 <span class="comment">                if (!octreeCam-&gt;isRegisteredInOcclusionSystem())</span>
<a name="l00950"></a>00950 <span class="comment">                {</span>
<a name="l00951"></a>00951 <span class="comment">                    mPagingLandScapeOctree-&gt;traversal(RegisterCameraTraversal(octreeCam));</span>
<a name="l00952"></a>00952 <span class="comment">                    octreeCam-&gt;setRegisteredInOcclusionSystem(true);</span>
<a name="l00953"></a>00953 <span class="comment">                }</span>
<a name="l00954"></a>00954 <span class="comment">            */</span>
<a name="l00955"></a>00955             mBoxes.clear();
<a name="l00956"></a>00956             <span class="keywordflow">if</span> (mCullCamera)
<a name="l00957"></a>00957             {
<a name="l00958"></a>00958                 <span class="keywordflow">if</span> (getCamera(<span class="stringliteral">"CullCamera"</span>))
<a name="l00959"></a>00959                     cam = getCamera(<span class="stringliteral">"CullCamera"</span>);
<a name="l00960"></a>00960             }
<a name="l00961"></a>00961 <span class="preprocessor">        #endif // _VISIBILITYDEBUG</span>
<a name="l00962"></a>00962 <span class="preprocessor"></span>
<a name="l00963"></a>00963         <span class="keywordflow">if</span> (<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#025e48e12cf27df7365ad7431379757c">mPagingLandScapeOctree</a>-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#8feeb9cff56c4c7fd9331712f4addbf6">hasChildren</a> ())
<a name="l00964"></a>00964         {
<a name="l00965"></a>00965             <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#2d799806cd5a0879bcbdd479c1f19d02">mNumObjects</a> = 0;
<a name="l00966"></a>00966 
<a name="l00967"></a>00967             <span class="comment">// should find a way to be sure that </span>
<a name="l00968"></a>00968             <span class="comment">// it's a new frame, and not just a camera change or something.</span>
<a name="l00969"></a>00969             <span class="keywordflow">if</span> (<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#ef68602265631ce6e77bae3c13c70dd7">mOcclusion</a>.<a class="code" href="classOgre_1_1Occlusion.html#50dc2a6c0a4ff99e7916a4c55075a2fa">nextFrame</a> (static_cast &lt; PagingLandScapeOctreeCamera * &gt; (cam),
<a name="l00970"></a>00970                                       mCamInProgressVisibles,
<a name="l00971"></a>00971                                       onlyShadowCasters, 
<a name="l00972"></a>00972                                       q))
<a name="l00973"></a>00973             {
<a name="l00974"></a>00974                 <span class="keywordflow">switch</span> (octreeCam-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctreeCamera.html#648a9490fcdd760d532825f48555c4f5">getOcclusionMode</a>())
<a name="l00975"></a>00975                 {
<a name="l00976"></a>00976                 <span class="keywordflow">case</span> CHC:
<a name="l00977"></a>00977                     {                     
<a name="l00978"></a>00978                         <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#27414bba5a110064cc52f6c9ffb590ba">enableHardwareOcclusionTests</a>();
<a name="l00979"></a>00979                         <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#ef68602265631ce6e77bae3c13c70dd7">mOcclusion</a>.<a class="code" href="classOgre_1_1Occlusion.html#3274cb42f970ea607bb4f429f63d2c30">CHCtraversal</a> (<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#025e48e12cf27df7365ad7431379757c">mPagingLandScapeOctree</a>);
<a name="l00980"></a>00980                                                 <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#b5ef19eb07e55047fe7bd51712d93c77">disableHardwareOcclusionTests</a>();
<a name="l00981"></a>00981                                                 q-&gt;clear();
<a name="l00982"></a>00982 
<a name="l00983"></a>00983 <span class="preprocessor">                                                #ifdef _VISIBILITYDEBUG</span>
<a name="l00984"></a>00984 <span class="preprocessor"></span>                                                <span class="keywordflow">if</span> (mCullDebug &amp;&amp; cam-&gt;getViewport ())
<a name="l00985"></a>00985                                                 {
<a name="l00986"></a>00986                             cam-&gt;getViewport ()-&gt;getTarget ()-&gt;setDebugText(
<a name="l00987"></a>00987                                 <span class="stringliteral">"CHC = "</span> + StringConverter::toString(<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#ef68602265631ce6e77bae3c13c70dd7">mOcclusion</a>.object_cnt) + <span class="stringliteral">", t="</span> +
<a name="l00988"></a>00988                                 StringConverter::toString(<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#ef68602265631ce6e77bae3c13c70dd7">mOcclusion</a>.traversed_nodes_cnt) + <span class="stringliteral">", f="</span> +
<a name="l00989"></a>00989                                 StringConverter::toString(<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#ef68602265631ce6e77bae3c13c70dd7">mOcclusion</a>.frustum_culled_nodes_cnt) + <span class="stringliteral">", q="</span> +
<a name="l00990"></a>00990                                 StringConverter::toString(<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#ef68602265631ce6e77bae3c13c70dd7">mOcclusion</a>.query_cnt)
<a name="l00991"></a>00991                                             );
<a name="l00992"></a>00992                                                 }
<a name="l00993"></a>00993 <span class="preprocessor">                        #endif //_VISIBILITYDEBUG</span>
<a name="l00994"></a>00994 <span class="preprocessor"></span>                    }
<a name="l00995"></a>00995                     <span class="keywordflow">break</span>;
<a name="l00996"></a>00996                 <span class="keywordflow">case</span> CHC_CONSERVATIVE:
<a name="l00997"></a>00997                     {                     
<a name="l00998"></a>00998                         <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#27414bba5a110064cc52f6c9ffb590ba">enableHardwareOcclusionTests</a>();
<a name="l00999"></a>00999                         <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#ef68602265631ce6e77bae3c13c70dd7">mOcclusion</a>.<a class="code" href="classOgre_1_1Occlusion.html#139a29c3613f99db7e76311de634d9d2">CHCtraversalConservative</a> (<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#025e48e12cf27df7365ad7431379757c">mPagingLandScapeOctree</a>);
<a name="l01000"></a>01000                                                 <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#b5ef19eb07e55047fe7bd51712d93c77">disableHardwareOcclusionTests</a>();
<a name="l01001"></a>01001                                                 q-&gt;clear();
<a name="l01002"></a>01002 
<a name="l01003"></a>01003 <span class="preprocessor">                        #ifdef _VISIBILITYDEBUG</span>
<a name="l01004"></a>01004 <span class="preprocessor"></span>                                                        <span class="keywordflow">if</span> (mCullDebug &amp;&amp; cam-&gt;getViewport ())
<a name="l01005"></a>01005                                                         {
<a name="l01006"></a>01006                                                         cam-&gt;getViewport ()-&gt;getTarget ()-&gt;setDebugText(
<a name="l01007"></a>01007                                                                         <span class="stringliteral">"CHC Conservative = "</span> + StringConverter::toString(<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#ef68602265631ce6e77bae3c13c70dd7">mOcclusion</a>.object_cnt) + <span class="stringliteral">", t="</span> +
<a name="l01008"></a>01008                                                                         StringConverter::toString(<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#ef68602265631ce6e77bae3c13c70dd7">mOcclusion</a>.traversed_nodes_cnt) + <span class="stringliteral">", f="</span> +
<a name="l01009"></a>01009                                                                         StringConverter::toString(<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#ef68602265631ce6e77bae3c13c70dd7">mOcclusion</a>.frustum_culled_nodes_cnt) + <span class="stringliteral">", q="</span> +
<a name="l01010"></a>01010                                                                         StringConverter::toString(<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#ef68602265631ce6e77bae3c13c70dd7">mOcclusion</a>.query_cnt)
<a name="l01011"></a>01011                                                                                                 );
<a name="l01012"></a>01012                                                         }
<a name="l01013"></a>01013 <span class="preprocessor">                                                #endif //_VISIBILITYDEBUG</span>
<a name="l01014"></a>01014 <span class="preprocessor"></span>
<a name="l01015"></a>01015                     }
<a name="l01016"></a>01016                     <span class="keywordflow">break</span>;
<a name="l01017"></a>01017 <span class="comment">//                    case STOP_AND_WAIT:</span>
<a name="l01018"></a>01018 <span class="comment">//                        {     </span>
<a name="l01019"></a>01019 <span class="comment">//                            enableHardwareOcclusionTests();</span>
<a name="l01020"></a>01020 <span class="comment">//                            mOcclusion.initQueryPool ();</span>
<a name="l01021"></a>01021 <span class="comment">//                            mPagingLandScapeOctree-&gt;traversal (SWTraversal (mOcclusion));</span>
<a name="l01022"></a>01022 <span class="comment">//                            disableHardwareOcclusionTests(); q-&gt;clear();</span>
<a name="l01023"></a>01023 <span class="comment">//    </span>
<a name="l01024"></a>01024 <span class="comment">//                           #ifdef _VISIBILITYDEBUG</span>
<a name="l01025"></a>01025 <span class="comment">//                               if (mCullDebug &amp;&amp; cam-&gt;getViewport ()) {cam-&gt;getViewport ()-&gt;getTarget ()-&gt;setDebugText(</span>
<a name="l01026"></a>01026 <span class="comment">//                                        "SnW = " + StringConverter::toString(mOcclusion.object_cnt) + ", t=" +</span>
<a name="l01027"></a>01027 <span class="comment">//                                        StringConverter::toString(mOcclusion.traversed_nodes_cnt) + ", f=" +</span>
<a name="l01028"></a>01028 <span class="comment">//                                        StringConverter::toString(mOcclusion.frustum_culled_nodes_cnt) + ", q=" +</span>
<a name="l01029"></a>01029 <span class="comment">//                                        StringConverter::toString(mOcclusion.query_cnt)</span>
<a name="l01030"></a>01030 <span class="comment">//                                                      );}</span>
<a name="l01031"></a>01031 <span class="comment">//                                </span>
<a name="l01032"></a>01032 <span class="comment">//                                #endif //_VISIBILITYDEBUG</span>
<a name="l01033"></a>01033 <span class="comment">//        </span>
<a name="l01034"></a>01034 <span class="comment">//                        }</span>
<a name="l01035"></a>01035 <span class="comment">//                         break;</span>
<a name="l01036"></a>01036 <span class="comment">//                case VIEW_FRUSTUM:</span>
<a name="l01037"></a>01037 <span class="comment">//                        {</span>
<a name="l01038"></a>01038 <span class="comment">//                            mPagingLandScapeOctree-&gt;traversal (ViewFrustumCullingTraversal (mOcclusion));</span>
<a name="l01039"></a>01039 <span class="comment">//                                                      q-&gt;clear();</span>
<a name="l01040"></a>01040 <span class="comment">//                            #ifdef _VISIBILITYDEBUG</span>
<a name="l01041"></a>01041 <span class="comment">//                                                              if (mCullDebug &amp;&amp; cam-&gt;getViewport ())</span>
<a name="l01042"></a>01042 <span class="comment">//                              {  cam-&gt;getViewport ()-&gt;getTarget ()-&gt;setDebugText(</span>
<a name="l01043"></a>01043 <span class="comment">//                                    "VF = " +  StringConverter::toString(mOcclusion.object_cnt) + ", t=" +</span>
<a name="l01044"></a>01044 <span class="comment">//                                StringConverter::toString(mOcclusion.traversed_nodes_cnt) + ", f=" +</span>
<a name="l01045"></a>01045 <span class="comment">//                                StringConverter::toString(mOcclusion.frustum_culled_nodes_cnt) + ", q=" +</span>
<a name="l01046"></a>01046 <span class="comment">//                                StringConverter::toString(mOcclusion.query_cnt)</span>
<a name="l01047"></a>01047 <span class="comment">//                                              );}</span>
<a name="l01048"></a>01048 <span class="comment">//                             </span>
<a name="l01049"></a>01049 <span class="comment">//                            #endif //_VISIBILITYDEBUG</span>
<a name="l01050"></a>01050 <span class="comment">//                        }</span>
<a name="l01051"></a>01051 <span class="comment">//                          break;  </span>
<a name="l01052"></a>01052                 <span class="keywordflow">case</span> VIEW_FRUSTUM_DIRECT:
<a name="l01053"></a>01053                 {
<a name="l01054"></a>01054                                         <a class="code" href="classOgre_1_1ViewFrustumCullingTraversalDirect.html">ViewFrustumCullingTraversalDirect</a> temp (<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#ef68602265631ce6e77bae3c13c70dd7">mOcclusion</a>);
<a name="l01055"></a>01055                     <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#025e48e12cf27df7365ad7431379757c">mPagingLandScapeOctree</a>-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#7d586e9c5fd49176391575816e230f29">traversal</a> (temp);
<a name="l01056"></a>01056 
<a name="l01057"></a>01057 <span class="preprocessor">                    #ifdef _VISIBILITYDEBUG</span>
<a name="l01058"></a>01058 <span class="preprocessor"></span>                                                <span class="keywordflow">if</span> (mCullDebug &amp;&amp; cam-&gt;getViewport ())
<a name="l01059"></a>01059                                                 { 
<a name="l01060"></a>01060                                                         cam-&gt;getViewport ()-&gt;getTarget ()-&gt;setDebugText(
<a name="l01061"></a>01061                                                                 <span class="stringliteral">"VFD = "</span> +  StringConverter::toString(<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#ef68602265631ce6e77bae3c13c70dd7">mOcclusion</a>.object_cnt) + <span class="stringliteral">", t="</span> +
<a name="l01062"></a>01062                                                         StringConverter::toString(<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#ef68602265631ce6e77bae3c13c70dd7">mOcclusion</a>.traversed_nodes_cnt) + <span class="stringliteral">", f="</span> +
<a name="l01063"></a>01063                                                         StringConverter::toString(<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#ef68602265631ce6e77bae3c13c70dd7">mOcclusion</a>.frustum_culled_nodes_cnt) + <span class="stringliteral">", q="</span> +
<a name="l01064"></a>01064                                                         StringConverter::toString(<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#ef68602265631ce6e77bae3c13c70dd7">mOcclusion</a>.query_cnt)
<a name="l01065"></a>01065                                     ); 
<a name="l01066"></a>01066                                                 }           
<a name="l01067"></a>01067 <span class="preprocessor">                    #endif // _VISIBILITYDEBUG</span>
<a name="l01068"></a>01068 <span class="preprocessor"></span>                }
<a name="l01069"></a>01069                                 <span class="keywordflow">break</span>;
<a name="l01070"></a>01070                     
<a name="l01071"></a>01071                         <span class="keywordflow">default</span>:
<a name="l01072"></a>01072                     assert (0);
<a name="l01073"></a>01073                                 <span class="keywordflow">break</span>;
<a name="l01074"></a>01074             }
<a name="l01075"></a>01075             }
<a name="l01076"></a>01076 
<a name="l01077"></a>01077             <span class="keywordflow">if</span> (!mCamInProgressVisibles-&gt;empty())
<a name="l01078"></a>01078             {
<a name="l01079"></a>01079                 MovableObjectList::iterator movableIt = mCamInProgressVisibles-&gt;begin();
<a name="l01080"></a>01080                 MovableObjectList::iterator mitend = mCamInProgressVisibles-&gt;end(); 
<a name="l01081"></a>01081                 <span class="keywordflow">while</span> (movableIt != mitend)
<a name="l01082"></a>01082                 {
<a name="l01083"></a>01083                     (*movableIt)-&gt;_updateRenderQueue (q);
<a name="l01084"></a>01084                     ++movableIt;
<a name="l01085"></a>01085                 }   
<a name="l01086"></a>01086             }
<a name="l01087"></a>01087 
<a name="l01088"></a>01088 <span class="preprocessor">            #ifdef _VISIBILITYDEBUG</span>
<a name="l01089"></a>01089 <span class="preprocessor"></span>                <span class="keywordflow">if</span> (mCullDebug)
<a name="l01090"></a>01090                 {   
<a name="l01091"></a>01091                     <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#025e48e12cf27df7365ad7431379757c">mPagingLandScapeOctree</a>-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#7d586e9c5fd49176391575816e230f29">traversal</a> (TreeOverlayDebug (<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#ef68602265631ce6e77bae3c13c70dd7">mOcclusion</a>, <span class="keyword">this</span>));
<a name="l01092"></a>01092                 }      
<a name="l01093"></a>01093 <span class="preprocessor">            #endif // _VISIBILITYDEBUG</span>
<a name="l01094"></a>01094 <span class="preprocessor"></span>        }
<a name="l01095"></a>01095     }
<a name="l01096"></a>01096     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l01097"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#da680a993e7b2401b42bada96f77a2a7">01097</a>     <span class="keywordtype">void</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#da680a993e7b2401b42bada96f77a2a7">PagingLandScapeOctreeSceneManager::addVisible</a>(MovableObject *mo)
<a name="l01098"></a>01098     {   
<a name="l01099"></a>01099         <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#8842d1618d29e24186054ef258225a5d">mCamInProgressVisibles</a>-&gt;push_back (mo);
<a name="l01100"></a>01100     }
<a name="l01101"></a>01101     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l01102"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#6168230a0fe040cd1c0bfe5174f34089">01102</a>     <span class="keywordtype">void</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#6168230a0fe040cd1c0bfe5174f34089">PagingLandScapeOctreeSceneManager::directRenderSingleQueue</a>(RenderQueue *queue)
<a name="l01103"></a>01103     {  
<a name="l01104"></a>01104         RenderQueue *oldQueue = mRenderQueue;
<a name="l01105"></a>01105         mRenderQueue = queue;
<a name="l01106"></a>01106 
<a name="l01107"></a>01107         SceneManager::_renderVisibleObjects ();
<a name="l01108"></a>01108 
<a name="l01109"></a>01109         queue-&gt;clear ();
<a name="l01110"></a>01110         mRenderQueue = oldQueue;
<a name="l01111"></a>01111     }    
<a name="l01112"></a>01112     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l01113"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#704a07cfe616085dc9fd725f2bdb5edb">01113</a>     <span class="keywordtype">void</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#704a07cfe616085dc9fd725f2bdb5edb">PagingLandScapeOctreeSceneManager::directRenderSingleObject</a>(Renderable *r)
<a name="l01114"></a>01114     {   
<a name="l01115"></a>01115           <span class="keyword">const</span> Camera * <span class="keyword">const</span> c_cam = mCameraInProgress;
<a name="l01116"></a>01116           mDestRenderSystem-&gt;_setWorldMatrix(Matrix4::IDENTITY);
<a name="l01117"></a>01117 <span class="comment">//        mDestRenderSystem-&gt;_setViewMatrix(c_cam-&gt;getViewMatrix());</span>
<a name="l01118"></a>01118 <span class="comment">//        mDestRenderSystem-&gt;_setProjectionMatrix(c_cam-&gt;getProjectionMatrix());</span>
<a name="l01119"></a>01119 
<a name="l01120"></a>01120                 mDestRenderSystem-&gt;setCurrentPassIterationCount(1);
<a name="l01121"></a>01121         _setPass(r-&gt;getMaterial()-&gt;getBestTechnique()-&gt;getPass(0));
<a name="l01122"></a>01122         useRenderableViewProjMode (r);
<a name="l01123"></a>01123 
<a name="l01124"></a>01124         RenderOperation ro;
<a name="l01125"></a>01125         r-&gt;getRenderOperation (ro);
<a name="l01126"></a>01126         mDestRenderSystem-&gt;_render(ro);
<a name="l01127"></a>01127 
<a name="l01128"></a>01128     } 
<a name="l01129"></a>01129     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l01130"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#90ecb8bc059b849ecfa1ca96bc9bad6d">01130</a>     <span class="keywordtype">void</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#90ecb8bc059b849ecfa1ca96bc9bad6d">PagingLandScapeOctreeSceneManager::registerCamera</a> (<a class="code" href="classOgre_1_1PagingLandScapeOctreeCamera.html">PagingLandScapeOctreeCamera</a> *c)
<a name="l01131"></a>01131     {        
<a name="l01132"></a>01132        <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#025e48e12cf27df7365ad7431379757c">mPagingLandScapeOctree</a>-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#7d586e9c5fd49176391575816e230f29">traversal</a>(<a class="code" href="classOgre_1_1RegisterCameraTraversal.html">RegisterCameraTraversal</a>(c));
<a name="l01133"></a>01133     }  
<a name="l01134"></a>01134     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l01135"></a>01135      <span class="comment">// --- non template versions</span>
<a name="l01136"></a><a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">01136</a>     <span class="keywordtype">void</span> <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(<span class="keyword">const</span> AxisAlignedBox &amp;t, std::list &lt; SceneNode * &gt; &amp;list, 
<a name="l01137"></a>01137                     <span class="keyword">const</span> Ogre::SceneNode * <span class="keyword">const</span> exclude, <span class="keyword">const</span> <span class="keywordtype">bool</span> full, <a class="code" href="classOgre_1_1PagingLandScapeOctree.html">PagingLandScapeOctree</a> *octant)
<a name="l01138"></a>01138     {
<a name="l01139"></a>01139 
<a name="l01140"></a>01140         <span class="keywordtype">bool</span> isFull = full;
<a name="l01141"></a>01141             <span class="keywordflow">if</span> (!full)
<a name="l01142"></a>01142             {
<a name="l01143"></a>01143                     AxisAlignedBox obox;
<a name="l01144"></a>01144                     octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#2f2e470fc719055546037c9477a7ba86">_getCullBounds</a>(&amp;obox);
<a name="l01145"></a>01145 
<a name="l01146"></a>01146                     <span class="keyword">const</span> <a class="code" href="namespaceOgre.html#6985251dbcceecc0d6637cca5bbbc797">Intersection</a> isect = <a class="code" href="namespaceOgre.html#5c1056b6b60ce5548dcd68ae6dcc265a">intersect</a>(t, obox);
<a name="l01147"></a>01147 
<a name="l01148"></a>01148                     <span class="keywordflow">if</span> (isect == OUTSIDE)
<a name="l01149"></a>01149                             return ;
<a name="l01150"></a>01150 
<a name="l01151"></a>01151                     isFull = (isect == INSIDE);
<a name="l01152"></a>01152             }
<a name="l01153"></a>01153 
<a name="l01154"></a>01154 
<a name="l01155"></a>01155         <span class="keyword">const</span> <span class="keywordtype">bool</span> b_full = isFull;
<a name="l01156"></a>01156             NodeList::iterator it = octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#f58ee517586118e0143d9f71e24c6d67">mNodes</a>.begin();
<a name="l01157"></a>01157 
<a name="l01158"></a>01158             <span class="keywordflow">while</span> (it != octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#f58ee517586118e0143d9f71e24c6d67">mNodes</a>.end())
<a name="l01159"></a>01159             {
<a name="l01160"></a>01160                     <a class="code" href="classOgre_1_1PagingLandScapeOctreeNode.html">PagingLandScapeOctreeNode</a> * <span class="keyword">const</span> on = (*it);
<a name="l01161"></a>01161 
<a name="l01162"></a>01162                     <span class="keywordflow">if</span> (on != exclude)
<a name="l01163"></a>01163                     {
<a name="l01164"></a>01164                             <span class="keywordflow">if</span> (b_full)
<a name="l01165"></a>01165                             {
<a name="l01166"></a>01166                                     list.push_back(on);
<a name="l01167"></a>01167                             }
<a name="l01168"></a>01168 
<a name="l01169"></a>01169                             <span class="keywordflow">else</span>
<a name="l01170"></a>01170                             {
<a name="l01171"></a>01171                                     <span class="keyword">const</span> <a class="code" href="namespaceOgre.html#6985251dbcceecc0d6637cca5bbbc797">Intersection</a> nsect = <a class="code" href="namespaceOgre.html#5c1056b6b60ce5548dcd68ae6dcc265a">intersect</a>(t, on-&gt;_getWorldAABB());
<a name="l01172"></a>01172 
<a name="l01173"></a>01173                                     <span class="keywordflow">if</span> (nsect != OUTSIDE)
<a name="l01174"></a>01174                                     {
<a name="l01175"></a>01175                                             list.push_back(on);
<a name="l01176"></a>01176                                     }
<a name="l01177"></a>01177                             }
<a name="l01178"></a>01178 
<a name="l01179"></a>01179                     }
<a name="l01180"></a>01180 
<a name="l01181"></a>01181                     ++it;
<a name="l01182"></a>01182             }
<a name="l01183"></a>01183 
<a name="l01184"></a>01184 
<a name="l01185"></a>01185 
<a name="l01186"></a>01186             <span class="keywordflow">if</span> (octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 0 ][ 0 ][ 0 ] != 0)
<a name="l01187"></a>01187                     <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(t, list, exclude, b_full, octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 0 ][ 0 ][ 0 ]);
<a name="l01188"></a>01188 
<a name="l01189"></a>01189             <span class="keywordflow">if</span> (octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 1 ][ 0 ][ 0 ] != 0)
<a name="l01190"></a>01190                     <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(t, list, exclude, b_full, octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 1 ][ 0 ][ 0 ]);
<a name="l01191"></a>01191 
<a name="l01192"></a>01192             <span class="keywordflow">if</span> (octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 0 ][ 1 ][ 0 ] != 0)
<a name="l01193"></a>01193                     <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(t, list, exclude, b_full, octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 0 ][ 1 ][ 0 ]);
<a name="l01194"></a>01194 
<a name="l01195"></a>01195             <span class="keywordflow">if</span> (octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 1 ][ 1 ][ 0 ] != 0)
<a name="l01196"></a>01196                     <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(t, list, exclude, b_full, octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 1 ][ 1 ][ 0 ]);
<a name="l01197"></a>01197 
<a name="l01198"></a>01198             <span class="keywordflow">if</span> (octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 0 ][ 0 ][ 1 ] != 0)
<a name="l01199"></a>01199                     <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(t, list, exclude, b_full, octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 0 ][ 0 ][ 1 ]);
<a name="l01200"></a>01200 
<a name="l01201"></a>01201             <span class="keywordflow">if</span> (octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 1 ][ 0 ][ 1 ] != 0)
<a name="l01202"></a>01202                     <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(t, list, exclude, b_full, octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 1 ][ 0 ][ 1 ]);
<a name="l01203"></a>01203 
<a name="l01204"></a>01204             <span class="keywordflow">if</span> (octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 0 ][ 1 ][ 1 ] != 0)
<a name="l01205"></a>01205                     <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(t, list, exclude, b_full, octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 0 ][ 1 ][ 1 ]);
<a name="l01206"></a>01206 
<a name="l01207"></a>01207             <span class="keywordflow">if</span> (octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 1 ][ 1 ][ 1 ] != 0)
<a name="l01208"></a>01208                     <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(t, list, exclude, b_full, octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 1 ][ 1 ][ 1 ]);
<a name="l01209"></a>01209 
<a name="l01210"></a>01210     }
<a name="l01211"></a>01211     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l01212"></a><a class="code" href="namespaceOgre.html#4721402e01306751d06a773ccd040c64">01212</a>     <span class="keywordtype">void</span> <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(<span class="keyword">const</span> Sphere &amp;t, std::list &lt; SceneNode * &gt; &amp;list, 
<a name="l01213"></a>01213                     <span class="keyword">const</span> SceneNode * <span class="keyword">const</span> exclude, 
<a name="l01214"></a>01214                     <span class="keyword">const</span> <span class="keywordtype">bool</span> full, <a class="code" href="classOgre_1_1PagingLandScapeOctree.html">PagingLandScapeOctree</a> *octant)
<a name="l01215"></a>01215     {
<a name="l01216"></a>01216         <span class="keywordtype">bool</span> isFull = full;
<a name="l01217"></a>01217             <span class="keywordflow">if</span> (!full)
<a name="l01218"></a>01218             {
<a name="l01219"></a>01219                     AxisAlignedBox obox;
<a name="l01220"></a>01220                     octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#2f2e470fc719055546037c9477a7ba86">_getCullBounds</a>(&amp;obox);
<a name="l01221"></a>01221 
<a name="l01222"></a>01222                     <span class="keyword">const</span> <a class="code" href="namespaceOgre.html#6985251dbcceecc0d6637cca5bbbc797">Intersection</a> isect = <a class="code" href="namespaceOgre.html#5c1056b6b60ce5548dcd68ae6dcc265a">intersect</a>(t, obox);
<a name="l01223"></a>01223 
<a name="l01224"></a>01224                     <span class="keywordflow">if</span> (isect == OUTSIDE)
<a name="l01225"></a>01225                             return ;
<a name="l01226"></a>01226 
<a name="l01227"></a>01227                     isFull = (isect == INSIDE);
<a name="l01228"></a>01228             }
<a name="l01229"></a>01229 
<a name="l01230"></a>01230         <span class="keyword">const</span> <span class="keywordtype">bool</span> b_full = isFull;
<a name="l01231"></a>01231             NodeList::iterator it = octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#f58ee517586118e0143d9f71e24c6d67">mNodes</a>.begin();
<a name="l01232"></a>01232 
<a name="l01233"></a>01233             <span class="keywordflow">while</span> (it != octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#f58ee517586118e0143d9f71e24c6d67">mNodes</a>.end())
<a name="l01234"></a>01234             {
<a name="l01235"></a>01235                     <a class="code" href="classOgre_1_1PagingLandScapeOctreeNode.html">PagingLandScapeOctreeNode</a> * <span class="keyword">const</span> on = (*it);
<a name="l01236"></a>01236 
<a name="l01237"></a>01237                     <span class="keywordflow">if</span> (on != exclude)
<a name="l01238"></a>01238                     {
<a name="l01239"></a>01239                             <span class="keywordflow">if</span> (b_full)
<a name="l01240"></a>01240                             {
<a name="l01241"></a>01241                                     list.push_back(on);
<a name="l01242"></a>01242                             }
<a name="l01243"></a>01243 
<a name="l01244"></a>01244                             <span class="keywordflow">else</span>
<a name="l01245"></a>01245                             {
<a name="l01246"></a>01246                                     <span class="keyword">const</span> <a class="code" href="namespaceOgre.html#6985251dbcceecc0d6637cca5bbbc797">Intersection</a> nsect = <a class="code" href="namespaceOgre.html#5c1056b6b60ce5548dcd68ae6dcc265a">intersect</a>(t, on-&gt;_getWorldAABB());
<a name="l01247"></a>01247 
<a name="l01248"></a>01248                                     <span class="keywordflow">if</span> (nsect != OUTSIDE)
<a name="l01249"></a>01249                                     {
<a name="l01250"></a>01250                                             list.push_back(on);
<a name="l01251"></a>01251                                     }
<a name="l01252"></a>01252                             }
<a name="l01253"></a>01253 
<a name="l01254"></a>01254                     }
<a name="l01255"></a>01255 
<a name="l01256"></a>01256                     ++it;
<a name="l01257"></a>01257             }
<a name="l01258"></a>01258 
<a name="l01259"></a>01259 
<a name="l01260"></a>01260 
<a name="l01261"></a>01261             <span class="keywordflow">if</span> (octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 0 ][ 0 ][ 0 ] != 0)
<a name="l01262"></a>01262                     <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(t, list, exclude, b_full, octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 0 ][ 0 ][ 0 ]);
<a name="l01263"></a>01263 
<a name="l01264"></a>01264             <span class="keywordflow">if</span> (octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 1 ][ 0 ][ 0 ] != 0)
<a name="l01265"></a>01265                     <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(t, list, exclude, b_full, octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 1 ][ 0 ][ 0 ]);
<a name="l01266"></a>01266 
<a name="l01267"></a>01267             <span class="keywordflow">if</span> (octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 0 ][ 1 ][ 0 ] != 0)
<a name="l01268"></a>01268                     <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(t, list, exclude, b_full, octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 0 ][ 1 ][ 0 ]);
<a name="l01269"></a>01269 
<a name="l01270"></a>01270             <span class="keywordflow">if</span> (octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 1 ][ 1 ][ 0 ] != 0)
<a name="l01271"></a>01271                     <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(t, list, exclude, b_full, octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 1 ][ 1 ][ 0 ]);
<a name="l01272"></a>01272 
<a name="l01273"></a>01273             <span class="keywordflow">if</span> (octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 0 ][ 0 ][ 1 ] != 0)
<a name="l01274"></a>01274                     <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(t, list, exclude, b_full, octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 0 ][ 0 ][ 1 ]);
<a name="l01275"></a>01275 
<a name="l01276"></a>01276             <span class="keywordflow">if</span> (octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 1 ][ 0 ][ 1 ] != 0)
<a name="l01277"></a>01277                     <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(t, list, exclude, b_full, octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 1 ][ 0 ][ 1 ]);
<a name="l01278"></a>01278 
<a name="l01279"></a>01279             <span class="keywordflow">if</span> (octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 0 ][ 1 ][ 1 ] != 0)
<a name="l01280"></a>01280                     <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(t, list, exclude, b_full, octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 0 ][ 1 ][ 1 ]);
<a name="l01281"></a>01281 
<a name="l01282"></a>01282             <span class="keywordflow">if</span> (octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 1 ][ 1 ][ 1 ] != 0)
<a name="l01283"></a>01283                     <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(t, list, exclude, b_full, octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 1 ][ 1 ][ 1 ]);
<a name="l01284"></a>01284 
<a name="l01285"></a>01285     }
<a name="l01286"></a>01286     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l01287"></a><a class="code" href="namespaceOgre.html#71b1ef2819fae1d3dfec719d1007c95f">01287</a>     <span class="keywordtype">void</span> <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(<span class="keyword">const</span> PlaneBoundedVolume &amp;t, std::list &lt; SceneNode * &gt; &amp;list, 
<a name="l01288"></a>01288                 <span class="keyword">const</span> Ogre::SceneNode * <span class="keyword">const</span> exclude, <span class="keyword">const</span> <span class="keywordtype">bool</span> full, <a class="code" href="classOgre_1_1PagingLandScapeOctree.html">PagingLandScapeOctree</a> *octant)
<a name="l01289"></a>01289     {
<a name="l01290"></a>01290 
<a name="l01291"></a>01291         <span class="keywordtype">bool</span> isFull = full;
<a name="l01292"></a>01292             <span class="keywordflow">if</span> (!full)
<a name="l01293"></a>01293             {
<a name="l01294"></a>01294                     AxisAlignedBox obox;
<a name="l01295"></a>01295                     octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#2f2e470fc719055546037c9477a7ba86">_getCullBounds</a>(&amp;obox);
<a name="l01296"></a>01296 
<a name="l01297"></a>01297                     <span class="keyword">const</span> <a class="code" href="namespaceOgre.html#6985251dbcceecc0d6637cca5bbbc797">Intersection</a> isect = <a class="code" href="namespaceOgre.html#5c1056b6b60ce5548dcd68ae6dcc265a">intersect</a>(t, obox);
<a name="l01298"></a>01298 
<a name="l01299"></a>01299                     <span class="keywordflow">if</span> (isect == OUTSIDE)
<a name="l01300"></a>01300                             return ;
<a name="l01301"></a>01301 
<a name="l01302"></a>01302                     isFull = (isect == INSIDE);
<a name="l01303"></a>01303             }
<a name="l01304"></a>01304 
<a name="l01305"></a>01305 
<a name="l01306"></a>01306         <span class="keyword">const</span> <span class="keywordtype">bool</span> b_full = isFull;
<a name="l01307"></a>01307             NodeList::iterator it = octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#f58ee517586118e0143d9f71e24c6d67">mNodes</a>.begin();
<a name="l01308"></a>01308 
<a name="l01309"></a>01309             <span class="keywordflow">while</span> (it != octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#f58ee517586118e0143d9f71e24c6d67">mNodes</a>.end())
<a name="l01310"></a>01310             {
<a name="l01311"></a>01311                     <a class="code" href="classOgre_1_1PagingLandScapeOctreeNode.html">PagingLandScapeOctreeNode</a> * <span class="keyword">const</span> on = (*it);
<a name="l01312"></a>01312                     <span class="keywordflow">if</span> (on != exclude)
<a name="l01313"></a>01313                     {
<a name="l01314"></a>01314                             <span class="keywordflow">if</span> (b_full)
<a name="l01315"></a>01315                             {
<a name="l01316"></a>01316                                     list.push_back(on);
<a name="l01317"></a>01317                             }
<a name="l01318"></a>01318                             <span class="keywordflow">else</span>
<a name="l01319"></a>01319                             {
<a name="l01320"></a>01320                                     <span class="keyword">const</span> <a class="code" href="namespaceOgre.html#6985251dbcceecc0d6637cca5bbbc797">Intersection</a> nsect = <a class="code" href="namespaceOgre.html#5c1056b6b60ce5548dcd68ae6dcc265a">intersect</a>(t, on-&gt;_getWorldAABB());
<a name="l01321"></a>01321 
<a name="l01322"></a>01322                                     <span class="keywordflow">if</span> (nsect != OUTSIDE)
<a name="l01323"></a>01323                                     {
<a name="l01324"></a>01324                                             list.push_back(on);
<a name="l01325"></a>01325                                     }
<a name="l01326"></a>01326                             }
<a name="l01327"></a>01327                     }
<a name="l01328"></a>01328                     ++it;
<a name="l01329"></a>01329             }
<a name="l01330"></a>01330 
<a name="l01331"></a>01331             <span class="keywordflow">if</span> (octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 0 ][ 0 ][ 0 ] != 0)
<a name="l01332"></a>01332                     <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(t, list, exclude, b_full, octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 0 ][ 0 ][ 0 ]);
<a name="l01333"></a>01333 
<a name="l01334"></a>01334             <span class="keywordflow">if</span> (octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 1 ][ 0 ][ 0 ] != 0)
<a name="l01335"></a>01335                     <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(t, list, exclude, b_full, octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 1 ][ 0 ][ 0 ]);
<a name="l01336"></a>01336 
<a name="l01337"></a>01337             <span class="keywordflow">if</span> (octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 0 ][ 1 ][ 0 ] != 0)
<a name="l01338"></a>01338                     <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(t, list, exclude, b_full, octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 0 ][ 1 ][ 0 ]);
<a name="l01339"></a>01339 
<a name="l01340"></a>01340             <span class="keywordflow">if</span> (octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 1 ][ 1 ][ 0 ] != 0)
<a name="l01341"></a>01341                     <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(t, list, exclude, b_full, octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 1 ][ 1 ][ 0 ]);
<a name="l01342"></a>01342 
<a name="l01343"></a>01343             <span class="keywordflow">if</span> (octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 0 ][ 0 ][ 1 ] != 0)
<a name="l01344"></a>01344                     <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(t, list, exclude, b_full, octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 0 ][ 0 ][ 1 ]);
<a name="l01345"></a>01345 
<a name="l01346"></a>01346             <span class="keywordflow">if</span> (octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 1 ][ 0 ][ 1 ] != 0)
<a name="l01347"></a>01347                     <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(t, list, exclude, b_full, octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 1 ][ 0 ][ 1 ]);
<a name="l01348"></a>01348 
<a name="l01349"></a>01349             <span class="keywordflow">if</span> (octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 0 ][ 1 ][ 1 ] != 0)
<a name="l01350"></a>01350                     <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(t, list, exclude, b_full, octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 0 ][ 1 ][ 1 ]);
<a name="l01351"></a>01351 
<a name="l01352"></a>01352             <span class="keywordflow">if</span> (octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 1 ][ 1 ][ 1 ] != 0)
<a name="l01353"></a>01353                     <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(t, list, exclude, b_full, octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 1 ][ 1 ][ 1 ]);
<a name="l01354"></a>01354 
<a name="l01355"></a>01355     }
<a name="l01356"></a>01356     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l01357"></a><a class="code" href="namespaceOgre.html#7017f7de9602cb88e3f1033175ee957b">01357</a>     <span class="keywordtype">void</span> <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(<span class="keyword">const</span> Ray &amp;t, std::list &lt; SceneNode * &gt; &amp;list, 
<a name="l01358"></a>01358                     <span class="keyword">const</span> Ogre::SceneNode * <span class="keyword">const</span> exclude, 
<a name="l01359"></a>01359                     <span class="keyword">const</span> <span class="keywordtype">bool</span> full, <a class="code" href="classOgre_1_1PagingLandScapeOctree.html">PagingLandScapeOctree</a> *octant)
<a name="l01360"></a>01360     {
<a name="l01361"></a>01361         <span class="keywordtype">bool</span> isFull = full;
<a name="l01362"></a>01362             <span class="keywordflow">if</span> (!full)
<a name="l01363"></a>01363             {
<a name="l01364"></a>01364                     AxisAlignedBox obox;
<a name="l01365"></a>01365                     octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#2f2e470fc719055546037c9477a7ba86">_getCullBounds</a>(&amp;obox);
<a name="l01366"></a>01366 
<a name="l01367"></a>01367                     <span class="keyword">const</span> <a class="code" href="namespaceOgre.html#6985251dbcceecc0d6637cca5bbbc797">Intersection</a> isect = <a class="code" href="namespaceOgre.html#5c1056b6b60ce5548dcd68ae6dcc265a">intersect</a>(t, obox);
<a name="l01368"></a>01368 
<a name="l01369"></a>01369                     <span class="keywordflow">if</span> (isect == OUTSIDE)
<a name="l01370"></a>01370                             return ;
<a name="l01371"></a>01371 
<a name="l01372"></a>01372                     isFull = (isect == INSIDE);
<a name="l01373"></a>01373             }
<a name="l01374"></a>01374 
<a name="l01375"></a>01375 
<a name="l01376"></a>01376         <span class="keyword">const</span> <span class="keywordtype">bool</span> b_full = isFull;
<a name="l01377"></a>01377                 <span class="keywordflow">if</span> (!octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#f58ee517586118e0143d9f71e24c6d67">mNodes</a>.empty ())
<a name="l01378"></a>01378                 {
<a name="l01379"></a>01379                         NodeList::iterator it = octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#f58ee517586118e0143d9f71e24c6d67">mNodes</a>.begin();
<a name="l01380"></a>01380                         <span class="keywordflow">while</span> (it != octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#f58ee517586118e0143d9f71e24c6d67">mNodes</a>.end())
<a name="l01381"></a>01381                         {
<a name="l01382"></a>01382                                 <a class="code" href="classOgre_1_1PagingLandScapeOctreeNode.html">PagingLandScapeOctreeNode</a> * <span class="keyword">const</span> on = (*it);
<a name="l01383"></a>01383                                 <span class="keywordflow">if</span> (on != exclude)
<a name="l01384"></a>01384                                 {
<a name="l01385"></a>01385                                         <span class="keywordflow">if</span> (b_full)
<a name="l01386"></a>01386                                         {
<a name="l01387"></a>01387                                                 list.push_back(on);
<a name="l01388"></a>01388                                         }
<a name="l01389"></a>01389                                         <span class="keywordflow">else</span>
<a name="l01390"></a>01390                                         {
<a name="l01391"></a>01391                                                 <span class="keyword">const</span> <a class="code" href="namespaceOgre.html#6985251dbcceecc0d6637cca5bbbc797">Intersection</a> nsect = <a class="code" href="namespaceOgre.html#5c1056b6b60ce5548dcd68ae6dcc265a">intersect</a>(t, on-&gt;_getWorldAABB());
<a name="l01392"></a>01392                                                 <span class="keywordflow">if</span> (nsect != OUTSIDE)
<a name="l01393"></a>01393                                                         list.push_back(on);
<a name="l01394"></a>01394                                         }
<a name="l01395"></a>01395                                 }
<a name="l01396"></a>01396                                 ++it;
<a name="l01397"></a>01397                         }
<a name="l01398"></a>01398                 }
<a name="l01399"></a>01399                 <span class="keywordflow">if</span> (octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#8feeb9cff56c4c7fd9331712f4addbf6">hasChildren</a> ())
<a name="l01400"></a>01400                 {
<a name="l01401"></a>01401                         <span class="keywordflow">if</span> (octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 0 ][ 0 ][ 0 ] != 0)
<a name="l01402"></a>01402                                 <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(t, list, exclude, b_full, octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 0 ][ 0 ][ 0 ]);
<a name="l01403"></a>01403 
<a name="l01404"></a>01404                         <span class="keywordflow">if</span> (octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 1 ][ 0 ][ 0 ] != 0)
<a name="l01405"></a>01405                                 <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(t, list, exclude, b_full, octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 1 ][ 0 ][ 0 ]);
<a name="l01406"></a>01406 
<a name="l01407"></a>01407                         <span class="keywordflow">if</span> (octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 0 ][ 1 ][ 0 ] != 0)
<a name="l01408"></a>01408                                 <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(t, list, exclude, b_full, octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 0 ][ 1 ][ 0 ]);
<a name="l01409"></a>01409 
<a name="l01410"></a>01410                         <span class="keywordflow">if</span> (octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 1 ][ 1 ][ 0 ] != 0)
<a name="l01411"></a>01411                                 <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(t, list, exclude, b_full, octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 1 ][ 1 ][ 0 ]);
<a name="l01412"></a>01412 
<a name="l01413"></a>01413                         <span class="keywordflow">if</span> (octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 0 ][ 0 ][ 1 ] != 0)
<a name="l01414"></a>01414                                 <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(t, list, exclude, b_full, octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 0 ][ 0 ][ 1 ]);
<a name="l01415"></a>01415 
<a name="l01416"></a>01416                         <span class="keywordflow">if</span> (octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 1 ][ 0 ][ 1 ] != 0)
<a name="l01417"></a>01417                                 <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(t, list, exclude, b_full, octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 1 ][ 0 ][ 1 ]);
<a name="l01418"></a>01418 
<a name="l01419"></a>01419                         <span class="keywordflow">if</span> (octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 0 ][ 1 ][ 1 ] != 0)
<a name="l01420"></a>01420                                 <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(t, list, exclude, b_full, octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 0 ][ 1 ][ 1 ]);
<a name="l01421"></a>01421 
<a name="l01422"></a>01422                         <span class="keywordflow">if</span> (octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 1 ][ 1 ][ 1 ] != 0)
<a name="l01423"></a>01423                                 <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(t, list, exclude, b_full, octant-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#104c0e31c8d1845fe6082cbb41f9e9cb">mChildren</a>[ 1 ][ 1 ][ 1 ]);
<a name="l01424"></a>01424                 }
<a name="l01425"></a>01425     }
<a name="l01426"></a>01426     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l01427"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#7bdee13dca9549f7edec8a8564d08a10">01427</a>     <span class="keywordtype">void</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#7bdee13dca9549f7edec8a8564d08a10">PagingLandScapeOctreeSceneManager::findNodesIn</a>(<span class="keyword">const</span> AxisAlignedBox &amp;box, std::list &lt; SceneNode * &gt; &amp;list, <span class="keyword">const</span> SceneNode* <span class="keyword">const</span> exclude)
<a name="l01428"></a>01428     {
<a name="l01429"></a>01429         <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(box, list, exclude, <span class="keyword">false</span>, <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#025e48e12cf27df7365ad7431379757c">mPagingLandScapeOctree</a>);
<a name="l01430"></a>01430     }
<a name="l01431"></a>01431     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l01432"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#662cdadb6ca76c59d4feef98f5cad583">01432</a>     <span class="keywordtype">void</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#7bdee13dca9549f7edec8a8564d08a10">PagingLandScapeOctreeSceneManager::findNodesIn</a>(<span class="keyword">const</span> Sphere &amp;sphere, std::list &lt; SceneNode * &gt; &amp;list, <span class="keyword">const</span> SceneNode* <span class="keyword">const</span> exclude)
<a name="l01433"></a>01433     {
<a name="l01434"></a>01434         <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(sphere, list, exclude, <span class="keyword">false</span>, <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#025e48e12cf27df7365ad7431379757c">mPagingLandScapeOctree</a>);
<a name="l01435"></a>01435     }
<a name="l01436"></a>01436     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l01437"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#8e14b80064f1c799005478559bcb4dd7">01437</a>     <span class="keywordtype">void</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#7bdee13dca9549f7edec8a8564d08a10">PagingLandScapeOctreeSceneManager::findNodesIn</a>(<span class="keyword">const</span> PlaneBoundedVolume &amp;volume, std::list &lt; SceneNode * &gt; &amp;list, <span class="keyword">const</span> SceneNode* <span class="keyword">const</span> exclude)
<a name="l01438"></a>01438     {
<a name="l01439"></a>01439         <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(volume, list, exclude, <span class="keyword">false</span>, <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#025e48e12cf27df7365ad7431379757c">mPagingLandScapeOctree</a>);
<a name="l01440"></a>01440     }
<a name="l01441"></a>01441     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l01442"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#631ec8f1bde8c35e8c634417c1cc7c8e">01442</a>     <span class="keywordtype">void</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#7bdee13dca9549f7edec8a8564d08a10">PagingLandScapeOctreeSceneManager::findNodesIn</a>(<span class="keyword">const</span> Ray &amp;r, std::list &lt; SceneNode * &gt; &amp;list, <span class="keyword">const</span> SceneNode* <span class="keyword">const</span> exclude)
<a name="l01443"></a>01443     {
<a name="l01444"></a>01444         <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(r, list, exclude, <span class="keyword">false</span>, <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#025e48e12cf27df7365ad7431379757c">mPagingLandScapeOctree</a>);
<a name="l01445"></a>01445     }
<a name="l01446"></a>01446     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l01447"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#0e07ec86e34c59c72f7df75a03a76407">01447</a>     <span class="keywordtype">void</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#149b8bae3499a4bf84e3dde85b22a96e">PagingLandScapeOctreeSceneManager::resize</a>(<span class="keyword">const</span> AxisAlignedBox &amp;box, <span class="keyword">const</span> <span class="keywordtype">int</span> depth)
<a name="l01448"></a>01448     {
<a name="l01449"></a>01449         <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#46e93eae9353f96100f4f2bf25873466">mMaxDepth</a> = depth;
<a name="l01450"></a>01450         <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#149b8bae3499a4bf84e3dde85b22a96e">resize</a>(box);
<a name="l01451"></a>01451     }
<a name="l01452"></a>01452     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l01453"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#149b8bae3499a4bf84e3dde85b22a96e">01453</a>     <span class="keywordtype">void</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#149b8bae3499a4bf84e3dde85b22a96e">PagingLandScapeOctreeSceneManager::resize</a>(<span class="keyword">const</span> AxisAlignedBox &amp;box)
<a name="l01454"></a>01454     {
<a name="l01455"></a>01455         std::list &lt; SceneNode * &gt; nodes;
<a name="l01456"></a>01456 
<a name="l01457"></a>01457         <a class="code" href="namespaceOgre.html#7c696fe5cd241f535f4315104210f11c">_findNodes</a>(<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#025e48e12cf27df7365ad7431379757c">mPagingLandScapeOctree</a>-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#f501e0e599cea5c94b612dd6231c16f7">getBoundingBox</a> (), nodes, 0, <span class="keyword">true</span>, <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#025e48e12cf27df7365ad7431379757c">mPagingLandScapeOctree</a>);
<a name="l01458"></a>01458 
<a name="l01459"></a>01459         <span class="keywordflow">if</span> (<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#025e48e12cf27df7365ad7431379757c">mPagingLandScapeOctree</a>)
<a name="l01460"></a>01460             <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#b2d89ef38b595e4680f27928d02617ca">deleteOctree</a> (<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#025e48e12cf27df7365ad7431379757c">mPagingLandScapeOctree</a>);
<a name="l01461"></a>01461 
<a name="l01462"></a>01462         <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#ba46e20a1ef11f8019dacae428811bb8">mBox</a> = box;
<a name="l01463"></a>01463         mPagingLandScapeOctree = <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#404bc2c38ae1db0ad7c2ad080311ebca">mOctreeSet</a>.<a class="code" href="classOgre_1_1PoolSet.html#f9412cc206f4c5f0f28700c78f3135af">getPoolable</a>();
<a name="l01464"></a>01464         assert (mPagingLandScapeOctree);       
<a name="l01465"></a>01465         mPagingLandScapeOctree-&gt;setSceneManager (<span class="keyword">this</span>);
<a name="l01466"></a>01466         mPagingLandScapeOctree -&gt;setBoundingBox (box.getMinimum(), box.getMaximum());       
<a name="l01467"></a>01467                 <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#b6b5a836923646741821edc65373e221">registeredNodeInCamera</a> (mPagingLandScapeOctree); 
<a name="l01468"></a>01468         
<a name="l01469"></a>01469         <span class="keywordflow">if</span> (!nodes.empty())
<a name="l01470"></a>01470         {
<a name="l01471"></a>01471             std::list &lt; SceneNode * &gt; ::iterator it;
<a name="l01472"></a>01472             it = nodes.begin();
<a name="l01473"></a>01473 
<a name="l01474"></a>01474             <span class="keywordflow">while</span> (it != nodes.end())
<a name="l01475"></a>01475             {
<a name="l01476"></a>01476                 <a class="code" href="classOgre_1_1PagingLandScapeOctreeNode.html">PagingLandScapeOctreeNode</a> * <span class="keyword">const</span> on = static_cast &lt; PagingLandScapeOctreeNode * &gt; (*it);
<a name="l01477"></a>01477                 on-&gt;setOctant(0);
<a name="l01478"></a>01478                 <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#294d2958ea117811065f709ffb3a0f1d">_updatePagingLandScapeOctreeNode</a>(on);
<a name="l01479"></a>01479                 ++it;
<a name="l01480"></a>01480             } <span class="comment">// while (it != nodes.end())</span>
<a name="l01481"></a>01481         }  
<a name="l01482"></a>01482     }
<a name="l01483"></a>01483     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l01484"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#89f164134780e500546bf86fb422c15d">01484</a>     <span class="keywordtype">bool</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#89f164134780e500546bf86fb422c15d">PagingLandScapeOctreeSceneManager::setOption</a>(<span class="keyword">const</span> String &amp; key, <span class="keyword">const</span> <span class="keywordtype">void</span> * val)
<a name="l01485"></a>01485     {
<a name="l01486"></a>01486         <span class="keywordflow">if</span> (key == <span class="stringliteral">"Size"</span>)
<a name="l01487"></a>01487         {
<a name="l01488"></a>01488             <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#149b8bae3499a4bf84e3dde85b22a96e">resize</a>(* static_cast &lt; const AxisAlignedBox * &gt; (val));
<a name="l01489"></a>01489             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01490"></a>01490         }
<a name="l01491"></a>01491 
<a name="l01492"></a>01492         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (key == <span class="stringliteral">"Depth"</span>)
<a name="l01493"></a>01493         {
<a name="l01494"></a>01494             assert (<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#025e48e12cf27df7365ad7431379757c">mPagingLandScapeOctree</a>);
<a name="l01495"></a>01495             <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#46e93eae9353f96100f4f2bf25873466">mMaxDepth</a> = * static_cast &lt; const int * &gt; (val);
<a name="l01496"></a>01496             <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#149b8bae3499a4bf84e3dde85b22a96e">resize</a>(<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#025e48e12cf27df7365ad7431379757c">mPagingLandScapeOctree</a>-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#f501e0e599cea5c94b612dd6231c16f7">getBoundingBox</a>());
<a name="l01497"></a>01497             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01498"></a>01498         }
<a name="l01499"></a>01499         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (key == <span class="stringliteral">"NextCullMode"</span>)
<a name="l01500"></a>01500         {
<a name="l01501"></a>01501             <span class="keywordflow">if</span> (val)
<a name="l01502"></a>01502             {
<a name="l01503"></a>01503                 CameraList::iterator it = mCameras.find (static_cast &lt; const PagingLandScapeOctreeCamera * &gt; (val)-&gt;getName());
<a name="l01504"></a>01504                 <span class="keywordflow">if</span> (it != mCameras.end())
<a name="l01505"></a>01505                                 {
<a name="l01506"></a>01506                     static_cast &lt; PagingLandScapeOctreeCamera * &gt; (it-&gt;second)-&gt;setNextOcclusionMode();
<a name="l01507"></a>01507                     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01508"></a>01508                 }
<a name="l01509"></a>01509             }
<a name="l01510"></a>01510             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01511"></a>01511                 }
<a name="l01512"></a>01512                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (key == <span class="stringliteral">"setNumberOfConservativeFrames"</span>)
<a name="l01513"></a>01513                 {
<a name="l01514"></a>01514                         <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#ef68602265631ce6e77bae3c13c70dd7">mOcclusion</a>.<a class="code" href="classOgre_1_1Occlusion.html#5958b7444e952342878c67dd9e0b6dd5">setNumberOfConservativeFrames</a>(*(static_cast &lt; const unsigned int * &gt; (val)));
<a name="l01515"></a>01515                 }
<a name="l01516"></a>01516                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (key == <span class="stringliteral">"CurrentOptionCamera"</span>)
<a name="l01517"></a>01517                 { 
<a name="l01518"></a>01518                         <span class="keywordflow">if</span> (val)
<a name="l01519"></a>01519                         {
<a name="l01520"></a>01520                                 CameraList::iterator it = mCameras.find (static_cast &lt; const PagingLandScapeOctreeCamera * &gt; (val)-&gt;getName());
<a name="l01521"></a>01521                                 <span class="keywordflow">if</span> (it != mCameras.end())
<a name="l01522"></a>01522                                 {
<a name="l01523"></a>01523                                         <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#ae4e0a77199645ce85c99dff9098962f">mCurrentOptionCamera</a> = static_cast &lt; PagingLandScapeOctreeCamera * &gt; (it-&gt;second);
<a name="l01524"></a>01524                                 }
<a name="l01525"></a>01525                                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01526"></a>01526                         }       
<a name="l01527"></a>01527                 }
<a name="l01528"></a>01528                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (key == <span class="stringliteral">"setCullingMode"</span>)
<a name="l01529"></a>01529                 {
<a name="l01530"></a>01530                         assert (<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#ae4e0a77199645ce85c99dff9098962f">mCurrentOptionCamera</a>);
<a name="l01531"></a>01531                         <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#ae4e0a77199645ce85c99dff9098962f">mCurrentOptionCamera</a>-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctreeCamera.html#40f38c46c5ae2d892d47435851a3e44a">setOcclusionModeAsString</a>(* static_cast &lt; const String * &gt; (val));                 
<a name="l01532"></a>01532                         <span class="keywordflow">return</span> <span class="keyword">true</span>;            
<a name="l01533"></a>01533                 }
<a name="l01534"></a>01534 <span class="preprocessor">        #ifdef _VISIBILITYDEBUG</span>
<a name="l01535"></a>01535 <span class="preprocessor"></span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (key == <span class="stringliteral">"ShowPagingLandScapeOctree"</span>)
<a name="l01536"></a>01536             {   
<a name="l01537"></a>01537                     mShowBoxes = * static_cast &lt; const bool * &gt; (val);
<a name="l01538"></a>01538                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01539"></a>01539             }
<a name="l01540"></a>01540             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (key == <span class="stringliteral">"CullDebug"</span>)
<a name="l01541"></a>01541             {
<a name="l01542"></a>01542                 mCullDebug = * static_cast &lt; const bool * &gt; (val);
<a name="l01543"></a>01543                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01544"></a>01544             }
<a name="l01545"></a>01545             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (key == <span class="stringliteral">"CullCamera"</span>)
<a name="l01546"></a>01546             {
<a name="l01547"></a>01547                 mCullCamera = * static_cast &lt; const bool * &gt; (val);
<a name="l01548"></a>01548                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01549"></a>01549             }
<a name="l01550"></a>01550 <span class="preprocessor">        #endif //_VISIBILITYDEBUG    </span>
<a name="l01551"></a>01551 <span class="preprocessor"></span>        <span class="keywordflow">return</span> SceneManager::setOption(key, val);
<a name="l01552"></a>01552 
<a name="l01553"></a>01553 
<a name="l01554"></a>01554     }
<a name="l01555"></a>01555     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l01556"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#4418816e7847402a3a4697548ad28814">01556</a>     <span class="keywordtype">bool</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#4418816e7847402a3a4697548ad28814">PagingLandScapeOctreeSceneManager::getOption</a>(<span class="keyword">const</span> String &amp; key, <span class="keywordtype">void</span> *val)
<a name="l01557"></a>01557     {
<a name="l01558"></a>01558         <span class="keywordflow">if</span> (key == <span class="stringliteral">"Size"</span>)
<a name="l01559"></a>01559         {
<a name="l01560"></a>01560             AxisAlignedBox * b = static_cast &lt; AxisAlignedBox * &gt; (val);
<a name="l01561"></a>01561             b-&gt;setExtents(<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#025e48e12cf27df7365ad7431379757c">mPagingLandScapeOctree</a>-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#f501e0e599cea5c94b612dd6231c16f7">getBoundingBox</a> ().getMinimum(), <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#025e48e12cf27df7365ad7431379757c">mPagingLandScapeOctree</a>-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#f501e0e599cea5c94b612dd6231c16f7">getBoundingBox</a>().getMaximum());
<a name="l01562"></a>01562             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01563"></a>01563         }
<a name="l01564"></a>01564 
<a name="l01565"></a>01565         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (key == <span class="stringliteral">"Depth"</span>)
<a name="l01566"></a>01566         {
<a name="l01567"></a>01567             * static_cast &lt; int * &gt; (val) = <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#46e93eae9353f96100f4f2bf25873466">mMaxDepth</a>;
<a name="l01568"></a>01568             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01569"></a>01569                 }
<a name="l01570"></a>01570                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (key == <span class="stringliteral">"setNumberOfConservativeFrames"</span>)
<a name="l01571"></a>01571                 {
<a name="l01572"></a>01572                         * static_cast &lt; unsigned int * &gt; (val) = <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#ef68602265631ce6e77bae3c13c70dd7">mOcclusion</a>.<a class="code" href="classOgre_1_1Occlusion.html#030adea0b445153b6dd9a82fda608c4d">getNumberOfConservativeFrames</a>();
<a name="l01573"></a>01573                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01574"></a>01574                 }  
<a name="l01575"></a>01575                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (key == <span class="stringliteral">"CurrentOptionCamera"</span>)
<a name="l01576"></a>01576                 {
<a name="l01577"></a>01577                         *static_cast &lt; String * &gt; (val) = <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#ae4e0a77199645ce85c99dff9098962f">mCurrentOptionCamera</a>-&gt;getName(); 
<a name="l01578"></a>01578                         <span class="keywordflow">return</span> <span class="keyword">true</span>;    
<a name="l01579"></a>01579                 }
<a name="l01580"></a>01580                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (key == <span class="stringliteral">"getCullingMode"</span>)
<a name="l01581"></a>01581                 {
<a name="l01582"></a>01582                         assert (<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#ae4e0a77199645ce85c99dff9098962f">mCurrentOptionCamera</a>);
<a name="l01583"></a>01583                         *static_cast &lt; String * &gt; (val) = <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#ae4e0a77199645ce85c99dff9098962f">mCurrentOptionCamera</a>-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctreeCamera.html#c205b71be9ac2f7b82c97cc455cf1c2d">getOcclusionModeAsString</a>();
<a name="l01584"></a>01584                         <span class="keywordflow">return</span> <span class="keyword">true</span>;            
<a name="l01585"></a>01585                 }
<a name="l01586"></a>01586                 
<a name="l01587"></a>01587 <span class="preprocessor">        #ifdef _VISIBILITYDEBUG</span>
<a name="l01588"></a>01588 <span class="preprocessor"></span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (key == <span class="stringliteral">"ShowPagingLandScapeOctree"</span>)
<a name="l01589"></a>01589             {
<a name="l01590"></a>01590 
<a name="l01591"></a>01591                 * static_cast &lt; bool * &gt; (val) = mShowBoxes;
<a name="l01592"></a>01592                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01593"></a>01593             }
<a name="l01594"></a>01594             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (key == <span class="stringliteral">"CullCamera"</span>)
<a name="l01595"></a>01595             {
<a name="l01596"></a>01596                 * static_cast &lt; bool * &gt; (val) = mCullCamera;
<a name="l01597"></a>01597                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01598"></a>01598             } 
<a name="l01599"></a>01599             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (key == <span class="stringliteral">"CullDebug"</span>)
<a name="l01600"></a>01600             {
<a name="l01601"></a>01601                 * static_cast &lt; bool * &gt; (val) = mCullDebug;
<a name="l01602"></a>01602                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01603"></a>01603             }
<a name="l01604"></a>01604 <span class="preprocessor">        #endif //_VISIBILITYDEBUG</span>
<a name="l01605"></a>01605 <span class="preprocessor"></span>    
<a name="l01606"></a>01606 
<a name="l01607"></a>01607         <span class="keywordflow">return</span> SceneManager::getOption(key, val);
<a name="l01608"></a>01608     }
<a name="l01609"></a>01609     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l01610"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#420e9facebdbb3af105a15ddeef717e6">01610</a>     <span class="keywordtype">void</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#420e9facebdbb3af105a15ddeef717e6">PagingLandScapeOctreeSceneManager::clearScene</a>(<span class="keywordtype">void</span>)
<a name="l01611"></a>01611     {
<a name="l01612"></a>01612         SceneManager::clearScene();
<a name="l01613"></a>01613 
<a name="l01614"></a>01614          <span class="comment">// reset cameras</span>
<a name="l01615"></a>01615         <span class="comment">//CameraList::iterator iCam = mCameras.begin();</span>
<a name="l01616"></a>01616         <span class="comment">//for (; iCam != mCameras.end(); ++iCam)</span>
<a name="l01617"></a>01617         <span class="comment">//{</span>
<a name="l01618"></a>01618         <span class="comment">//    PagingLandScapeOctreeCamera *cam = static_cast &lt;PagingLandScapeOctreeCamera *&gt; (iCam-&gt;second);</span>
<a name="l01619"></a>01619         <span class="comment">//    if (cam-&gt;isRegisteredInOcclusionSystem ())</span>
<a name="l01620"></a>01620         <span class="comment">//    {</span>
<a name="l01621"></a>01621         <span class="comment">//        mPagingLandScapeOctree-&gt;traversal (UnregisterCameraTraversal(cam));                   </span>
<a name="l01622"></a>01622         <span class="comment">//        cam-&gt;setRegisteredInOcclusionSystem (false);</span>
<a name="l01623"></a>01623        <span class="comment">//     } </span>
<a name="l01624"></a>01624         <span class="comment">//}            </span>
<a name="l01625"></a>01625 
<a name="l01626"></a>01626         <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#eafc6509522118d8879627d4e7da6d03">init</a>(<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#ba46e20a1ef11f8019dacae428811bb8">mBox</a>, <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#46e93eae9353f96100f4f2bf25873466">mMaxDepth</a>);
<a name="l01627"></a>01627 
<a name="l01628"></a>01628     }
<a name="l01629"></a>01629     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l01630"></a>01630     AxisAlignedBoxSceneQuery*
<a name="l01631"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#8a301a489c4e3e273e4201dcc31e16ea">01631</a>     <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#8a301a489c4e3e273e4201dcc31e16ea">PagingLandScapeOctreeSceneManager::createAABBQuery</a>(<span class="keyword">const</span> AxisAlignedBox&amp; box, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> mask)
<a name="l01632"></a>01632     {
<a name="l01633"></a>01633         <a class="code" href="classOgre_1_1PagingLandScapeOctreeAxisAlignedBoxSceneQuery.html">PagingLandScapeOctreeAxisAlignedBoxSceneQuery</a>* q = <span class="keyword">new</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#c86ea675f4063707566b3e9ddec42f72">PagingLandScapeOctreeAxisAlignedBoxSceneQuery</a>(<span class="keyword">this</span>);
<a name="l01634"></a>01634         q-&gt;setBox(box);
<a name="l01635"></a>01635         q-&gt;setQueryMask(mask);
<a name="l01636"></a>01636         <span class="keywordflow">return</span> q;
<a name="l01637"></a>01637     }
<a name="l01638"></a>01638     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l01639"></a>01639     SphereSceneQuery*
<a name="l01640"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#7cb3f37dab61863d7fa98acb7004cdbb">01640</a>     <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#7cb3f37dab61863d7fa98acb7004cdbb">PagingLandScapeOctreeSceneManager::createSphereQuery</a>(<span class="keyword">const</span> Sphere&amp; sphere, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> mask)
<a name="l01641"></a>01641     {
<a name="l01642"></a>01642         <a class="code" href="classOgre_1_1PagingLandScapeOctreeSphereSceneQuery.html">PagingLandScapeOctreeSphereSceneQuery</a>* q = <span class="keyword">new</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#3f91647bced28fb07178b24e7ed6955b">PagingLandScapeOctreeSphereSceneQuery</a>(<span class="keyword">this</span>);
<a name="l01643"></a>01643         q-&gt;setSphere(sphere);
<a name="l01644"></a>01644         q-&gt;setQueryMask(mask);
<a name="l01645"></a>01645         <span class="keywordflow">return</span> q;
<a name="l01646"></a>01646     }
<a name="l01647"></a>01647     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l01648"></a>01648     PlaneBoundedVolumeListSceneQuery*
<a name="l01649"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#5cbd7fa921eaf653577ef5a5a6293736">01649</a>     <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#5cbd7fa921eaf653577ef5a5a6293736">PagingLandScapeOctreeSceneManager::createPlaneBoundedVolumeQuery</a>(<span class="keyword">const</span> PlaneBoundedVolumeList&amp; volumes,
<a name="l01650"></a>01650             <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> mask)
<a name="l01651"></a>01651     {
<a name="l01652"></a>01652         <a class="code" href="classOgre_1_1PagingLandScapeOctreePlaneBoundedVolumeListSceneQuery.html">PagingLandScapeOctreePlaneBoundedVolumeListSceneQuery</a>* q = <span class="keyword">new</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#09da0c721cba5d81268dd18f68302a8e">PagingLandScapeOctreePlaneBoundedVolumeListSceneQuery</a>(<span class="keyword">this</span>);
<a name="l01653"></a>01653         q-&gt;setVolumes(volumes);
<a name="l01654"></a>01654         q-&gt;setQueryMask(mask);
<a name="l01655"></a>01655         <span class="keywordflow">return</span> q;
<a name="l01656"></a>01656     }
<a name="l01657"></a>01657 
<a name="l01658"></a>01658     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l01659"></a>01659     RaySceneQuery*
<a name="l01660"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#d1909c1d5fe7e965508c61d84eb141f4">01660</a>     <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#d1909c1d5fe7e965508c61d84eb141f4">PagingLandScapeOctreeSceneManager::createRayQuery</a>(<span class="keyword">const</span> Ray&amp; ray, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> mask)
<a name="l01661"></a>01661     {
<a name="l01662"></a>01662         <a class="code" href="classOgre_1_1PagingLandScapeOctreeRaySceneQuery.html">PagingLandScapeOctreeRaySceneQuery</a>* q = <span class="keyword">new</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#1d48c1e927a105162299cc3d7792bf2f">PagingLandScapeOctreeRaySceneQuery</a>(<span class="keyword">this</span>);
<a name="l01663"></a>01663         q-&gt;setRay(ray);
<a name="l01664"></a>01664         q-&gt;setQueryMask(mask);
<a name="l01665"></a>01665         <span class="keywordflow">return</span> q;
<a name="l01666"></a>01666     }
<a name="l01667"></a>01667     <span class="comment">//---------------------------------------------------------------------</span>
<a name="l01668"></a>01668     IntersectionSceneQuery*
<a name="l01669"></a><a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#438f81e0ffc89ee17a8e02aa02993792">01669</a>     <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#438f81e0ffc89ee17a8e02aa02993792">PagingLandScapeOctreeSceneManager::createIntersectionQuery</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> mask)
<a name="l01670"></a>01670    {
<a name="l01671"></a>01671 
<a name="l01672"></a>01672     <span class="comment">// PagingLandScapeOctree implementation performs WORSE for &lt; 500 objects</span>
<a name="l01673"></a>01673     <span class="comment">// TODO: optimize it so it's better in all cases</span>
<a name="l01674"></a>01674     <span class="comment">//PagingLandScapeOctreeIntersectionSceneQuery* q = new PagingLandScapeOctreeIntersectionSceneQuery(this);</span>
<a name="l01675"></a>01675     DefaultIntersectionSceneQuery* q;
<a name="l01676"></a>01676     <span class="keywordflow">if</span> (<a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#025e48e12cf27df7365ad7431379757c">mPagingLandScapeOctree</a>-&gt;<a class="code" href="classOgre_1_1PagingLandScapeOctree.html#fabf40fe8e8c438ac41ae9ea9cbb70fe">numNodes</a> () &gt; 500)
<a name="l01677"></a>01677         q = <span class="keyword">new</span> <a class="code" href="classOgre_1_1PagingLandScapeOctreeSceneManager.html#27b1dfea85d976db90bba8237edc832d">PagingLandScapeOctreeIntersectionSceneQuery</a>(<span class="keyword">this</span>);
<a name="l01678"></a>01678     <span class="keywordflow">else</span>
<a name="l01679"></a>01679         q = <span class="keyword">new</span> DefaultIntersectionSceneQuery(<span class="keyword">this</span>);
<a name="l01680"></a>01680     q-&gt;setQueryMask(mask);
<a name="l01681"></a>01681     <span class="keywordflow">return</span> q;
<a name="l01682"></a>01682    }
<a name="l01683"></a>01683 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Mon Dec 11 10:28:02 2006 for RainbruRPG by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
